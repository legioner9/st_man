
<!--+++++++++++++++++++++++++++++++++++++++++++  0  +++++++++++++++++++++++++++++++++++++++++++--->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Проект OpenNet: MAN setserial (8) Команды системного администрирования (FreeBSD и Linux)</title><meta name="KeyWords" content="man, manual, MAN, системное руководство, linux, FreeBSD, OpenBSD, Solaris, ядро, программы, системный вызов, setserial"><meta name="viewport" content="width=device-width, initial-scale=1"></head>


<body link="#0000FF" vlink="#000080" text="#000000" bgcolor="#E3E4D0" alink="#FF00FF">
<link rel="stylesheet" href="/opennet4.css" type="text/css">
<!--htdig_noindex-->
<form method="get" action="https://www.opennet.ru/search.shtml">
<aside>
<div style="width: 100%; text-align: right; font-size: 70%; background: #E9EAD6; margin-bottom:-10px;">
Профиль: <b><a href="/~" rel="nofollow" title="/~ - сводная страница участника"><u>Аноним</u></a></b> (<a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=login">вход</a> | <a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=user_register">регистрация</a>)</div>

<table cellspacing="0" cellpadding="0" width="100%" border="0">
<tbody><tr>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" valign="BOTTOM" bgcolor="#E9EAD6" width="300">
<a href="https://www.opennet.ru/"><img src="/opennet2.gif" alt="The OpenNET Project" height="60" width="249" border="0"></a><br>
</td>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" bgcolor="#E9EAD6" align="CENTER" width="100">

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:10px;" bgcolor="#E9EAD6" align="CENTER" width="50%">
<table width="100%" border="0">
<tbody><tr>
<td width="22%">
 <a href="https://www.opennet.ru/opennews/" class="h"><b>НОВОСТИ</b></a> (<a href="https://www.opennet.ru/news/opennet.shtml" class="h">+</a>)
</td><td width="18%%">
  <a href="https://www.opennet.ru/mp/" class="h"><b>КОНТЕНТ</b></a>
</td><td width="14%">
  <a href="http://wiki.opennet.ru" class="h"><b>WIKI</b></a>
</td><td width="14%">
   <a href="https://www.opennet.ru/man.shtml" class="h"><b>MAN'ы</b></a>
</td><td width="16%">
   <a href="https://www.opennet.ru/forum/" class="h"><b>ФОРУМ</b></a>
</td><td width="16%">
<a href="https://www.opennet.ru/search.shtml" class="h" onmouseover="document.getElementById('form12').style.display='block';">Поиск</a>&nbsp;(<a href="https://www.opennet.ru/keywords/" class="h">теги</a>)
<input id="form12" style="display: none;" size="10" name="words" value="" title="для поиска в google наберите &quot;g фраза&quot;" type="text">
</td></tr>
</tbody></table>

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:5px;" bgcolor="#E9EAD6" align="right" width="20%">

<a href="https://www.opennet.ru/opennews/opennews_all_utf.rss"><img src="/img/rss.png" alt="RSS" title="RSS" height="16" width="16" border="0"></a>&nbsp;<a href="https://twitter.com/opennetru"><img src="/twitter.png" alt="twitter" title="Twitter" height="16" width="16" border="0"></a>&nbsp;<a href="https://vk.com/opennet"><img src="/img/vkontakte.gif" title="ВКонтакте" height="16" width="16" border="0"></a>&nbsp;<a href="https://zen.yandex.ru/opennet"><img src="/img/zen.gif" title="Yandex Zen" height="16" width="16" border="0"></a>&nbsp;<a href="https://www.facebook.com/OpenNet.News/"><img src="/img/facebook.gif" title="Facebook" height="16" width="16" border="0"></a>&nbsp;<a href="https://telegram.space/opennet_ru"><img src="/img/telegram2.png" title="Telegram" height="16" width="16" border="0"></a>
</td></tr></tbody></table>
</aside>

<style>
    .hdr_mobile {
	text-align: center; 
	display: none;
	margin: 0px;
	padding: 0px;
    }
</style>
<div class="hdr_mobile">
<div style="margin-left: auto; margin-right: auto; width: 100%; height: 70px; border:1px solid #b0b190; min-width: 360px; max-width: 600px; background: #E9EAD6 url('/back.gif') repeat-x bottom left;">
<div style="float:left; width: 249px; height: 60px; margin-top: 10px;">
<a href="https://www.opennet.ru"><img src="/opennet2_lite.gif" style="height: 60px; width: 249px; border: 1px;" alt="The OpenNET Project / Index page"></a>
</div>
<div style="float: left; text-align: center; height: 70px; width: 331px; padding: 5px; margin-left: 10px;">
<br><small>[ <a href="/opennews/">новости</a>&nbsp;/<a href="/opennews/?full_lines=15&amp;lines=15&amp;mid_lines=00">+++</a> | <a href="/forum/">форум</a> | <a href="http://wiki.opennet.ru">wiki</a> | <a href="/keywords/">теги</a>
| <a href="tg://resolve?domain=opennet_ru"><img src="/img/telegram2.png" title="Telegram" style="margin-bottom: -4px;" height="16" width="16" border="0"></a>
]</small>
</div>
</div>
</div>
<div style="clear: both;"></div>


<div style="float: left; width: 279; text-align: left;padding-right: 60px;" id="adv">
</div>
<div style="padding-top: 0px;position:absolute;left:50%;margin-left:-235px;width:470px;" id="adv2">
</div>
<div style="width: 279;float: right;" id="adv3">
</div>
<div style="clear: both;"></div>
<br>
</form>
<!--/htdig_noindex-->

<center><h3><font color="#000088">Интерактивная система просмотра системных руководств (man-ов)</font></h3></center>
<form method="GET" action="/man.shtml"> 
<table cellspacing="0" cellpadding="1" bgcolor="#B0B190" align="center" width="600" border="0">
<tbody><tr>
<td valign="TOP">

<table cellspacing="0" cellpadding="0" bgcolor="#E9EAD6" align="center" width="100%" border="0">
<tbody><tr><td>&nbsp;<font color="#555555">Тема</font></td><td><font color="#555555">Набор</font></td><td><font color="#555555">Категория</font></td><td>&nbsp;</td></tr>
<tr><td>

&nbsp;<input size="20" name="topic" value="setserial" type="text"></td><td><select name="russian">
<option value="4">Solaris man
</option><option value="1">FreeBSD man
</option><option value="3">Разные man
</option><option value="0" selected="">Русские man
</option><option value="2">Linux man
</option><option value="5">POSIX man
</option></select></td>
<td><select size="1" name="category">
	  <option value="" selected="">All
	  </option><option value="1">1
	  </option><option value="2">2
	  </option><option value="3">3
	  </option><option value="4">4
	  </option><option value="5">5
	  </option><option value="6">6
	  </option><option value="7">7
	  </option><option value="8">8
	  </option><option value="9">9
</option></select></td>

<td><input name="submit" value="Показать man" type="submit"></td></tr>
<script async="" src="https://www.google-analytics.com/analytics.js"></script><script language="JavaScript" src="/print.js"></script>
<tr><td colspan="4" align="left">&nbsp;[<a href="/man.shtml">Cписок руководств</a> | <a href="#" onclick="pr('none');">Печать</a>]</td></tr>
</tbody></table>
</td></tr></tbody></table>
</form>
<h3></h3><font size="+2">setserial (8)</font><hr><li>&gt;&gt; <a href="/man.shtml?topic=setserial&amp;category=8&amp;russian=0"><u>setserial</u></a> (8) <font color="#555555"> ( Русские man: Команды системного администрирования )</font></li><li> <a href="/man.shtml?topic=setserial&amp;category=8&amp;russian=2"><u>setserial</u></a> (8) <font color="#555555"> ( Linux man: Команды системного администрирования )</font></li>
<a name="lbAB">&nbsp;</a>
<h2>НАЗВАНИЕ</h2>

setserial - получить/установить информацию о последовательном порте в Linux
<a name="lbAC">&nbsp;</a>
<h2>СИНТАКСИС</h2>

<b>setserial</b>

<b>[ -abqvVWz ]</b>

устройство
<b>[ </b>параметр1<b> [ </b>аргументы<b> ] ] ...</b>

<p>
<b>setserial -g</b>

<b>[ -abGv ]</b>

устройство1 ...
<a name="lbAD">&nbsp;</a>
</p><h2>ОПИСАНИЕ</h2>

Программа
<b>setserial</b>

разработана для настройки и/или создания отчётов содержащих информацию о конфигурации последовательного интерфейса.
Эта информация включает в себя базовый адрес ввода/вывода (I/O port) и линию запроса прерываний (IRQ) для конкретного последовательного порта, и надо или нет интерпретировать разделяющий ключ как электронный ключ безопасности и другую.
<p>
Во время обычного процесса загрузки, инициализируются только порты COM 1-4, при этом по умолчанию используются значения базовых адресов ввода/вывода и линий запроса прерываний IRQ, которые приводятся ниже. Для назначения инициализации любых дополнительных последовательных портов, или изменения настроек портов COM 1-4 на нестандартные, используется программа
<b>setserial</b>.

Обычно она вызывается скриптом
<i>rc.serial</i>,

который запускается из
<i>/etc/rc.local</i>.

</p><p>
Аргумент(ы)
<i>устройство</i>

устанавливает последовательное устройство, которое будет конфигурироваться или опрашиваться. Обычно, это
<b>/dev/cua[0-3]</b>.

</p><p>
Если параметры не указаны, то
<b>setserial</b>

выдаст тип микросхемы порта (например, 8250, 16450, 16550, 16550A, и так далее), аппаратный адрес ввода/вывода (I/O port), линию аппаратного прерывания (IRQ), назначенную частоту изменения состояния сигнала линии в бодах, и некоторые из его операционных флагов.
</p><p>
Если задана опция
<b>-g</b>,

то аргументы команды setserial интерпретируются как список устройств, характеристики которых следует показать.
</p><p>
Без опции
<b>-g</b>,

первый аргумент команды setserial интерпретируется как устройство, которое будет настраиваться или характеристики которого будут отображены, и любые дополнительные аргументы трактуются как параметры, которые должны быть присвоены этому последовательному устройству.
</p><p>
По большей части, для настройки параметров последовательного порта требуются привилегии суперпользователя. Однако, значения некоторых параметров могут устанавливаться и обычным пользователем, и эти исключения отмечены в этом руководстве.
</p><p>
<a name="lbAE">&nbsp;</a>
</p><h2>ОПЦИИ</h2>

Команда
<b>setserial</b>

принимает следующие опции:
<p>
</p><dl compact="">
<dt><b>-a</b>

</dt><dd>
В отчёте о конфигурации последовательного устройства выводить всю доступную информацию.
</dd><dt><b>-b</b>

</dt><dd>
В отчёте о конфигурации последовательного устройства выводить сводную информацию о настройках всех последовательных устройств, что может быть полезным для использовании в скриптах /etc/rc для отображения сообщений во время процесса загрузки системы.
</dd><dt><b>-G</b>

</dt><dd>
Вывести конфигурационную информацию последовательного порта в форме пригодной для подачи обратно в setserial в качестве аргументов командной строки.
</dd><dt><b>-q</b>

</dt><dd>
Быть скромнее. Строк в выводе команды
<b>setserial</b>

будет меньше.
</dd><dt><b>-v</b>

</dt><dd>
Быть многословнее. Вывод команды
<b>setserial</b>

будет расширен дополнительной информацией о текущем состоянии.
</dd><dt><b>-V</b>

</dt><dd>
Показать версию программы и выйти.
</dd><dt><b>-W</b>

</dt><dd>
Произвести "дикую" инициализацию и выйти. Эта опция больше не поддерживается в ядрах Linux версии 2.1 и выше.
</dd><dt><b>-z</b>

</dt><dd>
Обнулить флаги последовательного порта перед их установкой. Эта опция увязывает автоматическое сохранение флагов последовательного порта при использовании опции -G.
<p>
</p></dd></dl>
<a name="lbAF">&nbsp;</a>
<h2>ПАРАМЕТРЫ</h2>

Последовательному порту могут быть присвоены следующие параметры.
<p>
Предполагается, что значения всех аргументов указаны в десятичной форме, кроме тех, которым предшествует "0x".
</p><p>
</p><dl compact="">
<dt><b>port</b> базовый_адрес

</dt><dd>
Как описано выше, параметр
<b>port</b>

устанавливает базовый адрес ввода/вывода порта (I/O port).
</dd><dt><b>irq</b> номер_irq

</dt><dd>
Как и описано выше, параметр
<b>irq</b>

устанавливает номер линии запроса аппаратного прерывания IRQ.
</dd><dt><b>uart</b> тип_uart

</dt><dd>
Этот параметр используется для установки типа микросхемы UART. Разрешенные типы:
<b>никакой</b>,

8250, 16450, 16550, 16550A, 16650, 16650V2, 16654, 16750, 16850, 16950, и
16954.
Использование типа UART
<b>никакой</b>,

запретит использование порта.
<p>
Некоторые внутренние модемы заявлены, как имеющие "микросхему 16550A UART с буфером в 1 Кб". Это ложь. В действительности они не имеют 16550A-совместимую микросхему UART;
вместо этого у них имеется микросхема UART совместимая на уровне регистров с 16450 с буфером приёма в 1 Кб, для предотвращения переполнения приёмника.
Это важно, потому что они не имеют FIFO-буфера передачи. Следовательно, они несовместимы с микросхемами UART 16550A, и процесс автоматической конфигурации будет идентифицировать их правильно, как микросхемы 16450.
Если вы попытаетесь переопределить это применяя параметр
<b>uart</b>,

то сможете наблюдать потерянные символы во время передачи файла.
Эти микросхемы UART, обычно имеют и другие проблемы: что делает параметр
<b>skip_test</b>

для них, часто употребимым.
</p></dd><dt><b>autoconfig</b>

</dt><dd>
Когда этот параметр задан, то
<b>setserial</b>

запросит ядро о попытке автоматической конфигурации последовательного порта. Базовый адрес ввода/вывода должен быть установлен правильно; тогда ядро попытается определить тип микросхемы UART, и если задан параметр
<b>auto_irq</b>,

то Linux также попробует автоматически определить линию прерываний IRQ.
Параметр
<b>autoconfig</b>

должен указываться после параметров: <b>port</b>, <b>auto_irq</b>, and <b>skip_test</b>.
</dd><dt><b>auto_irq</b>

</dt><dd>
Попытаться определить линию прерываний IRQ во время выполнения автоматической конфигурации. Данная возможность не гарантирует, что результат её работы будет верным; некоторая аппаратура может обмануть ядро Linux. И в целом безопаснее не использовать возможности 
<b>auto_irq</b>,

предпочтительнее явно указать IRQ с помощью параметра
<b>irq</b>.

</dd><dt><b>^auto_irq</b>

</dt><dd>
<i>Не</i>

пытаться определить линию прерываний IRQ во время выполнения автоматической конфигурации.
</dd><dt><b>skip_test</b>

</dt><dd>
Пропустить проверку микросхемы UART. Некоторые внутренние модемы вместо микросхем UART, совместимых с чипами UART от National Semiconductor, имеют дешёвые имитирующие UART подделки. Некоторые из этих поделий не поддерживают в полном объёме режим обнаружения с применением внутренней "заглушки" (loopback), используемый ядром для уверенного определения типа микросхемы UART доступной по соответствующему адресу, прежде чем попытаться её сконфигурировать. Итак, вам не потребуется указывать этот параметр для надёжных внутренних модемов, ведь Linux может корректно инициализировать микросхемы UART.
</dd><dt><b>^skip_test</b>

</dt><dd>
<i>Не</i>

пропускать проверку микросхемы UART во время выполнения автоматической конфигурации.
</dd><dt><b>baud_base</b> скорость_в_бодах

</dt><dd>
Этот параметр устанавливает частоту изменения состояния сигнала линии в бодах, которая является опорной частотой внутреннего генератора поделенной счётчиком-делителем на 16. Обычно, это значение равно 115200 бод, это также самая высокая скорость которую может поддерживать микросхема UART.
</dd><dt><b>spd_hi</b>

</dt><dd>
Использовать 57,6 Кбод, когда приложение запрашивает 38,4 Кбод.
Этот параметр может применяться непривилегированным пользователем.
</dd><dt><b>spd_vhi</b>

</dt><dd>
Использовать 115 Кбод, когда приложение запрашивает 38,4 Кбод.
Этот параметр может применяться непривилегированным пользователем.
</dd><dt><b>spd_shi</b>

</dt><dd>
Использовать 230 Кбод, когда приложение запрашивает 38,4 Кбод.
Этот параметр может применяться непривилегированным пользователем.
</dd><dt><b>spd_warp</b>

</dt><dd>
Использовать 460 Кбод, когда приложение запрашивает 38,4 Кбод.
Этот параметр может применяться непривилегированным пользователем.
</dd><dt><b>spd_cust</b>

</dt><dd>
Использовать пользовательский делитель при установке скорости передачи данных, когда приложение запрашивает 38,4 Кбод. Делитель определяется по формуле D=115200/V, где V - скорость передачи, бит/с. Входная частота синхронизации 1,8432 МГц делится на заданный коэффициент, после чего получается 16-кратная частота передачи данных. Иначе говоря, будет установлена скорость
<b>baud_base</b>

делённая на
<b>divisor</b>.

Этот параметр может применяться непривилегированным пользователем.
</dd><dt><b>spd_normal</b>

</dt><dd>
Использовать 38,4 Кбод, когда приложение запрашивает 38,4 Кбод.
Этот параметр может применяться непривилегированным пользователем.
</dd><dt><b>divisor</b> делитель

</dt><dd>
Этот параметр устанавливает пользовательское деление частоты синхронизации. Данный делитель будет использован, при применении параметра
<b>spd_cust</b>

и установке приложением скорости передачи данных последовательного порта в 38,4 Кбод.
Этот параметр может применяться непривилегированным пользователем.
</dd><dt><b>sak</b>

</dt><dd>
Установить разделяющий ключ в электронный ключ безопасности.
</dd><dt><b>^sak</b>

</dt><dd>
Выключить электронный ключ безопасности.
</dd><dt><b>fourport</b>

</dt><dd>
Сконфигурировать порт как четырёх-портовую карту AST.
</dd><dt><b>^fourport</b>

</dt><dd>
Выключить настройку четырёх-портовой карты AST.
</dd><dt><b>close_delay</b> задержка

</dt><dd>
Определить период времени, в сотых долях секунды, в течении которого выход сигнала готовности терминала (компьютера/модема) к обмену данными DTR (Data Terminal Ready) должен быть низким, после которого устройство осуществляющее исходящий звонок будет закрыто, прежде чем, для осуществления дозвона, заблокированное устройство повысит уровень выходного сигнала DTR снова. По умолчанию, значение параметра задержки равно 50, или пол-секунды.
</dd><dt><b>closing_wait</b> задержка

</dt><dd>
Определить период времени, в сотых долях секунды, в течении которого ядро будет ожидать поступление данных передаваемых из последовательного порта, прежде чем закрыть порт. Если указать "нисколько", то задержка происходить не будет. Если указать "бесконечно", то ожидание ядром передачи буферизованых данных будет неограниченным. По умолчанию значение задержки установлено в 3000 или 30 секунд.
Эта стандартное значение подойдёт для большинства устройств. Если выбрана слишком продолжительная задержка, то последовательный порт может "подвиснуть" на долгое время ожидая данные от прерванного соединения.
Если выбран слишком короткая задержка, то появляется риск, что некоторые передаваемые данные будут утеряны. В случае, если устройство чрезвычайно медленное, такое как плоттер, потребуется установить большее значение closing_wait.
</dd><dt><b>session_lockout</b>

</dt><dd>
Блокировать обращения других сеансов к порту исходящих вызовов (/dev/cuaXX).
Процесс, однажды открыв порт, не разрешит процессу с другим идентификатором сеанса открыть этот порт, пока первый процесс его не закроет.
</dd><dt><b>^session_lockout</b>

</dt><dd>
<i>Не</i>

блокировать обращения других сеансов к порту исходящих вызовов.
</dd><dt><b>pgrp_lockout</b>

</dt><dd>
Блокировать обращения процессов других групп к порту исходящих вызовов (/dev/cuaXX).
Процесс, однажды открыв порт, не разрешит процессам других групп открыть этот порт, пока первый процесс его не закроет.
</dd><dt><b>^pgrp_lockout</b>

</dt><dd>
<i>Не</i>

блокировать обращения процессов других групп к порту исходящих вызовов.
</dd><dt><b>hup_notify</b>

</dt><dd>
По окончании использования линии процессом осуществлявшем исходящий звонок (либо при его завершении или обрыве связи), известить процесс блокированный при попытке открытия линии для ожидания входящих звонков, возвратом EAGAIN в состояние "открыто".
<p>
Применение этот параметр находит для терминалов (getty), которые блокируют последовательные порты во время ответа на входящий звонок. Это позволит (getty) сбросить модем (конфигурация которого могла быть изменена приложением использовавшим устройство исходящих звонков), прежде чем снова заблокировать его на открытие.
</p></dd><dt><b>^hup_notify</b>

</dt><dd>
<i>Не</i>

уведомлять процесс блокированный при попытке открытия линии для ожидания входящих звонков, в случае если устройство исходящих звонков сформирует сигнал разъединения.
</dd><dt><b>split_termios</b>

</dt><dd>
Отдельно обрабатывать установки termios для устройства исходящих и для устройства входящих звонков.
</dd><dt><b>^split_termios</b>

</dt><dd>
Использовать одну и туже структуру termios для хранения настроек устройств и входящих и исходящих звонков.
</dd><dt><b>callout_nohup</b>

</dt><dd>
Если соответствующий последовательный порт открыт как устройство исходящих звонков, не обрывать терминальное соединение (tty) в случае обнаружения отсутствия сигнала несущей.
</dd><dt><b>^callout_nohup</b>

</dt><dd>
<i>Не</i>

игнорировать разрыв терминального соединения когда последовательный порт открыт как устройство исходящих звонков. Конечно же, если разрыв соединения произошёл, флаг HUPCL в termios должен быть включен.
</dd><dt><b>low_latency</b>

</dt><dd>
Минимизировать время ожидания приёма данных последовательным портом ценой большего использования ресурсов CPU.  (Обычно, для снижения накладных расходов, среднее время ожидания равно 5-10 мс, прежде чем символы начнут передаваться.) По умолчанию этот параметр отключен, но для некоторых приложений работающих в реальном времени он может быть полезным.
</dd><dt><b>^low_latency</b>

</dt><dd>
Оптимизировать обработку последовательных символов в пользу эффективного использования CPU и ценой среднего времени ожидания обработки в 5-10 мс.
Данный параметр установлен по умолчанию.
</dd></dl>
<a name="lbAG">&nbsp;</a>
<h2>КОНФИГУРИРОВАНИЕ ПОСЛЕДОВАТЕЛЬНЫХ ПОРТОВ</h2>

Управление последовательным портом разделяется на два этапа - предварительное конфигурирование аппаратных средств и текущее (оперативное) переключение режимов работы прикладным и системным ПО.
Важно отметить, что setserial <b>не</b> настраивает аппаратное обеспечение, конкретную последовательную микросхему на использование конкретного базового адреса ввода/вывода. Setserial всего лишь говорит ядру Linux где найти для данного последовательного порта, соответствующие ему базовый адрес ввода/вывода (I/O port) и линию аппаратных прерываний IRQ. Аппаратные средства могут настраиваться следующим образом. Порт, расположенный на плате расширения (мультикарте), устанавливаемый в слот расширения PCI (или ISA, ISA+VLB), обычно конфигурируется переключателями на самой плате. Порт, расположенный на системной (материнской) плате, обычно конфигурируется в BIOS, иногда переключением некоторых DIP-переключателей на плате.
<p>
Этот раздел предоставит информацию, которая поможет вам в конфигурировании последовательных портов.
</p><p>
"Стандартная в MS-DOS" конфигурация портов представлена ниже:
</p><p>
</p><pre><dl compact=""><dt></dt><dd>/dev/ttys0 (COM1), port 0x3f8, irq 4
/dev/ttys1 (COM2), port 0x2f8, irq 3
/dev/ttys2 (COM3), port 0x3e8, irq 4
/dev/ttys3 (COM4), port 0x2e8, irq 3
</dd></dl>
</pre>

<p>
Из-за ограничений, накладываемых архитектурой шины AT/ISA, линия запроса прерываний IRQ не может разделяться между двумя или более последовательными портами.
Если вы попытаетесь использовать два порта одновременно, то один из них, или сразу оба будут работать ненадёжно.
Это ограничение можно преодолеть, используя специальные многопортовые карты, которые разработаны так, чтобы несколько последовательных портов могли разделять одну линию аппаратных прерываний IRQ.
Linux поддерживает многопортовые последовательные карты, включая AST
FourPort, плату Accent Async, плату Usenet Serial II board, платы Bocaboard BB-1004, BB-1008, и BB-2016, и последовательную плату HUB-6.
</p><p>
Выбор альтернативной линии прерываний IRQ затруднён, так как большинство из них уже занято. В следующей таблице приведён список назначенных линий прерываний IRQ "стандартных для MS-DOS":
</p><p>
</p><pre><dl compact=""><dt></dt><dd>IRQ 3: COM2
IRQ 4: COM1
IRQ 5: LPT2
IRQ 7: LPT1
</dd></dl>
</pre>

<p>
Большинство людей находят, что IRQ 5 это хороший выбор, предполагая, что только один параллельный порт компьютера будет задействован. Другой хороший вариант это IRQ 2 (он же IRQ 9); несмотря на то, что эта линия IRQ иногда используется сетевой картой, и реже бывает, что карта VGA сконфигурирована на использование IRQ 2 для прерываний вертикальной развёртки.
Если ваша карта VGA настроена именно так, попробуйте отключить это, и тогда вы сможете присвоить эту линию IRQ другой карте. В Linux и большинстве других операционных систем в этом нет необходимости.
</p><p>
Пожалуй, только линии прерываний IRQ 3, 4, и 7 используются последовательными и параллельными портами. (Если ваша последовательная карта имеет 16-битный коннектор, и поддерживает высокие номера прерываний, то также будут доступны IRQ 10, 11, 12, и 15.)
</p><p>
На машинах класса AT, линия IRQ 2 представляется как IRQ 9, и Linux так и будет её интерпретировать.
</p><p>
Иные линии прерываний IRQ, кроме 2 (9), 3, 4, 5, 7, 10, 11, 12, и 15,
<i>не</i>

должны использоваться, так как присвоены другим аппаратным средствам и, в общем случае, не могут быть изменены. "Стандартно" аппаратные прерывания распределены следующим образом:
</p><p>
</p><pre><dl compact=""><dt></dt><dd>IRQ  0      Прерывания от таймера
IRQ  1      Прерывания от клавиатуры
IRQ  2      Связь со вторым контроллером прерываний (каскадное прерывание)
IRQ  3      Последовательный порт 2
IRQ  4      Последовательный 1
IRQ  5      Параллельный порт 2 или звуковая карта (в PS/2 свободно)
IRQ  6      Контроллер дисковода
IRQ  7      Параллельный порт 1
IRQ  8      Текущее время
IRQ  9      Свободно или сетевая карта, иногда переназначено на IRQ2
IRQ 10      Свободно
IRQ 11      Свободно, SCSI адаптер или поддержка IRQ для управления PCI 
IRQ 12      Свободно или порт мыши Bus Mouse
IRQ 13      Математический сопроцессор
IRQ 14      Контроллер дисковых накопителей (первичный IDE)
IRQ 15      Контроллер дисковых накопителей (вторичный IDE) или свободно 
</dd></dl>
</pre>

<p>
<a name="lbAH">&nbsp;</a>
</p><h2>НАСТРОЙКА МНОГОПОРТОВЫХ ПЛАТ</h2>

<p>
Некоторые многопортовые последовательные платы разделяют одну линию прерываний IRQ между одним или несколькими портами, обнаруживая ожидает или нет обслуживания любой из портов.
Если многопортовая плата поддерживает эти порты, то вам следует использовать их, во избежании появления запертых устройств в случае потери прерывания.
</p><p>
Для настройки этих портов укажите параметр
<b>set_multiport</b>

и следующие за ним значения параметров множества портов. Параметры множества портов указываются в формате:
<i>port</i>(порт)

который будет проверен,
<i>mask</i>(маска)

которая указывает на значимые в регистре биты, и наконец, параметр 
<i>match</i>(сопоставление),

определяющий значимые в регистре биты, которые должны быть тождественны в случае отсутствия незавершённых заданий.
</p><p>
Может быть определено до четырёх комбинаций port/mask/match. Первая из этих комбинаций, должна быть определена параметрами
<b>port1</b>,

<b>mask1</b>,

и
<b>match1</b>.

Вторая комбинация задаётся указанием
<b>port2</b>,

<b>mask2</b>,

и
<b>match2</b>,

и так далее. Для отключения этой проверки множества портов, значение
<b>port1</b>

следует установить в ноль.
</p><p>
Для просмотра многопортовых настроек, в вызове команды setserial укажите параметр
<b>get_multiport</b>.

</p><p>
Далее приведены обычно используемые настройки для некоторых последовательных плат:
</p><p>
</p><pre><dl compact=""><dt></dt><dd>AST FourPort    port1 0x1BF mask1 0xf match1 0xf

Boca BB-1004/8  port1 0x107 mask1 0xff match1 0

Boca BB-2016    port1 0x107 mask1 0xff match1 0 
                port2 0x147 mask2 0xff match2 0
</dd></dl>
</pre>

<p>
<a name="lbAI">&nbsp;</a>
</p><h2>Конфигурирование Hayes ESP</h2>

Также
<b>setserial</b>

может быть использована для настройки последовательной платы Hayes ESP.
<p>

Нижеперечисленные параметры используются для настройки последовательных портов ESP:
</p><dl compact="">
<dt><b>rx_trigger</b>

</dt><dd>
Уровень триггера (в байтах) FIFO-приёмника. Следствием установки большего значения, может быть уменьшение количества прерываний и следовательно повышение производительности; тем не менее, слишком большое значение может привести к потерям данных. Допустимые значения от 1 до 1023.
</dd><dt><b>tx_trigger</b>

</dt><dd>
Уровень триггера (в байтах) FIFO-передатчика. Следствием установки большего значения, может быть уменьшение количества прерываний и следовательно повышение производительности; тем не менее, слишком большое значение может привести к потерям данных. Допустимые значения от 1 до 1023.
</dd><dt><b>flow_off</b>

</dt><dd>
Уровень (в байтах), на котором порт ESP "отключит поток" от удалённого передатчика (т.е., сообщит ему о прекращении отправки байтов). Допустимые значения от 1 до 1023. Это значение должно быть больше уровня триггера приёмника и уровня "flow on (включить поток)".
</dd><dt><b>flow_on</b>

</dt><dd>
Уровень (в байтах), на котором порт ESP "включит поток" от удалённого передатчика (т.е., сообщит ему о продолжении отправки байтов). Допустимые значения от 1 до 1023. Это значение должно быть меньше уровня "flow off (отключить поток)", но больше уровня триггера приёмника.
</dd><dt><b>rx_timeout</b>

</dt><dd>
Период времени ожидания портом ESP, после получения последнего символа, перед вызовом прерывания. Параметр может принимать значение от 0 до 255. Слишком высокое значение увеличит время реакции, а слишком низкое повлечёт излишние прерывания.
<p>
</p></dd></dl>
<a name="lbAJ">&nbsp;</a>
<h2>ПРЕДОСТЕРЕЖЕНИЕ</h2>

ПРЕДОСТЕРЕЖЕНИЕ: Настройка последовательного порта для использования неверного базового адреса ввода/вывода может запереть вашу машину.
<a name="lbAK">&nbsp;</a>
<h2>FILES</h2>

<b>/etc/rc.local</b>

<b>/etc/rc.serial</b>

<a name="lbAL">&nbsp;</a>
<h2>СМ. ТАКЖЕ</h2>

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=tty&amp;category=4">tty</a></b>(4),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=ttys&amp;category=4">ttys</a></b>(4),

kernel/chr_drv/serial.c
<a name="lbAM">&nbsp;</a>
<h2>АВТОР</h2>

Оригинальная версия setserial была написана Риком Сладким (Rick Sladkey)
(<a href="mailto:jrs@world.std.com">jrs@world.std.com</a>), изменения были внесены Майклом К. Джонсоном (Michael K. Johnson)
(<a href="mailto:johnsonm@stolaf.edu">johnsonm@stolaf.edu</a>).
<p>
Эта версия была переписана "с нуля" Тэодором Ц'о (Theodore Ts'o)
(<a href="mailto:tytso@mit.edu">tytso@mit.edu</a>) 1/1/93. Исключительная ответственность за любые ошибки и проблемы лежит на нём.
<a name="lbAN">&nbsp;</a>
</p><h2>БЛАГОДАРНОСТИ</h2>

В процессе перевода сильно помогли главы 9 и 10 книги Михаила Гука "Аппаратные средства IBM PC. Энциклопедия". С большой признательностью, в часть "КОНФИГУРИРОВАНИЕ ПОСЛЕДОВАТЕЛЬНЫХ ПОРТОВ" включены почти дословно пара предложений из раздела 9.2.7 той же книги.
<a name="lbAO">&nbsp;</a>
<h2>ПЕРЕВОД</h2>

Василий Коломеец (Vasily Kolomeets) &lt;<a href="mailto:boojuman@gmail.com">boojuman@gmail.com</a>&gt;
<p>

</p><hr>
<a name="index">&nbsp;</a><h2>Index</h2>
<dl>
<dt><a href="#lbAB">НАЗВАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAC">СИНТАКСИС</a></dt><dd>
</dd><dt><a href="#lbAD">ОПИСАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAE">ОПЦИИ</a></dt><dd>
</dd><dt><a href="#lbAF">ПАРАМЕТРЫ</a></dt><dd>
</dd><dt><a href="#lbAG">КОНФИГУРИРОВАНИЕ ПОСЛЕДОВАТЕЛЬНЫХ ПОРТОВ</a></dt><dd>
</dd><dt><a href="#lbAH">НАСТРОЙКА МНОГОПОРТОВЫХ ПЛАТ</a></dt><dd>
</dd><dt><a href="#lbAI">Конфигурирование Hayes ESP</a></dt><dd>
</dd><dt><a href="#lbAJ">ПРЕДОСТЕРЕЖЕНИЕ</a></dt><dd>
</dd><dt><a href="#lbAK">FILES</a></dt><dd>
</dd><dt><a href="#lbAL">СМ. ТАКЖЕ</a></dt><dd>
</dd><dt><a href="#lbAM">АВТОР</a></dt><dd>
</dd><dt><a href="#lbAN">БЛАГОДАРНОСТИ</a></dt><dd>
</dd><dt><a href="#lbAO">ПЕРЕВОД</a></dt><dd>
</dd></dl>
<hr>
<br>
<form method="get" action="/search.shtml">
<font size="-1">
<font color="#555555">Поиск по тексту MAN-ов:&nbsp;</font><input size="30" name="words" value="setserial" type="text">
<input name="restrict" value="/man" type="hidden">
<input value="Найти" type="submit">
</font>
<input name="method" value="and" type="hidden">
<input name="format" value="builtin-long" type="hidden">
<input name="sort" value="score" type="hidden">
</form>
<br>
<!--htdig_noindex-->
<noindex>
<br>


</noindex>
<!--/htdig_noindex-->


<!-- footer -->
<!--htdig_noindex-->
<br><br>
<div style="background-color: #E9EAD6; width:100%; height: 61px;">
<div style="margin-right: 20px; float:left; line-height: 61px; vertical-align: middle; margin-left: 10px; font-size: 120%;">
Спонсоры:
</div>
<div style="float:left; height: 60px;  line-height: 60px; margin-left: 20px;">
<a style="align: middle;" target="_blank" href="https://inferno.name/"><img src="/img/inferno2.png" alt="Inferno Solutions" height="57" width="200"></a>
</div>
<div style="float:right; height: 60px;  line-height: 60px;  margin-left: 15px;">
<a style="align: middle;" target="_blank" href="http://hoster.ru/?utm_source=site&amp;utm_medium=banner&amp;utm_campaign=opennet"><img src="/img/dh143x60t.png" alt="Hosting by Hoster.ru" height="60" width="143"></a>
</div>
<div style="float:right;  height: 60px;  line-height: 60px; vertical-align: middle;font-size: 120%;">
Хостинг:
</div>

</div>

<div style="clear: both;"></div>


<br>
<table class="ttxt" style="border-top: 3px solid #C9CaB6;">
<tbody><tr><td width="35%">
<a href="/cgi-bin/opennet/bookmark.cgi">Закладки на сайте</a><br>
<a href="/cgi-bin/opennet/bookmark.cgi?submit=add" target="blank_">Проследить за страницей</a>
</td>
<td align="RIGHT" width="65%">
Created&nbsp;1996-2021&nbsp;by <b><a href="/contact.shtml" title="email maxim.chirkov@gmail.com">Maxim&nbsp;Chirkov</a></b><br>
<a href="https://www.opennet.ru/add.shtml">Добавить</a>, <a href="https://www.opennet.ru/donate.shtml" style="color: #C00000;">Поддержать</a>, <a href="https://www.opennet.ru/banners2.shtml">Вебмастеру</a>
</td>
</tr>
</tbody></table>
<br><br>


<!--/htdig_noindex-->
<!-- end of footer -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-123449-1', 'auto');
    ga('send', 'pageview');
</script>




</body>
<!---------------------------------------------  0  ---------------------------------------------->
