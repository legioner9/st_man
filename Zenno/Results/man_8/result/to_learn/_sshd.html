
<!--+++++++++++++++++++++++++++++++++++++++++++  0  +++++++++++++++++++++++++++++++++++++++++++--->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Проект OpenNet: MAN sshd (8) Команды системного администрирования (FreeBSD и Linux)</title><meta name="KeyWords" content="man, manual, MAN, системное руководство, linux, FreeBSD, OpenBSD, Solaris, ядро, программы, системный вызов, sshd"><meta name="viewport" content="width=device-width, initial-scale=1"></head>


<body link="#0000FF" vlink="#000080" text="#000000" bgcolor="#E3E4D0" alink="#FF00FF">
<link rel="stylesheet" href="/opennet4.css" type="text/css">
<!--htdig_noindex-->
<form method="get" action="https://www.opennet.ru/search.shtml">
<aside>
<div style="width: 100%; text-align: right; font-size: 70%; background: #E9EAD6; margin-bottom:-10px;">
Профиль: <b><a href="/~" rel="nofollow" title="/~ - сводная страница участника"><u>Аноним</u></a></b> (<a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=login">вход</a> | <a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=user_register">регистрация</a>)</div>

<table cellspacing="0" cellpadding="0" width="100%" border="0">
<tbody><tr>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" valign="BOTTOM" bgcolor="#E9EAD6" width="300">
<a href="https://www.opennet.ru/"><img src="/opennet2.gif" alt="The OpenNET Project" height="60" width="249" border="0"></a><br>
</td>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" bgcolor="#E9EAD6" align="CENTER" width="100">

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:10px;" bgcolor="#E9EAD6" align="CENTER" width="50%">
<table width="100%" border="0">
<tbody><tr>
<td width="22%">
 <a href="https://www.opennet.ru/opennews/" class="h"><b>НОВОСТИ</b></a> (<a href="https://www.opennet.ru/news/opennet.shtml" class="h">+</a>)
</td><td width="18%%">
  <a href="https://www.opennet.ru/mp/" class="h"><b>КОНТЕНТ</b></a>
</td><td width="14%">
  <a href="http://wiki.opennet.ru" class="h"><b>WIKI</b></a>
</td><td width="14%">
   <a href="https://www.opennet.ru/man.shtml" class="h"><b>MAN'ы</b></a>
</td><td width="16%">
   <a href="https://www.opennet.ru/forum/" class="h"><b>ФОРУМ</b></a>
</td><td width="16%">
<a href="https://www.opennet.ru/search.shtml" class="h" onmouseover="document.getElementById('form12').style.display='block';">Поиск</a>&nbsp;(<a href="https://www.opennet.ru/keywords/" class="h">теги</a>)
<input id="form12" style="display: none;" size="10" name="words" value="" title="для поиска в google наберите &quot;g фраза&quot;" type="text">
</td></tr>
</tbody></table>

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:5px;" bgcolor="#E9EAD6" align="right" width="20%">

<a href="https://www.opennet.ru/opennews/opennews_all_utf.rss"><img src="/img/rss.png" alt="RSS" title="RSS" height="16" width="16" border="0"></a>&nbsp;<a href="https://twitter.com/opennetru"><img src="/twitter.png" alt="twitter" title="Twitter" height="16" width="16" border="0"></a>&nbsp;<a href="https://vk.com/opennet"><img src="/img/vkontakte.gif" title="ВКонтакте" height="16" width="16" border="0"></a>&nbsp;<a href="https://zen.yandex.ru/opennet"><img src="/img/zen.gif" title="Yandex Zen" height="16" width="16" border="0"></a>&nbsp;<a href="https://www.facebook.com/OpenNet.News/"><img src="/img/facebook.gif" title="Facebook" height="16" width="16" border="0"></a>&nbsp;<a href="https://telegram.space/opennet_ru"><img src="/img/telegram2.png" title="Telegram" height="16" width="16" border="0"></a>
</td></tr></tbody></table>
</aside>

<style>
    .hdr_mobile {
	text-align: center; 
	display: none;
	margin: 0px;
	padding: 0px;
    }
</style>
<div class="hdr_mobile">
<div style="margin-left: auto; margin-right: auto; width: 100%; height: 70px; border:1px solid #b0b190; min-width: 360px; max-width: 600px; background: #E9EAD6 url('/back.gif') repeat-x bottom left;">
<div style="float:left; width: 249px; height: 60px; margin-top: 10px;">
<a href="https://www.opennet.ru"><img src="/opennet2_lite.gif" style="height: 60px; width: 249px; border: 1px;" alt="The OpenNET Project / Index page"></a>
</div>
<div style="float: left; text-align: center; height: 70px; width: 331px; padding: 5px; margin-left: 10px;">
<br><small>[ <a href="/opennews/">новости</a>&nbsp;/<a href="/opennews/?full_lines=15&amp;lines=15&amp;mid_lines=00">+++</a> | <a href="/forum/">форум</a> | <a href="http://wiki.opennet.ru">wiki</a> | <a href="/keywords/">теги</a>
| <a href="tg://resolve?domain=opennet_ru"><img src="/img/telegram2.png" title="Telegram" style="margin-bottom: -4px;" height="16" width="16" border="0"></a>
]</small>
</div>
</div>
</div>
<div style="clear: both;"></div>


<div style="float: left; width: 279; text-align: left;padding-right: 60px;" id="adv">
</div>
<div style="padding-top: 0px;position:absolute;left:50%;margin-left:-235px;width:470px;" id="adv2">
</div>
<div style="width: 279;float: right;" id="adv3">
</div>
<div style="clear: both;"></div>
<br>
</form>
<!--/htdig_noindex-->

<center><h3><font color="#000088">Интерактивная система просмотра системных руководств (man-ов)</font></h3></center>
<form method="GET" action="/man.shtml"> 
<table cellspacing="0" cellpadding="1" bgcolor="#B0B190" align="center" width="600" border="0">
<tbody><tr>
<td valign="TOP">

<table cellspacing="0" cellpadding="0" bgcolor="#E9EAD6" align="center" width="100%" border="0">
<tbody><tr><td>&nbsp;<font color="#555555">Тема</font></td><td><font color="#555555">Набор</font></td><td><font color="#555555">Категория</font></td><td>&nbsp;</td></tr>
<tr><td>

&nbsp;<input size="20" name="topic" value="sshd" type="text"></td><td><select name="russian">
<option value="4">Solaris man
</option><option value="1">FreeBSD man
</option><option value="3">Разные man
</option><option value="0" selected="">Русские man
</option><option value="2">Linux man
</option><option value="5">POSIX man
</option></select></td>
<td><select size="1" name="category">
	  <option value="" selected="">All
	  </option><option value="1">1
	  </option><option value="2">2
	  </option><option value="3">3
	  </option><option value="4">4
	  </option><option value="5">5
	  </option><option value="6">6
	  </option><option value="7">7
	  </option><option value="8">8
	  </option><option value="9">9
</option></select></td>

<td><input name="submit" value="Показать man" type="submit"></td></tr>
<script async="" src="https://www.google-analytics.com/analytics.js"></script><script language="JavaScript" src="/print.js"></script>
<tr><td colspan="4" align="left">&nbsp;[<a href="/man.shtml">Cписок руководств</a> | <a href="#" onclick="pr('none');">Печать</a>]</td></tr>
</tbody></table>
</td></tr></tbody></table>
</form>
<h3></h3><font size="+2">sshd (8)</font><hr><li> <a href="/man.shtml?topic=sshd&amp;category=1&amp;russian=4"><u>sshd</u></a> (1) <font color="#555555"> ( Solaris man: Команды и прикладные программы пользовательского уровня )</font></li><li> <a href="/man.shtml?topic=sshd&amp;category=8&amp;russian=4"><u>sshd</u></a> (8) <font color="#555555"> ( Solaris man: Команды системного администрирования )</font></li><li> <a href="/man.shtml?topic=sshd&amp;category=8&amp;russian=1"><u>sshd</u></a> (8) <font color="#555555"> ( FreeBSD man: Команды системного администрирования )</font></li><li>&gt;&gt; <a href="/man.shtml?topic=sshd&amp;category=8&amp;russian=0"><u>sshd</u></a> (8) <font color="#555555"> ( Русские man: Команды системного администрирования )</font></li><li> <a href="/man.shtml?topic=sshd&amp;category=8&amp;russian=2"><u>sshd</u></a> (8) <font color="#555555"> ( Linux man: Команды системного администрирования )</font></li>
<a name="lbAB">&nbsp;</a>
<h2>НАЗВАНИЕ</h2>

<b>sshd</b> - OpenSSH SSH демон
<a name="lbAC">&nbsp;</a>
<h2>СИНТАКСИС</h2>

<b>sshd</b>
[<b>-deiqtDL46</b>] [<b>-b</b> <i>битов</i>] [<b>-f</b> <i>файл_конфигурации</i>] [<b>-g</b> <i>время_задержки_регистрации</i>] [<b>-h</b> <i>файл_ключа_машины</i>] [<b>-k</b> <i>время_генерации_ключа</i>] [<b>-p</b> <i>порт</i>] [<b>-u</b> <i>величина</i>] [<b>-V</b> <i>идентификатор_протокола_клиента</i>]
<a name="lbAD">&nbsp;</a>
<h2>ОПИСАНИЕ</h2>

<a name="lbAE">&nbsp;</a>
<h2>DESCRIPTION</h2>

<b>sshd</b> (SSH Daemon) это программа-демон для <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=ssh&amp;category=1">ssh</a>(1). Вместе эти программы заменяют rlogin и rsh и предоставляют защищенную и зашифрованную связь между двумя не доверенными компьютерами через незащищенную сеть. Установка и использование программ упрощены настолько, насколько это возможно.
<p>

<b>sshd</b> это демон, который ожидает соединения от клиентов. Обычно он запускается при загрузке системы из <i>/etc/rc</i>. Он создает нового демона для каждого нового соединения. Ответвленный демон обрабатывает обмен ключами, шифрование, аутентификацию, выполнение команд и обмен данными. Эта реализация <b>sshd</b> поддерживает обе версии протокола SSH, 1 и 2, одновременно. <b>sshd</b> работает следующим образом.
</p><p>

<a name="lbAF">&nbsp;</a>
</p><h3>Протокол SSH веосии 1</h3>

<p>

Каждая машина имеет машино-зависимый ключ RSA (обычно 1024 битный) используемый для идентификации компьютера. Дополнительно, когда стартует демон, он генерирует RSA ключ сервера (обычно 768 битный). Этот ключ, обычно, регенерируется каждый час, если он был использован, и никогда не сохраняется на диске.
</p><p>

Каждый раз, когда соединяется клиент, демон отвечает со своими публичными ключами машины и сервера. Клиент сравнивает RSA ключ машины со своей базой данных, что бы убедиться, что ключ не был изменен. Затем клиент генерирует 256-битное произвольное число. Это произвольное число шифруется, при помощи обоих (машины и сервера) ключей, и отправляется в зашифрованном виде серверу. Затем обе стороны используют это произвольное число как ключ сеанса, который используется для шифрации всей дальнейшей связи в течении сеанса. Остальная часть сеанса шифруется с использованием обычного шифра, Blowfish или 3DES. В настоящее время по умолчанию используется 3DES. Клиент выбирает алгоритм шифрации из предложенных сервером вариантов.
</p><p>

Затем, сервер и клиент переходят в диалог аутентификации. Клиент пытается идентифицировать себя, с использованием <i>.rhosts</i> аутентификации, <i>.rhosts</i> аутентификации комбинированной с RSA аутентификацией машины, RSA аутентификацией запроса-ответа, или аутентификацией с паролем.
</p><p>

Rhosts аутентификация обычно отключена, так как она абсолютно небезопасна, но может быть задействована, при желании, в файле конфигурации сервера. Защита системы не совершенна, если не задействованы <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=rshd&amp;category=8">rshd</a>(8), <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=rlogind&amp;category=8">rlogind</a>(8), <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=rexecd&amp;category=8">rexecd</a>(8) и <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=rexd&amp;category=8">rexd</a>(8) (это полностью отключает на машине <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=rlogin&amp;category=1">rlogin</a>(1) и <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=rsh&amp;category=1">rsh</a>(1)).
</p><p>

<a name="lbAG">&nbsp;</a>
</p><h3>Протокол SSH версии 2</h3>

<p>

Версия 2 работает похоже: Каждый компьютер имеет машино-зависимый DSA-ключ используемый для идентификации машины. Однако, при старте демона он не генерирует ключ сервера. Первичная защита обеспечивается посредством соглашения ключа Diffie-Hellman. Это соглашение ключа заключается в разделяемом ключе сеанса.
</p><p>

Остальная часть сеанса шифруется при помощи симметричного шифра. В настоящий момент это 128-ми битный AES, Blowfish, 3DES, CAST128, Arcfour, 192-х битный AES или 256-ти битный AES. Клиент для использования выбирает алгоритмы шифрования из предложенных сервером. Дополнительно, целостность сеанса обеспечивается через криптографическое сообщение кода аутентификации (hmac-sha1 или hmac-md5).
</p><p>

Протокол версии 2 обеспечивает метод аутентификации пользователя, основанный на методе публичного ключа (PubkeyAuthentication) или методе аутентификации машины-клиента (HostbasedAuthentication), обычной аутентификации паролем и по принципу запрос - ответ.
</p><p>

<a name="lbAH">&nbsp;</a>
</p><h3>Выполнение команд и перенаправление данных</h3>

<p>

Если клиент аутентифицировал себя удачно, то будет выведен диалог для подготовки сеанса. В этот момент клиент может запросить такие вещи как назначение псевдо-терминала, перенаправление соединения Х11, перенаправление TCP/IP соединения или перенаправление соединения агента аутентификации через защищенный канал.
</p><p>

Наконец, клиент запрашивает оболочку или выполнение команды. Затем стороны входят в режим сеанса. В этом режиме, каждая из сторон в любой момент может пересылать данные и эти данные будут переданы оболочке или команде на стороне сервера и на пользовательский терминал со стороны клиента.
</p><p>

Когда прекращается выполнение пользовательской программы и все перенаправленные Х11 и другие соединения закрыты, сервер посылает клиенту команду со статусом выхода и обе стороны завершают сеанс.
</p><p>

<b>sshd</b> может быть сконфигурирован при помощи командной строки или файла конфигурации. Параметры командной строки переопределяют значения указанные в файле конфигурации.
</p><p>

При получении сигнала отбоя SIGHUP, <b>sshd</b> перечитывает свой файл конфигурации путём запуска собственной копии с тем же самым именем с которым был запущен, например, /usr/sbin/sshd.
<a name="lbAI">&nbsp;</a>
</p><h2>ПАРАМЕТРЫ</h2>

Используются следующие параметры:
<dl compact="">
<dt><b>-b</b> <i>биты</i></dt><dd>
Определяет число бит в ключе сервера эфемерного протокола версии 1 (по умолчанию 768).
</dd><dt><b>-d</b></dt><dd>
Режим отладки. Сервер посылает отладочную информацию в файл регистрации событий системы и не переходит в фоновый режим работы. Также сервер не создает дочерних процессов и обрабатывает только одно соединение. Этот параметр предназначен только для настройки сервера. Несколько параметров -d, указанных один за другим, повышают уровень отладки. Максимум это 3.
</dd><dt><b>-е</b></dt><dd>
Если указан этот параметр, <b>sshd</b> направит вывод в консоль вместо механизма регистрации событий системы. 
</dd><dt><b>-f</b> <i>файл_конфигурации</i></dt><dd>
Определяет имя файла конфигурации. По умолчанию это <i>/etc/openssh/sshd_config</i>.
<b>sshd</b> отказывается работать не имея файла конфигурации.
</dd><dt><b>-g</b> <i>время_задержки_регистрации</i></dt><dd>
Позволяет клиенту растянуть время в течении которого клиент должен себя аутентифицировать (по умолчанию 600 секунд). Если клиент не смог аутентифицировать себя в течение этого времени, сервер отключается. Значение равное нулю означает неограниченное время ожидания.
</dd><dt><b>-h</b> <i>файл_ключа_машины</i></dt><dd>
Определяет файл, из которого будет считан ключ машины (по умолчанию это <i>/etc/openssh/ssh_host_key</i>). Этот параметр должен быть указан, если <b>sshd</b> запущен не от имени суперпользователя (так как обычно файл машины доступен для чтения только суперпользователю (root)). Существует вероятность иметь несколько ключей машины для разных версий протокола и разных алгоритмов ключей.
</dd><dt><b>-i</b></dt><dd>
Определяет, что <b>sshd</b> должен быть запущен из inetd. Обычно <b>sshd</b> не запускается из inetd, так как требуется генерировать ключ сервера до ответа клиенту, а это может отнять десятки секунд. Клиент будет вынужден ожидать слишком долго, если ключ будет регенерирован каждый раз. Однако, при малых размерах ключа (т.е., 512), использование <b>sshd</b> из inetd может быть оправдано.
</dd><dt><b>-k</b> <i>время_генерации_ключа</i></dt><dd>
Определяет, как часто будет регенерирован ключ сервера эфемерного протокола версии 1  (по умолчанию 3600 секунд, или один раз в час). Мотивацией для регенерации ключа так часто служит то, что ключ нигде не сохраняется и, по истечении примерно часа, восстановить ключ для прерванных соединений становится невозможно даже если машина была взломана или захвачена физически. Значение ноль означает, что ключ никогда не будет регенерирован.
</dd><dt><b>-p</b> <i>порт</i></dt><dd>
Определяет порт, на котором сервер будет ожидать соединения (по умолчанию 22).
</dd><dt><b>-q</b></dt><dd>
Режим молчания. В системный журнал регистрации событий не будет занесено никакой информации. Обычно фиксируется подключение, аутентификация и разрыв каждого соединения.
</dd><dt><b>-t</b></dt><dd>
Режим тестирования. Только проверяет соответствие файла конфигурации и безопасность ключей. Это полезно для проверки обновления <b>sshd</b>, если файлы конфигурации были изменены.
</dd><dt><b>-u</b> <i>величина</i></dt><dd>
Этот параметр определяет размер полей в структуре utmp хранящей имя удаленной машины. Если определенное имя машины превышает значение <i>величина</i>, то взамен будет использовано точечное десятичное значение. Это позволяет машинам имеющим слишком длинные имена вызывающие переполнение этого поля быть идентифицированными. Указание <b>-u0</b> означает, что в utmp-файл должен быть помещен только точечный десятичный адрес.
</dd><dt><b>-D</b></dt><dd>
Когда указан этот параметр, <b>sshd</b> не будет переведен в режим работы демона. Это позволит осуществлять более легкий мониторинг <b>sshd</b>.
</dd><dt><b>-V</b> <i>идентификатор_протокола_клиента</i></dt><dd>
SSH-2 совместимый режим. Если указан этот параметр, <b>sshd</b> подразумевает, что клиент послал опознавательную строку поддерживаемой версии и пропустил Обмен Идентификатором Версии Протокола (Protocol Version Identification Exchange). Этот параметр не предусматривает прямой вызов.
</dd><dt><b>-4</b></dt><dd>
Принуждает <b>sshd</b> использовать только IPv4 адреса.
</dd><dt><b>-6</b></dt><dd>
Принуждает <b>sshd</b> использовать только IPv6 адреса.
</dd></dl>
<a name="lbAJ">&nbsp;</a>
<h2>ФАЙЛ КОНФИГУРАЦИИ</h2>

<b>sshd</b> считывает данные о конфигурации из <i>/etc/openssh/sshd_config</i> (или из файла указанного в командной строке при помощи параметра <b>-f</b>). Файл содержит пары ключевое слово - значение, по одному на строку. Строки, начинающиеся с `#' и пустые строки, интерпретируются как комментарии.
<p>

Допустимы следующие ключевые слова.
</p><dl compact="">
<dt><b>AFSTokenPassing</b></dt><dd>
Определяет, может ли AFS быть переадресован серверу. По умолчанию стоит ``yes''.
</dd><dt><b>AllowGroups</b></dt><dd>
Это ключевое слово может следовать за списком группы имен разделенных пробелами. Если указано, регистрация в системе разрешается только пользователям, чья главная или вспомогательная группы соответствуют какому-либо из шаблонов. ``*'' и ``?'' могут быть использованы как символы подстановки в шаблонах. Допустимы только имена групп; числовой идентификатор группы не распознается. По умолчанию разрешена регистрация в системе независимо от списка группы.
</dd></dl>
<p>

</p><dl compact="">
<dt><b>AllowTcpForwarding</b></dt><dd>
Определяет, будет ли разрешено перенаправление TCP. По умолчанию ``yes''. Имейте ввиду, что отключение пересылки TCP не увеличит безопасность пока пользователям не запрещен доступ к командной оболочке, так как они всегда могут установить свои собственные перенаправления.
</dd></dl>
<p>

</p><dl compact="">
<dt><b>AllowUsers</b></dt><dd>
После этого ключевого слова может следовать разделённый пробелами список имен пользователей. Если определено, регистрация в системе разрешена только пользователям, чьи имена соответствуют одному из шаблонов. ``*'' и ``?'' могут быть использованы как символы подстановки в шаблонах. Допустимы только имена пользователей; числовой идентификатор пользователя не распознается. По умолчанию разрешена регистрация в системе независимо от имени пользователя.
</dd></dl>
<p>

</p><dl compact="">
<dt><b>Banner</b></dt><dd>
В некоторых местах послание предупредительного сообщения перед аутентификацией может быть уместно в целях достижения легитимности защиты. Содержимое указанного файла будет отправлено удаленному пользователю прежде, чем будет разрешена аутентификация. Этот параметр доступен только с протоколом версии 2.
</dd><dt><b>ChallengeResponseAuthentication</b></dt><dd>
Определяет, разрешается ли обратная проверка подлинности вызова. В настоящее время есть поддержка только для <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=skey&amp;category=1">skey</a>(1) аутентификации. Значение по умолчанию ``yes''.
</dd><dt><b>Ciphers</b></dt><dd>
Определяет допустимые, для протокола версии 2, шифры. Множество шифров должно быть разделено через запятую. По умолчанию это ``blowfish-cbc,aes128-cbc,3des-cbc,cast128-cbc,arcfour''.
</dd><dt><b>CheckMail</b></dt><dd>
Определяет, должен ли <b>sshd</b> проверять наличие новой почты при интерактивной регистрации в системе. По умолчанию это установлено в ``yes''.
</dd><dt><b>ClientAliveInterval</b></dt><dd>
Устанавливает время ожидания в секундах после которого, если не поступает информация со стороны клиента, <b>sshd</b> отправит через защищённый канал запрос отклика клиенту. По умолчанию используется 0, что означает, что клиенту не будет направлен такой запрос. Этот параметр применим только с протоколом версии 2.
</dd><dt><b>ClientAliveCountMax</b></dt><dd>
Устанавливает количество запросов клиенту (см.выше), которое может быть отправленно без получения <b>sshd</b> на них отклика. Если предел достигнут, <b>sshd</b> разъединится с клиентом и завершит сеанс. Имейте в виду, использование запросов client alive очень сильно отличается от <b>Keepalive</b> (см.далее). Данные запросы отправляются через защищённый канал и поэтому не могут быть подменены. Параметр TCP keepalive включаемый при помощи <b>Keepalive</b> может быть подменён. Вы захотите использовать механизм client alive, если на машинах-клиентах подключаемых к серверу имеется что-то важное.
</dd></dl>
<p>

Значение по умолчанию - 3. Если вы установите значение интервала <b>ClientAliveInterval</b> (см.выше) равным 15 и оставите этот параметр без изменений, то не отвечающие ssh-клиенты будут отключены примерно через 45 секунд.
</p><dl compact="">
<dt><b>DenyGroups</b></dt><dd>
Это ключевое слово может следовать после списка имен групп разделенных пробелами. Если указано, регистрация в системе пользователям, чья главная или вспомогательная группа соответствуют содержащимся в списке шаблонам, не разрешается. ``*'' и ``?'' могут быть использованы как символы подстановки в шаблонах. Допустимы только имена групп; числовой идентификатор группы не распознается. По умолчанию разрешена регистрация в системе независимо от списка группы.
</dd></dl>
<p>

</p><dl compact="">
<dt><b>DenyUsers</b></dt><dd>
Это ключевое слово может следовать после списка имен пользователей, разделенных пробелами. Если указано, регистрация в системе пользователям, чьи имена пользователей соответствуют содержащимся в списке шаблонам, не разрешается. ``*'' и ``?'' могут быть использованы как символы подстановки в шаблонах. Допустимы только имена пользователей; числовой идентификатор пользователя не распознается. По умолчанию разрешена регистрация в системе независимо от имени пользователя.
</dd><dt><b>GatewayPorts</b></dt><dd>
Определяет, позволено ли удаленным машинам подключение к портам, перенаправленным для клиента. Параметр должен быть ``yes'' или ``no''. По умолчанию ``no''.
</dd><dt><b>HostbasedAuthentication</b></dt><dd>
Указывает, разрешен ли rhosts или аутентификация /etc/hosts.equiv в сочетании с успешной аутентификацией посредством аутентификации с открытым ключём машины-клиента (по-машинная аутентификация). Этот параметр схож с <b>RhostsRSAAuthentication</b> и применим только к протоколу версии 2. По умолчанию ``no''.
</dd><dt><b>HostKey</b></dt><dd>
Указывает файл содержащий приватные ключи машины (по умолчанию <i>/etc/openssh/ssh_host_key</i>) используемые для протоколов SSH версии 1 и 2.
Имейте ввиду, что <b>sshd</b> будет отвергать использование этого файла, если он доступен группе/всем для чтения. Это позволяет иметь несколько файлов с ключами машины. Ключи ``rsa1'' используются для версии 1, и ``dsa'' или ``rsa'' для версии 2 протокола SSH.
</dd><dt><b>IgnoreRhosts</b></dt><dd>
Указывает, что файлы <i>.rhosts</i> и <i>.shosts</i> не должны использоваться при <b>RhostsAuthentication</b>, <b>RhostsRSAAuthentication</b> или <b>HostbasedAuthentication</b>.
</dd></dl>
<p>

<i>/etc/hosts.equiv</i> и <i>/etc/openssh/shosts.equiv</i> при этом по прежнему используются. Значение по умолчанию ``yes''.
</p><dl compact="">
<dt><b>IgnoreUserKnownHosts</b></dt><dd>
Указывает, будет ли <b>sshd</b> игнорировать пользовательский <i>$HOME/.ssh/known_hosts</i> в процессе <b>RhostsRSAAuthentication</b> или <b>HostbasedAuthentication</b>. По умолчанию ``no''.
</dd><dt><b>KeepAlive</b></dt><dd>
Указывает, будет ли система посылать другой стороне контрольные сообщения для удержания соединения активным. Если они посылаются, то разрыв соединения или аварийный отказ одной из машин будет должным образом замечен. Однако, при этом временная потеря маршрута повлечет за собой разрыв соединения и некоторые люди сочтут это раздражающим. С другой стороны, если контрольные сообщения не посланы, сеанс на сервере может зависнуть, оставив после себя ``пользователей-привидений'' и отнимая ресурсы сервера.
</dd></dl>
<p>

По умолчанию это значение ``yes'' (для отправки контрольных сообщений) и сервер будет уведомлен, если сеть не функционирует или клиент перезагружается. Это позволит избежать постоянных зависаний сервера.
</p><p>

Для отключения контрольных сообщений в файлах конфигурации сервера и клиента должно быть установлено значение ``no''.
</p><dl compact="">
<dt><b>KerberosAuthentication</b></dt><dd>
Определяет, дозволена ли аутентификация Kerberos. Это может быть либо в форме тикетов Kerberos или, если <b>PasswordAuthentication</b> установлена в ``yes'', пароль, предоставленный пользователем, будет утвержден через Kerberos KDC. Для использования этого параметра серверу необходима Kerberos servtab, которая разрешит проверку идентификации KDC. Значение по умолчанию ``yes''.
</dd><dt><b>KerberosOrLocalPasswd</b></dt><dd>
Если это используется и аутентификация паролем через Kerberos не удалась, тогда пароль будет проверен через любой дополнительный локальный механизм, такой как <i>/etc/passwd</i>. Значение по умолчанию ``yes''.
</dd><dt><b>KerberosTgtPassing</b></dt><dd>
Определяет, может ли быть перенаправлен Kerberos TGT к серверу. Значение по умолчанию ``no'', это работает таким образом когда Kerberos KDC - фактически AFS kaserver.
</dd><dt><b>KerberosTicketCleanup</b></dt><dd>
Определяет, уничтожать ли автоматически файл кэша тикета пользователя при отключении от системы. Значение по умолчанию ``yes''.
</dd><dt><b>KeyRegenerationInterval</b></dt><dd>
В протоколе версии 1, эфемерный ключ сервера будет автоматечески воссоздан по истечении этого количества секунд (если это используется). Цель регенерации состоит в том, чтобы предохранить шифрованные  установленные сеансы от более поздних вторжений на машину и захвата ключей. Ключ нигде не сохраняется. Если установлено значение 0, то ключ никогда не будет воссоздан. Значение по умолчанию 3600 (секунд).
</dd><dt><b>ListenAddress</b></dt><dd>
Указывает с каких локальных адресов <b>sshd</b> должен ожидать соединения. Может быт использован следующий формат записей:
</dd></dl>
<p>


<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt><b>ListenAddress</b> <i>host</i>|<i>IPv4_addr</i>|<i>IPv6_addr</i><br>
<br>

<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt><b>ListenAddress</b> <i>host</i>|<i>IPv4_addr</i>:<i>port</i><br>
<br>

<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt><b>ListenAddress</b> [<i>host</i>|<i>IPv6_addr</i>]:<i>port</i><br>

</p><p>

Если не указан порт, <b>sshd</b> ожидает соединение со всех адресов и на все указанные ранее параметры <b>Port</b>. По умолчанию ожидается соединение со всех локальных адресов. Допустимы множественные значения <b>ListenAddress</b>. Дополнительно, любые парамеры <i>Порт</i> должны предшествовать этому параметру.
</p><dl compact="">
<dt><b>LoginGraceTime</b></dt><dd>
Сервер отключается по истечении этого времени, если пользователю не удалась регистрация в системе. Если стоит значение 0, то время ожидания не ограничено. Значение по умолчанию 60 (секунд).
</dd><dt><b>LogLevel</b></dt><dd>
Задает степень многословности, который используется при регистрации сообщений от <b>sshd</b>. Допустимыми являются значения: QUIET, FATAL, ERROR, INFO, VERBOSE и DEBUG. По умолчанию используется INFO. Регистрация с уровнем DEBUG нарушает секретность пользователей и не рекомендуется.
</dd><dt><b>MACs</b></dt><dd>
Определяет допустимый алгоритм MAC (код установления подлинности сообщения). Алгоритм MAC используется в протоколе версии 2 для защиты целостности данных. Множественные алгоритмы должны быть разделены через запятую. Значение по умолчанию
</dd></dl>
<p>


<br>&nbsp;&nbsp;``hmac-md5,hmac-sha1,hmac-ripemd160,<a href="mailto:hmac-ripemd160@openssh.com">hmac-ripemd160@openssh.com</a>,
<br>&nbsp;&nbsp;&nbsp;&nbsp;hmac-sha1-96,hmac-md5-96''

</p><dl compact="">
<dt><b>MaxStartups</b></dt><dd>
Определяет максимальное число одновременных неавторизованных подключений к демону <b>sshd</b>. Дополнительные подключения будут отвергнуты до тех пор, пока не будет произведена аутентификация или не истечет <b>LoginGraceTime</b> для соединения. Значение по умолчанию 10.
</dd></dl>
<p>

Как альтернатива может быть задействован ранний произвольный сброс путем указания трех разделенных через двоеточие значений ``старт:норма:полная'' (т.е., "10:30:60").
<b>sshd</b> отвергнет соединение с вероятностью ``норма/100'' (30%) если имеется ``старт'' (10) неавторизованных соединений. Вероятность возрастает линейно и все попытки соединения будут отвергнуты при достижении числа неавторизованных соединений значения ``полная'' (60).
</p><dl compact="">
<dt><b>PAMAuthenticationViaKbdInt</b></dt><dd>
Указывает, разрешена ли обратная проверка подлинности вызова при запросе PAM-аутентификации. Это сделает возможным использование модулей аутентификации PAM, но это также позволит идентификацию паролем независимо от того, заблокирован ли <b>PasswordAuthentication</b>. Значение по умолчанию ``no''.
</dd><dt><b>PasswordAuthentication</b></dt><dd>
Указывает, разрешена ли аутентификация паролем. Значение по умолчанию ``yes''. .TP 
<b>PermitEmptyPasswords</b>
Когда разрешена аутентификация паролем, это указывает, позволяет ли сервер регистрацию в системе с пустой строкой пароля. Значение по умолчанию ``no''.
</dd><dt><b>PermitRootLogin</b></dt><dd>
Определяет, разрешена ли суперпользователю регистрация в системе с использованием <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=ssh&amp;category=1">ssh</a>(1). Параметр должен быть ``yes'', ``without-password'', ``forced-commands-only'' или ``no''. Значение по умолчанию `no''.
</dd></dl>
<p>

Если этот параметр установлен в значение ``without-password'', то аутентификация паролем для суперпользователя будет выключена.
</p><p>

Если этот параметр установлен в значение ``forced-commands-only'', то будет разрешена регистрация суперпользователя в системе с публичным ключем, но только если был указан  параметр <i>команда</i> (что может быть полезно для снятия удаленных резервных копий, даже если регистрация суперпользователя в системе обычно не разрешена). Все другие методы аутентификации для суперпользователя отключены.
</p><dl compact="">
<dt><b>PidFile</b></dt><dd>
Определяет файл, который содержит идентификатор процесса для демона <b>sshd</b>. По умолчанию это <i>/var/run/sshd.pid</i>.
</dd><dt><b>Port</b></dt><dd>
Определяет номер порта по умолчанию, на котором <b>sshd</b> ожидает соединения. По умолчанию это 22. Допустимы множественные значения для параметра этого типа. Смотри также <b>ListenAddress</b>.
</dd><dt><b>PrintLastLog</b></dt><dd>
Указывает, будет ли <b>sshd</b> выводить дату и время последнего входа пользователя в систему. По умолчанию ``yes''.
</dd><dt><b>PrintMotd</b></dt><dd>
Определяет, будет ли <b>sshd</b> выводить <i>/etc/motd</i>, когда пользователь регистрируется в системе в интерактивном режиме. (В некоторых системах это может быть также напечатано оболочкой, <i>/etc/profile</i>, или эквивалентом.) Значение по умолчанию ``yes''.
</dd><dt><b>Protocol</b></dt><dd>
Определяет версию протокола, которую должен поддерживать <b>sshd</b>. Допустимые значения ``1'' и ``2''. Множество версий должно быть перечислено через запятую. Значение по умолчанию ``2,1''.
</dd><dt><b>PubkeyAuthentication</b></dt><dd>
Определяет, дозволена ли аутентификация публичным ключем. По умолчанию ``yes''. Имейте ввиду, что это применимо только к протоколу версии 2.
</dd><dt><b>ReverseMappingCheck</b></dt><dd>
Определяет, будет ли <b>sshd</b> предпринимать попытки проверить имя удаленной машины и проверять, что полученное имя машины для удаленного IP-адреса указывает обратно на тот же IP-адрес. Значение по умолчанию ``no''.
</dd><dt><b>RhostsAuthentication</b></dt><dd>
Определяет, является ли использование rhosth или /etc/hosts.equiv достаточным для аутентификации. Обычно, этот метод не должен быть разрешен, так как он небезопасен. Вместо этого должна быть использована <b>RhostsRSAAuthentication</b>, так как это осуществляет RSA-базирующуюся аутентификацию машины в дополнение к нормальной rhosts или /etc/hosts.equiv аутентификации. Значение по умолчанию ``no''. Этот параметр применим к протоколу версии 1.
</dd><dt><b>RhostsRSAAuthentication</b></dt><dd>
Определяет, допустимо ли использование rhosts или /etc/hosts.equiv аутентификации вместе с успешной RSA аутентификацией машины. Значение по умолчанию ``no''. Этот параметр применим только для протокола версии 1.
</dd><dt><b>RSAAuthentication</b></dt><dd>
Определяет, разрешена ли чистая RSA аутентификация. Знамение по умолчанию ``yes''. Имейте ввиду, что этот параметр применим только для протокола версии 1.
</dd><dt><b>ServerKeyBits</b></dt><dd>
Определяет количество бит в ключе сервера эфемерного протокола версии 1. Минимальное значение 512, значение по умолчанию 768.
</dd><dt><b>StrictModes</b></dt><dd>
Определяет, будет ли <b>sshd</b> проводить проверку режимов и права доступа пользовательских файлов и домашнего каталога перед разрешением регистрации в системе. Это желательно потому, что новички иногда оставляют свои каталоги или файлы доступными для записи всем. Значение по умолчанию ``yes''.
</dd><dt><b>Subsystem</b></dt><dd>
Конфигурирует внешнюю подсистему (напр., демон передачи файлов). Параметрами должны быть название подсистемы и команда для выполнения по запросу подсистемы. Команда <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=sftp-server&amp;category=8">sftp-server</a>(8) задействует подсистему передачи файлов ``sftp''. По умолчанию подсистемы не определены. Обратите внимание, что это применимо только к протоколу версии 2.
</dd><dt><b>SyslogFacility</b></dt><dd>
Присваивает код гибкости, который используется при регистрации сообщений от <b>sshd</b>. Допустимые значения: DAEMON, USER, AUTH, LOCAL0, LOCAL1, LOCAL2, LOCAL3, LOCAL4, LOCAL5, LOCAL6, LOCAL7. По умолчанию используется AUTH.
</dd><dt><b>UseLogin</b></dt><dd>
Определяет, будет ли использован <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=login&amp;category=1">login</a>(1) для интерактивного сеанса регистрации в системе. Имейте ввиду, что <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=login&amp;category=1">login</a>(1) никогда не используется для удаленного выполнения команд. Значение по умолчанию ``no''.
</dd><dt><b>X11DisplayOffset</b></dt><dd>
Определяет первый доступный номер дисплея для перенаправления Х11 для <b>sshd</b>. Это предохраняет <b>sshd</b> от конфликтов с настоящими серверами Х11. Значение по умолчанию 10.
</dd><dt><b>X11Forwarding</b></dt><dd>
Определяет, разрешено ли перенаправление Х11. Значение по умолчанию ``yes''. Примите к сведению, что отключение перенаправления Х11 в любом случае не усилит защиту, так как пользователи всегда могут установить свои собственные перенаправления.
</dd><dt><b>XAuthLocation</b></dt><dd>
Определяет месторасположение программы <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=xauth&amp;category=1">xauth</a>(1). По умолчанию это <i>/usr/X11R6/bin/xauth</i>.
</dd><dt><b>SshVersion</b></dt><dd>
Определяет версию программного обеспечения, которая будет отображена. По умолчанию это текущая версия, т.e. OpenSSH_2.9p2.
<p>
</p></dd></dl>
<a name="lbAK">&nbsp;</a>
<h2>ПРОЦЕСС ВХОДА В СИСТЕМУ</h2>

Если пользователь успешно зарегистрировал себя в системе, <b>sshd</b> делает следующее:
<dl compact="">
<dt>1.</dt><dd>
Если регистрация в системе произведена на терминале и не определена никакая команда, то отображается время последнего входа в систему и <i>/etc/motd</i> (если не отключено в файле конфигурации или <i>$HOME/.hushlogin</i>; смотри секцию <i>ФАЙЛЫ</i>).
</dd><dt>2.</dt><dd>
Если регистрация в системе произведена на терминале, записывает время регистрации.
</dd><dt>3.</dt><dd>
Проверяет <i>/etc/nologin</i>; если он присутствует, печатает содержимое и выходит (исключение root).
</dd><dt>4.</dt><dd>
Переходит к выполнению с привилегиями нормального пользователя.
</dd><dt>5.</dt><dd>
Устанавливает базовые переменные.
</dd><dt>6.</dt><dd>
Считывает <i>$HOME/.ssh/environment</i>, если таковой имеется.
</dd><dt>7.</dt><dd>
Переходит в домашний каталог пользователя.
</dd><dt>8.</dt><dd>
Если имеется <i>$HOME/.ssh/rc</i>, выполняет его, если имеется <i>/etc/openssh/sshrc</i>, выполняет его, в противном случае выполняет xauth. ``rc'' файлы даются протоколом аутентификации Х11 и cookie в стандартный ввод.
</dd><dt>9.</dt><dd>
Запускает оболочку пользователя или выполняет команду.
</dd></dl>
<a name="lbAL">&nbsp;</a>
<h2>ФОРМАТ ФАЙЛА AUTHORIZED_KEYS</h2>

Файл <i>$HOME/.ssh/authorized_keys</i> содержит список RSA ключей, которым разрешена RSA аутентификация по протоколу версии 1. Аналогично, файл <i>$HOME/.ssh/authorized_keys2</i> содержит список DSA и RSA ключей, которым разрешена аутентификация публичным ключом (PubkeyAuthentication) по протоколу версии 2.
<p>

Каждая строка файла содержит один ключ (пустые строки или строки, начинающиеся со знака `#' считаются комментариями и будут игнорированы). Каждый публичный ключ RSA состоит из следующих полей разделенных пробелами: параметры, биты, экспонент, модуль, комментарий. Каждый публичный ключ протокола версии 2 состоит из: параметра, типа ключа, кодированного base64 ключа, комментария. Поля параметров не обязательны; их присутствие определено тем, имеется ли в начале строки цифра или нет (поле параметра никогда не начинается с цифры). Поля: биты, образцы, модули и комментарии даны для ключа RSA, для протокола версии 1; поле комментария ни для чего не используется (но может быть удобно пользователю для идентификации ключа). Для протокола версии 2 типом ключа является ``ssh-dss'' или ``ssh-rsa''.
</p><p>

Обратите внимание, что строки в этих файлах, обычно, имеют несколько сотен байт длины (из-за размера модуля ключа RSA). Вы не должны его вводить туда; вместо этого скопируйте файлы <i>identity.pub</i>, <i>id_dsa.pub</i> или <i>id_rsa.pub</i>и отредактируйте.
</p><p>

Параметры (если имеются) состоят из разделенных через запятую определений параметров. Пробелы не допустимы, кроме заключенных в двойные кавычки. Поддерживаются следующие определения параметров:
</p><dl compact="">
<dt><b>from="список-шаблонов"</b></dt><dd>
Указывает, что в дополнение к RSA аутентификации, в списке шаблонов, через запятую должно быть представлено каноническое имя удаленной машины. ( `*' и `?' используются как символы подстановки). Этот список может также содержать шаблон инвертированный знаком `!' в начале; если каноническое имя соответствует инвертированному шаблону, то ключ не будет акцептирован. Назначение этого параметра, произвольное увеличение защиты: RSA аутентификация сама по себе на доверяет сети или серверу имен или чему-либо (кроме ключа); однако, если кто-нибудь как-нибудь перехватит ключ, то ключ позволит вторгшемуся войти в систему из любой точки мира. Этот дополнительный параметр делает использование ворованных ключей более затруднительным (в дополнение к одному только ключу компроментировали бы серверы имен и/или маршрутизаторы).
</dd><dt><b>command="команда"</b></dt><dd>
Указывает, что команда будет выполнена всякий раз, когда при аутентификации используется данный ключ. Команда, данная (любым) пользователем, игнорируется. Команда выполняется на псевдо-терминале, если соединение требует псевдо-терминала; в противном случае это выполняется без терминала. Обратите внимание, если вы имеете чистый 8-ми битный канал, вы не должны запрашивать псевдо-терминал или указать <b>no-pty</b>. В команду может быть включена кавычка, предварённая символом обратного слэша. Этот параметр полезен для ограничения некоторых RSA-ключей выполнением только специфических операций. Примером может служить ключ, которому разрешено выполнять удаленные операции резервного копирования и ничего более. Учтите, что клиент может указать перенаправление TCP/IP и/или X11, если они не запрещены явно.
</dd><dt><b>environment="ИМЯ=значение"</b></dt><dd>
Определяет, что при регистрации в системе с использованием данного ключа к окружению добавляется строка. Переменные окружения указанные таким способом перепишут прочие значения заданного по умолчанию окружения. Допускается использование множества параметров этого типа.
</dd><dt><b>no-port-forwarding</b></dt><dd>
Запрещает перенаправление TCP/IP, когда для аутентификации используется данный ключ. Любой запрос на перенаправление порта возвратит клиенту сообщение об ошибке. Это может быть использовано, например, вместе с параметром <b>command</b>.
</dd><dt><b>no-X11-forwarding</b></dt><dd>
Запрещает перенаправление Х11, когда для аутентификации используется данный ключ. Любой запрос на перенаправление порта возвратит клиенту сообщение об ошибке.
</dd><dt><b>no-agent-forwarding</b></dt><dd>
Запрещает перенаправление агента аутентификации, если при аутентификации используется данный ключ.
</dd><dt><b>no-pty</b></dt><dd>
Предотвращает назначение терминала (запрос на назначение псевдо-терминала закончится неудачей).
</dd><dt><b>permitopen="машина:порт"</b></dt><dd>
Ограничивает локальное ``ssh -L'' перенаправление портов таким образом, что соединение может быть сделано только к указанной машине и порту. Допускается множественное использование параметров <b>permitopen</b> разделённых через запятую. Не допускается использование шаблонов в названиях машин, только литеральные домены или адреса.
</dd><dt><b>restricted-forwarding-to="шаблон-списка-пар"</b></dt><dd>
Определяет, что перенаправление будет запрещено в соответствии со списком разделенных через запятую пар образцов в формате <b>машина:порт</b> (`*' и `?' зарезервированы как знаки подстановки). Список также может содержать шаблоны, отрицаемые при помощи знака `!'.
</dd></dl>
<a name="lbAM">&nbsp;</a>
<h3>Примеры</h3>

1024 33 12121...312314325 <a href="mailto:ylo@foo.bar">ylo@foo.bar</a>
<p>

from="*.niksula.hut.fi ,!pc.niksula.hut.fi " 1024 35 23...2334 <a href="mailto:ylo@niksula">ylo@niksula</a>
</p><p>

command="dump /home",no-pty,no-port-forwarding 1024 33 23...2323 backup.hut.fi 
</p><p>

permitopen="10.2.1.55:80",permitopen="10.2.1.56:25" 1024 33 23...2323
</p><p>
<a name="lbAN">&nbsp;</a>
</p><h2>ФОРМАТ ФАЙЛА SSH_KNOWN_HOSTS</h2>

Файлы <i>/etc/openssh/ssh_known_hosts</i>, <i>/etc/openssh/ssh_known_hosts2</i>, <i>$HOME/.ssh/known_hosts</i> и <i>$HOME/.ssh/known_hosts2</i> содержат публичные ключи машин для всех известных машин. Глобальный файл должен быть подготовлен администратором (дополнительно), пользовательский файл обслуживается автоматически: каждый раз, как пользователь связывается с неизвестной машины, ее ключ автоматически заносится в файл пользователя.
<p>

Каждая строка в этом файле содержит следующие поля: имена машин, биты, экспонент, модули, комментарии. Поля разделены пробелами.
</p><p>

Имена машин, это разделенный запятыми список шаблонов ('*' и '?' используются как знаки подстановки); каждый шаблон согласуется с соответствующим каноническим именем машины (когда аутентифицирует клиент) или согласуется с именем допустимого пользователя (когда аутентифицирует сервер). Этот шаблон может также быть предварен знаком `!' для обозначения отрицания: если имя машины соответствует отрицаемому шаблону, оно будет отвергнуто (этой строкой) даже если оно соответствует другому шаблону в этой же строке.
</p><p>

Биты, экспоненты и модули берутся прямо из RSA ключа машины; они могут быть получены, например, из <i>/etc/openssh/ssh_host_key.pub</i>. Необязательное поле комментария простирается до конца строки и не используется.
</p><p>

Строки, начинающиеся с `#' и пустые строки, игнорируются как комментарии.
</p><p>

В момент аутентификации машины, аутентификация акцептируется, если любая совпавшая строка содержит правильный ключ. Таким образом это позволяет (но это не рекомендуется) иметь несколько строк или различных ключей машин с одним и тем же именем. Это неизбежно случится, когда в файл помещены краткие формы имен машин из различных доменов. Возможно, что файлы содержат противоречивую информацию; аутентификация акцептируется, если подходящая информация может быть найдена в другом файле.
</p><p>

Обратите внимание, что строки в этих файлах обычно имеют длину в несколько сотен знаков и вы определенно не захотите заносить эту информацию в ключи машин от руки. Скорее, вы сделаете это при помощи сценария оболочки или взяв <i>/etc/openssh/ssh_host_key.pub</i> и добавив впереди имя машины.
<a name="lbAO">&nbsp;</a>
</p><h3>Примеры</h3>

<p>

closenet,...,130.233.208.41 1024 37 159...93 closenet.hut.fi
<br>

cvs.openbsd.org,199.185.137.3 ssh-rsa AAAA1234.....=
<a name="lbAP">&nbsp;</a>
</p><h2>ФАЙЛЫ</h2>

<dl compact="">
<dt>/etc/openssh/sshd_config</dt><dd>
Содержит данные конфигурации для <b>sshd</b>. Этот файл должен быть доступен для записи только для суперпользователя, но, это желательно (но не обязательно), что бы он был доступен для чтения остальным.
</dd><dt>/etc/openssh/ssh_host_key, /etc/openssh/ssh_host_dsa_key, /etc/openssh/ssh_host_rsa_key</dt><dd>
<br>

Эти три файла содержат приватную часть ключей машины. Владельцем этих файлов должен быть только суперпользователь, открыты для чтения только для суперпользователя и не доступны для остальных. Имейте ввиду, что <b>sshd</b> не будет работать, если эти файлы доступны для группы/всех.
</dd><dt>/etc/openssh/ssh_host_key.pub, /etc/openssh/ssh_host_dsa_key.pub, /etc/openssh/ssh_host_rsa_key.pub</dt><dd>
<br>

Эти три файла содержат публичную часть ключей машины. Эти файлы должны быть открыты для чтения всем, но на запись только суперпользователю. Их содержимое должно соотноситься с приватной частью. Эти файлы в действительности ни для чего не используются; они предназначены только для удобства пользователя, так что их содержимое может быть скопировано в файлы известных машин. 
</dd></dl>
<p>

Эти группы файлов создаются с использованием <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=ssh-keygen&amp;category=1">ssh-keygen</a>(1).
</p><dl compact="">
<dt>/etc/openssh/primes</dt><dd>
Содержит группы Диффи-Хеллмана, используемые для  "Diffie-Hellman Group Exchange".
</dd><dt>/var/run/sshd.pid</dt><dd>
Содержит идентификатор процесса <b>sshd</b> ожидающего соединения (если имеются несколько демонов запущенных одновременно для разных портов, то содержит идентификатор процесса для стартовавшего последним). Содержимое этого файла не критично; он может быть открыт на запись для всех.
</dd><dt>$HOME/.ssh/authorized_keys</dt><dd>
Описывает ключи RSA которые могут быть использованы для регистрации пользователя. Этот файл должен быть доступен для чтения суперпользователю (что может на некоторых машинах подразумевать доступ для чтения всем, если домашний каталог пользователя расположен на NFS). Рекомендуется чтобы был он недоступен для остальных. Формат этого файла описан выше. Пользователь должен поместить содержимое своего файла <i>identity.pub</i> внутрь этого файла, как описано в <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=ssh-keygen&amp;category=1">ssh-keygen</a>(1).
</dd><dt>$HOME/.ssh/authorized_keys2</dt><dd>
Описывает публичные ключи (RSA или DSA) которые могут быть использованы для регистрации пользователя. Этот файл должен быть доступен для чтения суперпользователю (что может на некоторых машинах подразумевать доступ для чтения всем, если домашний каталог пользователя расположен на NFS). Рекомендуется чтобы он был недоступен для остальных. Формат этого файла описан выше. Пользователь должен поместить содержимое своих файлов <i>id_dsa.pub</i> и/или <i>id_dsa.pub</i> внутрь этого файла, как описано в <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=ssh-keygen&amp;category=1">ssh-keygen</a>(1).
</dd><dt>"/etc/openssh/ssh_known_hosts" и "$HOME/.ssh/known_hosts"</dt><dd>
Эти файлы просматриваются когда используется rhosts с RSA аутентификацией машин для проверки публичного ключа машины. Ключ, для того, чтобы он был акцептирован, должен быть описан в одном из этих файлов. Клиент использует те же самые файлы для сверки, что удаленная машина та самая, которая подразумевается для связи. Эти файлы должны быть доступны для записи только суперпользователю/владельцу. <i>/etc/openssh/ssh_known_hosts</i> должен быть доступен для чтения всем, <i>$HOME/.ssh/known_hosts</i> также может, но не обязательно.
</dd><dt>"/etc/openssh/ssh_known_hosts2" и "$HOME/.ssh/known_hosts2"</dt><dd>
Эти файлы просматриваются когда используется при аутентификации машин с использованием протокола версии 2 для проверки публичного ключа машины. Ключ, для того, чтобы он был акцептирован, должен быть описан в одном из этих файлов. Клиент использует те же самые файлы для сверки, что удаленная машина та самая, которая подразумевается для связи. Эти файлы должны быть доступны для записи только суперпользователю/владельцу. <i>/etc/openssh/ssh_known_hosts2</i> должен быть доступен для чтения всем, <i>$HOME/.ssh/known_hosts2</i> также может, но не обязательно.
</dd><dt>/etc/nologin</dt><dd>
Если имеется этот файл <b>sshd</b> отвергнет попытки соединения для любого пользователя, за исключением суперпользователя. Любому кто пытается зарегистрироваться, будет показано содержимое этого файла и соединения не суперпользователя будут отвергнуты. Этот файл дожен быть доступен для чтения всем.
</dd><dt>/etc/hosts.allow, /etc/hosts.deny</dt><dd>
Если скомпилирован с поддержкой <b>LIBWRAP</b>, здесь может быть определен контроль доступа tcp-оболочек как описано в <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=hosts_access&amp;category=5">hosts_access</a>(5).
</dd><dt>$HOME/.rhosts</dt><dd>
Этот файл содержит пары, машина - имя пользователя, разделенные пробелом, по одной на строку. Заданному пользователю на соответствующей машине разрешена регистрация в системе без пароля. Этот же файл используется для rlogind и rshd. Файл должен быть доступен для записи только пользователю; рекомендуется, чтобы он был недоступен для остальных.
</dd></dl>
<p>

Также возможно использование в этом файле сетевых групп. Либо имя машины, либо имя пользователя могут быть в формате +@имя_группы для указания всех машин или всех пользователей в группе.
</p><dl compact="">
<dt>$HOME/.shosts</dt><dd>
Этот файл для ssh аналогичен файлу <i>.rhosts</i>. Однако этот файл не используется для rlogin и rshd, так что его использование допустимо только с SSH.
</dd><dt>/etc/hosts.equiv</dt><dd>
Этот файл используется в процессе аутентификации <i>.rhosts</i>. В самой простой форме этот файл содержит имена машин, по одному на строку. Пользователям на этих машинах разрешается регистрация в системе без указания пароля с использованием одного имени пользователя на обоих машинах. Имя машины так же может следовать за именем пользователя; так пользователям будет разрешена регистрация в системе от имени <i>любого</i> пользователя на этой машине (за исключением суперпользователя). Дополнительно, синтаксис ``+@group'' может быть использован для указания сетевых групп. Отрицаются записи, начинающиеся с `-'.
</dd></dl>
<p>

Если в этом файле найдено соответствие клиента машина/пользователь, то автоматически разрешается регистрация в системе при использовании единого имени пользователя на клиенте и сервере. В добавок, обычно требуется успешная RSA аутентификация. Этот файл дожен быть доступен для записи только суперпользователю; рекомендуется, чтобы он был доступен всем для чтения.
</p><p>

<b>Предупреждение: Использование имен пользователей в</b> <i>hosts.equiv</i> <b>всегда является плохой идеей</b>. Остерегайтесь этого, так как это означает, что пользователь может зарегистрироваться в системе под <i>любым</i> именем, включая bin, daemon, adm, и бюджеты других пользователей владеющих важными файлами и каталогами. Использование имени пользователя практически гарантирует пользователю права суперпользователя. Единственное допустимое использование имен пользователей, я думаю, находится в отрицании записей.
</p><p>

Имейте в виду, что это предупреждение также относится к rsh/rlogin.
</p><dl compact="">
<dt>/etc/openssh/shosts.equiv</dt><dd>
Он обрабатывается аналогично <i>/etc/hosts.equiv</i>. Однако, этот файл может быть полезен в среде, где имеется желание выполнять и rsh/rlogin и ssh.
</dd><dt>$HOME/.ssh/environment</dt><dd>
Этот файл (при его наличии) считывается в окружение при регистрации в системе. Он может содержать только пустые строки, строки комментария (те, которые начинаются с `#') и стоки назначения форм имя=значение. Правом на запись этого файла должен обладать только пользователь; при необходимости не должен быть читаем для остальных.
</dd><dt>$HOME/.ssh/rc</dt><dd>
При наличии, этот файл будет выполнен после считывания файлов окружения, но перед запуском оболочки пользователя или команды. Если используется подмена Х11, то на его стандартный ввод будет получена пара "proto cookie" (и <i>DISPLAY</i> в окружение). В этом случае он должен вызываться <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=xauth&amp;category=1">xauth</a>(1).
</dd></dl>
<p>

Первичная цель этого файла состоит в том, чтобы выполнить любые подпрограммы 
инициализации, которые могут быть необходимы прежде, чем станет доступным основной каталог пользователя; AFS - специфический пример такой среды. 
</p><p>

Этот файл будет вероятно содержать некоторый код инициализации похожий на что нибудь типа: 
</p><p>


if read proto cookie; then
<br>

<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>echo add $DISPLAY $proto $cookie | xauth -q -;<br>
<br>

fi

</p><p>

Если этот файл отсутствует, то выполняется <i>/etc/openssh/sshrc</i>, если отсутствует и он, то для хранения cookie используется xauth.
</p><p>

Этот файл должен быть доступен для записи пользователю и не должен быть читаем для остальных.
</p><dl compact="">
<dt>/etc/openssh/sshrc</dt><dd>
Подобен <i>$HOME/.ssh/rc</i>. Может быть использован для определения машино-зависимых глобальных инициализаций во время регистрации в системе. Этот файл должен быть доступен для записи только суперпользователю, а доступен для чтения остальным.
</dd></dl>
<a name="lbAQ">&nbsp;</a>
<h2>АВТОРЫ</h2>


OpenSSH является производной из оригинальной и свободной версии ssh 1.2.12 от Tatu Ylonen.

<p>


Aaron Campbell, Bob Beck, Markus Friedl, Niels Provos, Theo de Raadt и Dug Song удалили много ошибок, добавили обновленные возможности и создали OpenSSH.

</p><p>


Markus Friedl внес вклад в виде поддержки для протокола SSH версий 1.5 и 2.0.

</p><p>


Александр Блохин &lt;<a href="mailto:sass@altlinux.ru">sass@altlinux.ru</a>&gt; - перевод на русский язык.

<a name="lbAR">&nbsp;</a>
</p><h2>СМОТРИ ТАКЖЕ</h2>

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=rlogin&amp;category=1">rlogin</a>(1),</b>

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=rsh&amp;category=1">rsh</a>(1),</b>

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=scp&amp;category=1">scp</a>(1),</b>

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=sftp&amp;category=1">sftp</a>(1),</b>

<b>ssh\<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=-add&amp;category=1">-add</a>(1)</b>,

<b>ssh\<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=-agent&amp;category=1">-agent</a>(1),</b>

<b>ssh\<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=-keygen&amp;category=1">-keygen</a>(1),</b>

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=sftp-server&amp;category=8">sftp-server</a>(8),</b>

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=sshd&amp;category=8">sshd</a>(8)</b>

<dl compact="">
<dt>T. Ylonen, T. Kivinen, M. Saarinen, T. Rinne, and S. Lehtinen, <i>SSH Protocol Architecture</i>, draft-ietf-secsh-architecture-07.txt, January 2001, work in progress material.</dt><dd>
</dd><dt>M. Friedl, N. Provos, and W. A. Simpson, <i>Diffie-Hellman Group Exchange for the SSH Transport Layer Protocol</i>, draft-ietf-secsh-dh-group-exchange-00.txt, January 2001, work in progress material.</dt><dd>
<p>
</p></dd></dl>

<hr>
<a name="index">&nbsp;</a><h2>Index</h2>
<dl>
<dt><a href="#lbAB">НАЗВАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAC">СИНТАКСИС</a></dt><dd>
</dd><dt><a href="#lbAD">ОПИСАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAE">DESCRIPTION</a></dt><dd>
<dl>
<dt><a href="#lbAF">Протокол SSH веосии 1</a></dt><dd>
</dd><dt><a href="#lbAG">Протокол SSH версии 2</a></dt><dd>
</dd><dt><a href="#lbAH">Выполнение команд и перенаправление данных</a></dt><dd>
</dd></dl>
</dd><dt><a href="#lbAI">ПАРАМЕТРЫ</a></dt><dd>
</dd><dt><a href="#lbAJ">ФАЙЛ КОНФИГУРАЦИИ</a></dt><dd>
</dd><dt><a href="#lbAK">ПРОЦЕСС ВХОДА В СИСТЕМУ</a></dt><dd>
</dd><dt><a href="#lbAL">ФОРМАТ ФАЙЛА AUTHORIZED_KEYS</a></dt><dd>
<dl>
<dt><a href="#lbAM">Примеры</a></dt><dd>
</dd></dl>
</dd><dt><a href="#lbAN">ФОРМАТ ФАЙЛА SSH_KNOWN_HOSTS</a></dt><dd>
<dl>
<dt><a href="#lbAO">Примеры</a></dt><dd>
</dd></dl>
</dd><dt><a href="#lbAP">ФАЙЛЫ</a></dt><dd>
</dd><dt><a href="#lbAQ">АВТОРЫ</a></dt><dd>
</dd><dt><a href="#lbAR">СМОТРИ ТАКЖЕ</a></dt><dd>
</dd></dl>
<hr>
<br>
<form method="get" action="/search.shtml">
<font size="-1">
<font color="#555555">Поиск по тексту MAN-ов:&nbsp;</font><input size="30" name="words" value="sshd" type="text">
<input name="restrict" value="/man" type="hidden">
<input value="Найти" type="submit">
</font>
<input name="method" value="and" type="hidden">
<input name="format" value="builtin-long" type="hidden">
<input name="sort" value="score" type="hidden">
</form>
<br>
<!--htdig_noindex-->
<noindex>
<br>


</noindex>
<!--/htdig_noindex-->


<!-- footer -->
<!--htdig_noindex-->
<br><br>
<div style="background-color: #E9EAD6; width:100%; height: 61px;">
<div style="margin-right: 20px; float:left; line-height: 61px; vertical-align: middle; margin-left: 10px; font-size: 120%;">
Спонсоры:
</div>
<div style="float:left; height: 60px;  line-height: 60px; margin-left: 20px;">
<a style="align: middle;" target="_blank" href="https://inferno.name/"><img src="/img/inferno2.png" alt="Inferno Solutions" height="57" width="200"></a>
</div>
<div style="float:right; height: 60px;  line-height: 60px;  margin-left: 15px;">
<a style="align: middle;" target="_blank" href="http://hoster.ru/?utm_source=site&amp;utm_medium=banner&amp;utm_campaign=opennet"><img src="/img/dh143x60t.png" alt="Hosting by Hoster.ru" height="60" width="143"></a>
</div>
<div style="float:right;  height: 60px;  line-height: 60px; vertical-align: middle;font-size: 120%;">
Хостинг:
</div>

</div>

<div style="clear: both;"></div>


<br>
<table class="ttxt" style="border-top: 3px solid #C9CaB6;">
<tbody><tr><td width="35%">
<a href="/cgi-bin/opennet/bookmark.cgi">Закладки на сайте</a><br>
<a href="/cgi-bin/opennet/bookmark.cgi?submit=add" target="blank_">Проследить за страницей</a>
</td>
<td align="RIGHT" width="65%">
Created&nbsp;1996-2021&nbsp;by <b><a href="/contact.shtml" title="email maxim.chirkov@gmail.com">Maxim&nbsp;Chirkov</a></b><br>
<a href="https://www.opennet.ru/add.shtml">Добавить</a>, <a href="https://www.opennet.ru/donate.shtml" style="color: #C00000;">Поддержать</a>, <a href="https://www.opennet.ru/banners2.shtml">Вебмастеру</a>
</td>
</tr>
</tbody></table>
<br><br>


<!--/htdig_noindex-->
<!-- end of footer -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-123449-1', 'auto');
    ga('send', 'pageview');
</script>




</body>
<!---------------------------------------------  0  ---------------------------------------------->
