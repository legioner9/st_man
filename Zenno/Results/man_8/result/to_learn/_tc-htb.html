
<!--+++++++++++++++++++++++++++++++++++++++++++  0  +++++++++++++++++++++++++++++++++++++++++++--->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Проект OpenNet: MAN tc-htb (8) Команды системного администрирования (FreeBSD и Linux)</title><meta name="KeyWords" content="man, manual, MAN, системное руководство, linux, FreeBSD, OpenBSD, Solaris, ядро, программы, системный вызов, tc-htb"><meta name="viewport" content="width=device-width, initial-scale=1"></head>


<body link="#0000FF" vlink="#000080" text="#000000" bgcolor="#E3E4D0" alink="#FF00FF">
<link rel="stylesheet" href="/opennet4.css" type="text/css">
<!--htdig_noindex-->
<form method="get" action="https://www.opennet.ru/search.shtml">
<aside>
<div style="width: 100%; text-align: right; font-size: 70%; background: #E9EAD6; margin-bottom:-10px;">
Профиль: <b><a href="/~" rel="nofollow" title="/~ - сводная страница участника"><u>Аноним</u></a></b> (<a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=login">вход</a> | <a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=user_register">регистрация</a>)</div>

<table cellspacing="0" cellpadding="0" width="100%" border="0">
<tbody><tr>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" valign="BOTTOM" bgcolor="#E9EAD6" width="300">
<a href="https://www.opennet.ru/"><img src="/opennet2.gif" alt="The OpenNET Project" height="60" width="249" border="0"></a><br>
</td>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" bgcolor="#E9EAD6" align="CENTER" width="100">

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:10px;" bgcolor="#E9EAD6" align="CENTER" width="50%">
<table width="100%" border="0">
<tbody><tr>
<td width="22%">
 <a href="https://www.opennet.ru/opennews/" class="h"><b>НОВОСТИ</b></a> (<a href="https://www.opennet.ru/news/opennet.shtml" class="h">+</a>)
</td><td width="18%%">
  <a href="https://www.opennet.ru/mp/" class="h"><b>КОНТЕНТ</b></a>
</td><td width="14%">
  <a href="http://wiki.opennet.ru" class="h"><b>WIKI</b></a>
</td><td width="14%">
   <a href="https://www.opennet.ru/man.shtml" class="h"><b>MAN'ы</b></a>
</td><td width="16%">
   <a href="https://www.opennet.ru/forum/" class="h"><b>ФОРУМ</b></a>
</td><td width="16%">
<a href="https://www.opennet.ru/search.shtml" class="h" onmouseover="document.getElementById('form12').style.display='block';">Поиск</a>&nbsp;(<a href="https://www.opennet.ru/keywords/" class="h">теги</a>)
<input id="form12" style="display: none;" size="10" name="words" value="" title="для поиска в google наберите &quot;g фраза&quot;" type="text">
</td></tr>
</tbody></table>

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:5px;" bgcolor="#E9EAD6" align="right" width="20%">

<a href="https://www.opennet.ru/opennews/opennews_all_utf.rss"><img src="/img/rss.png" alt="RSS" title="RSS" height="16" width="16" border="0"></a>&nbsp;<a href="https://twitter.com/opennetru"><img src="/twitter.png" alt="twitter" title="Twitter" height="16" width="16" border="0"></a>&nbsp;<a href="https://vk.com/opennet"><img src="/img/vkontakte.gif" title="ВКонтакте" height="16" width="16" border="0"></a>&nbsp;<a href="https://zen.yandex.ru/opennet"><img src="/img/zen.gif" title="Yandex Zen" height="16" width="16" border="0"></a>&nbsp;<a href="https://www.facebook.com/OpenNet.News/"><img src="/img/facebook.gif" title="Facebook" height="16" width="16" border="0"></a>&nbsp;<a href="https://telegram.space/opennet_ru"><img src="/img/telegram2.png" title="Telegram" height="16" width="16" border="0"></a>
</td></tr></tbody></table>
</aside>

<style>
    .hdr_mobile {
	text-align: center; 
	display: none;
	margin: 0px;
	padding: 0px;
    }
</style>
<div class="hdr_mobile">
<div style="margin-left: auto; margin-right: auto; width: 100%; height: 70px; border:1px solid #b0b190; min-width: 360px; max-width: 600px; background: #E9EAD6 url('/back.gif') repeat-x bottom left;">
<div style="float:left; width: 249px; height: 60px; margin-top: 10px;">
<a href="https://www.opennet.ru"><img src="/opennet2_lite.gif" style="height: 60px; width: 249px; border: 1px;" alt="The OpenNET Project / Index page"></a>
</div>
<div style="float: left; text-align: center; height: 70px; width: 331px; padding: 5px; margin-left: 10px;">
<br><small>[ <a href="/opennews/">новости</a>&nbsp;/<a href="/opennews/?full_lines=15&amp;lines=15&amp;mid_lines=00">+++</a> | <a href="/forum/">форум</a> | <a href="http://wiki.opennet.ru">wiki</a> | <a href="/keywords/">теги</a>
| <a href="tg://resolve?domain=opennet_ru"><img src="/img/telegram2.png" title="Telegram" style="margin-bottom: -4px;" height="16" width="16" border="0"></a>
]</small>
</div>
</div>
</div>
<div style="clear: both;"></div>


<div style="float: left; width: 279; text-align: left;padding-right: 60px;" id="adv">
</div>
<div style="padding-top: 0px;position:absolute;left:50%;margin-left:-235px;width:470px;" id="adv2">
</div>
<div style="width: 279;float: right;" id="adv3">
</div>
<div style="clear: both;"></div>
<br>
</form>
<!--/htdig_noindex-->

<center><h3><font color="#000088">Интерактивная система просмотра системных руководств (man-ов)</font></h3></center>
<form method="GET" action="/man.shtml"> 
<table cellspacing="0" cellpadding="1" bgcolor="#B0B190" align="center" width="600" border="0">
<tbody><tr>
<td valign="TOP">

<table cellspacing="0" cellpadding="0" bgcolor="#E9EAD6" align="center" width="100%" border="0">
<tbody><tr><td>&nbsp;<font color="#555555">Тема</font></td><td><font color="#555555">Набор</font></td><td><font color="#555555">Категория</font></td><td>&nbsp;</td></tr>
<tr><td>

&nbsp;<input size="20" name="topic" value="tc-htb" type="text"></td><td><select name="russian">
<option value="4">Solaris man
</option><option value="1">FreeBSD man
</option><option value="3">Разные man
</option><option value="0" selected="">Русские man
</option><option value="2">Linux man
</option><option value="5">POSIX man
</option></select></td>
<td><select size="1" name="category">
	  <option value="" selected="">All
	  </option><option value="1">1
	  </option><option value="2">2
	  </option><option value="3">3
	  </option><option value="4">4
	  </option><option value="5">5
	  </option><option value="6">6
	  </option><option value="7">7
	  </option><option value="8">8
	  </option><option value="9">9
</option></select></td>

<td><input name="submit" value="Показать man" type="submit"></td></tr>
<script async="" src="https://www.google-analytics.com/analytics.js"></script><script language="JavaScript" src="/print.js"></script>
<tr><td colspan="4" align="left">&nbsp;[<a href="/man.shtml">Cписок руководств</a> | <a href="#" onclick="pr('none');">Печать</a>]</td></tr>
</tbody></table>
</td></tr></tbody></table>
</form>
<h3></h3><font size="+2">tc-htb (8)</font><hr><li>&gt;&gt; <a href="/man.shtml?topic=tc-htb&amp;category=8&amp;russian=0"><u>tc-htb</u></a> (8) <font color="#555555"> ( Русские man: Команды системного администрирования )</font></li><li> <a href="/man.shtml?topic=tc-htb&amp;category=8&amp;russian=2"><u>tc-htb</u></a> (8) <font color="#555555"> ( Linux man: Команды системного администрирования )</font></li>
<a name="lbAB">&nbsp;</a>
<h2>ИМЯ</h2>

HTB - иерархический буфер токенов
<a name="lbAC">&nbsp;</a>
<h2>СИНТАКСИС</h2>

<b>tc qdisc ... dev</b>

УСТРОЙСТВО
<b>( parent</b>

classid 
<b>| root) [ handle </b>

major: 
<b>] htb [ default </b>

minor-id
<b>] </b>

<p>
<b>tc class ... dev</b>

УСТРОЙСТВО
<b>parent </b>

major:[minor]
<b>[ classid </b>

major:minor
<b>] htb rate</b>

скорость
<b>[ ceil</b>

скорость
<b>] burst </b>

размер
<b>[ cburst</b>

размер
<b>] [ prio</b>

приоритет
<b>] </b>

</p><p>
<a name="lbAD">&nbsp;</a>
</p><h2>ОПИСАНИЕ</h2>

Очередь HTB является более понятной и интуитивной заменой очереди CBQ в Linux. И
CBQ и HTB помогают контролировать полосу пропускания исходящего трафика. Оба
позволяют разделить физическую полосу на несколько полос. В обоих случаях вы
указываете как распределить трафик по полосам и определить, из какой полосы
пакет будет отправлен на физическое устройство.
<p>
В отличие от CBQ, HTB распределяет трафик по алгоритму иерархического буфера
токенов (Token Bucket Filter), который не зависит от характеристик
сетевого интерфейса и канала.
</p><p>
<a name="lbAE">&nbsp;</a>
</p><h2>АЛГОРИТМ РАЗДЕЛЕНИЯ</h2>

Алгоритм описан в
<b>tc-tbf (8).</b>

<p>
<a name="lbAF">&nbsp;</a>
</p><h2>КЛАССИФИКАЦИЯ</h2>

В каждой очереди HTB могут быть несколько классов. Каждый из этих классов
содержит собственную очередь, по умолчанию
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=tc-pfifo&amp;category=8">tc-pfifo</a></b>(8).

<p>
При помещении пакета в очередь HTB начинает проверку с корневой очереди и
использует различные методы для определения класса, который получит данные. 
</p><p>
В случает, если не указываются необязательные параметры, процесс достаточно
прост. На каждом узле проверяются условия и при совпадении проверка
продолжается в классе, удовлетворяющем условиям. Если класс не содержит
дочерних элементов, пакет помещается в очередь этого класса. Если класс
содержит дочерние элементы, проверка продолжается среди элементов этого
класса. 
</p><p>
Следующие действия осуществляются на каждом посещённом узле до тех пор, пока не
будет достигнут окончательный класс или процесс не будет прерван.
</p><dl compact="">
<dt>(i)</dt><dd>
Проверка фильтров класса. При отправке конечному классу, обработка
заканчивается. В противном случае проверка перезапускается.
</dd><dt>(ii)</dt><dd>
Если инструкции от фильтров не получены, поместить в очередь этого класса.

Этот алгоритм гарантированно помещает пакет в какую-либо очередь, даже если
конфигурация содержит ошибки. 
<p>
</p></dd></dl>
<a name="lbAG">&nbsp;</a>
<h2>АЛГОРИТМ РАЗДЕЛЕНИЯ ТРАФИКА</h2>

Ещё не написано.
<p>
<a name="lbAH">&nbsp;</a>
</p><h2>ОЧЕРЕДЬ</h2>

Корневая очередь HTB имеет три параметра:
<p>
</p><dl compact="">
<dt>parent major:minor | root</dt><dd>
Обязательный параметр определяющий место расположения HTB: 
<b>в корне</b>

интерфейса или в одном из существующих классов.
</dd><dt>handle major:</dt><dd>
Как и все другие очереди для HTB может быть назначен идентификатор. Он состоит
только из основного (major) числа и двоеточия после него. Необязательный
параметр, но очень удобный, если вы хотите назначить классы для этой очереди.
</dd><dt>default minor-id</dt><dd>
Нераспределённый трафик попадает в указанный класс по его дополнительному
(minor) номеру.
<p>
</p></dd></dl>
<a name="lbAI">&nbsp;</a>
<h2>КЛАССЫ</h2>

Поддерживаются следующие параметры классов:
<p>
</p><dl compact="">
<dt>parent major:minor</dt><dd>
Место класса в иерархии. При создании под корневой очередью может быть
не указано. Обязательный параметр.
</dd><dt>classid major:minor</dt><dd>
Как и очереди, классы могут быть поименованы. Основной номер должен совпадать с
основным номером вышестоящей очереди. Необязательный параметр, но требуется,
если этот класс будет иметь дочерние классы.
</dd><dt>prio приоритет</dt><dd>
При отправке пакетов, классы с низким значением поля приоритета оправляют
первыми. Обязательный параметр.
<p>
</p></dd><dt>rate скорость</dt><dd>
Максимальная гарантированная скорость для этого класса и всех его
дочерних классов. Обязательный параметр.
<p>
</p></dd><dt>ceil скорость</dt><dd>
Максимальная скорость, с которой класс может отправлять пакеты, если
родительский элемент позволяет отправлять данные. По умолчанию такой же как в
параметре 'rate'
<p>
</p></dd><dt>burst размер</dt><dd>
Количество байтов, отдаваемых 
<b>за раз</b>

Должно быть как минимум таким же высоким, как максимальный размер среди
всех дочерних классов.
<p>
</p></dd><dt>cburst размер</dt><dd>
Количество байтов, отдаваемых при максимальной скорости. Другими словами,
так же быстро, как интерфейс может отправлять. Наилучшее значение - размер
среднего пакета. Должно быть как минимум таким же высоким, как максимальный
размер среди всех дочерних классов.
<p>
</p></dd></dl>
<a name="lbAJ">&nbsp;</a>
<h2>ПРИМЕЧАНИЕ</h2>

В связи с ограничениями планировщика Unix, максимальная скорость не бесконечна
и на практике может быть достаточно низкой. На архитектуре Intel таймер выдаёт
100 событий в секунду, поэтому максимальная скорость - это скорость, при
которой отдаётся указанное количество байтов за один тик таймера. Исходя их
этого можно получить минимальный размер данных, отдаваемых за раз. На i386,
канал 10 Мбит требует отдачу за раз 12 кб, так как 100*12кб*8 соответствует 10
Мбит.
<p>
<a name="lbAK">&nbsp;</a>
</p><h2>СМ. ТАКЖЕ</h2>

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=tc&amp;category=8">tc</a></b>(8)


Веб-сайт HTB: <a href="http://luxik.cdi.cz/~devik/qos/htb/">http://luxik.cdi.cz/~devik/qos/htb/</a>
<p>
<a name="lbAL">&nbsp;</a>
</p><h2>АВТОРЫ</h2>

Мартин Девера (Martin Devera) &lt;<a href="mailto:devik@cdi.cz">devik@cdi.cz</a>&gt;. man-страница сопровождается Бертом
Хубертом (Bert Hubert) &lt;<a href="mailto:ahu@ds9a.nl">ahu@ds9a.nl</a>&gt;
<p>
<a name="lbAM">&nbsp;</a>
</p><h2>ПЕРЕВОД</h2>

Андрей Черепанов &lt;<a href="mailto:cas@altlinux.ru">cas@altlinux.ru</a>&gt; 2007
<p>
</p><p>
</p><p>

</p><hr>
<a name="index">&nbsp;</a><h2>Index</h2>
<dl>
<dt><a href="#lbAB">ИМЯ</a></dt><dd>
</dd><dt><a href="#lbAC">СИНТАКСИС</a></dt><dd>
</dd><dt><a href="#lbAD">ОПИСАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAE">АЛГОРИТМ РАЗДЕЛЕНИЯ</a></dt><dd>
</dd><dt><a href="#lbAF">КЛАССИФИКАЦИЯ</a></dt><dd>
</dd><dt><a href="#lbAG">АЛГОРИТМ РАЗДЕЛЕНИЯ ТРАФИКА</a></dt><dd>
</dd><dt><a href="#lbAH">ОЧЕРЕДЬ</a></dt><dd>
</dd><dt><a href="#lbAI">КЛАССЫ</a></dt><dd>
</dd><dt><a href="#lbAJ">ПРИМЕЧАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAK">СМ. ТАКЖЕ</a></dt><dd>
</dd><dt><a href="#lbAL">АВТОРЫ</a></dt><dd>
</dd><dt><a href="#lbAM">ПЕРЕВОД</a></dt><dd>
</dd></dl>
<hr>
<br>
<form method="get" action="/search.shtml">
<font size="-1">
<font color="#555555">Поиск по тексту MAN-ов:&nbsp;</font><input size="30" name="words" value="tc-htb" type="text">
<input name="restrict" value="/man" type="hidden">
<input value="Найти" type="submit">
</font>
<input name="method" value="and" type="hidden">
<input name="format" value="builtin-long" type="hidden">
<input name="sort" value="score" type="hidden">
</form>
<br>
<!--htdig_noindex-->
<noindex>
<br>


</noindex>
<!--/htdig_noindex-->


<!-- footer -->
<!--htdig_noindex-->
<br><br>
<div style="background-color: #E9EAD6; width:100%; height: 61px;">
<div style="margin-right: 20px; float:left; line-height: 61px; vertical-align: middle; margin-left: 10px; font-size: 120%;">
Спонсоры:
</div>
<div style="float:left; height: 60px;  line-height: 60px; margin-left: 20px;">
<a style="align: middle;" target="_blank" href="https://inferno.name/"><img src="/img/inferno2.png" alt="Inferno Solutions" height="57" width="200"></a>
</div>
<div style="float:right; height: 60px;  line-height: 60px;  margin-left: 15px;">
<a style="align: middle;" target="_blank" href="http://hoster.ru/?utm_source=site&amp;utm_medium=banner&amp;utm_campaign=opennet"><img src="/img/dh143x60t.png" alt="Hosting by Hoster.ru" height="60" width="143"></a>
</div>
<div style="float:right;  height: 60px;  line-height: 60px; vertical-align: middle;font-size: 120%;">
Хостинг:
</div>

</div>

<div style="clear: both;"></div>


<br>
<table class="ttxt" style="border-top: 3px solid #C9CaB6;">
<tbody><tr><td width="35%">
<a href="/cgi-bin/opennet/bookmark.cgi">Закладки на сайте</a><br>
<a href="/cgi-bin/opennet/bookmark.cgi?submit=add" target="blank_">Проследить за страницей</a>
</td>
<td align="RIGHT" width="65%">
Created&nbsp;1996-2021&nbsp;by <b><a href="/contact.shtml" title="email maxim.chirkov@gmail.com">Maxim&nbsp;Chirkov</a></b><br>
<a href="https://www.opennet.ru/add.shtml">Добавить</a>, <a href="https://www.opennet.ru/donate.shtml" style="color: #C00000;">Поддержать</a>, <a href="https://www.opennet.ru/banners2.shtml">Вебмастеру</a>
</td>
</tr>
</tbody></table>
<br><br>


<!--/htdig_noindex-->
<!-- end of footer -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-123449-1', 'auto');
    ga('send', 'pageview');
</script>




</body>
<!---------------------------------------------  0  ---------------------------------------------->
