
<!--+++++++++++++++++++++++++++++++++++++++++++  0  +++++++++++++++++++++++++++++++++++++++++++--->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Проект OpenNet: MAN sysklogd (8) Команды системного администрирования (FreeBSD и Linux)</title><meta name="KeyWords" content="man, manual, MAN, системное руководство, linux, FreeBSD, OpenBSD, Solaris, ядро, программы, системный вызов, sysklogd"><meta name="viewport" content="width=device-width, initial-scale=1"></head>


<body link="#0000FF" vlink="#000080" text="#000000" bgcolor="#E3E4D0" alink="#FF00FF">
<link rel="stylesheet" href="/opennet4.css" type="text/css">
<!--htdig_noindex-->
<form method="get" action="https://www.opennet.ru/search.shtml">
<aside>
<div style="width: 100%; text-align: right; font-size: 70%; background: #E9EAD6; margin-bottom:-10px;">
Профиль: <b><a href="/~" rel="nofollow" title="/~ - сводная страница участника"><u>Аноним</u></a></b> (<a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=login">вход</a> | <a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=user_register">регистрация</a>)</div>

<table cellspacing="0" cellpadding="0" width="100%" border="0">
<tbody><tr>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" valign="BOTTOM" bgcolor="#E9EAD6" width="300">
<a href="https://www.opennet.ru/"><img src="/opennet2.gif" alt="The OpenNET Project" height="60" width="249" border="0"></a><br>
</td>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" bgcolor="#E9EAD6" align="CENTER" width="100">

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:10px;" bgcolor="#E9EAD6" align="CENTER" width="50%">
<table width="100%" border="0">
<tbody><tr>
<td width="22%">
 <a href="https://www.opennet.ru/opennews/" class="h"><b>НОВОСТИ</b></a> (<a href="https://www.opennet.ru/news/opennet.shtml" class="h">+</a>)
</td><td width="18%%">
  <a href="https://www.opennet.ru/mp/" class="h"><b>КОНТЕНТ</b></a>
</td><td width="14%">
  <a href="http://wiki.opennet.ru" class="h"><b>WIKI</b></a>
</td><td width="14%">
   <a href="https://www.opennet.ru/man.shtml" class="h"><b>MAN'ы</b></a>
</td><td width="16%">
   <a href="https://www.opennet.ru/forum/" class="h"><b>ФОРУМ</b></a>
</td><td width="16%">
<a href="https://www.opennet.ru/search.shtml" class="h" onmouseover="document.getElementById('form12').style.display='block';">Поиск</a>&nbsp;(<a href="https://www.opennet.ru/keywords/" class="h">теги</a>)
<input id="form12" style="display: none;" size="10" name="words" value="" title="для поиска в google наберите &quot;g фраза&quot;" type="text">
</td></tr>
</tbody></table>

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:5px;" bgcolor="#E9EAD6" align="right" width="20%">

<a href="https://www.opennet.ru/opennews/opennews_all_utf.rss"><img src="/img/rss.png" alt="RSS" title="RSS" height="16" width="16" border="0"></a>&nbsp;<a href="https://twitter.com/opennetru"><img src="/twitter.png" alt="twitter" title="Twitter" height="16" width="16" border="0"></a>&nbsp;<a href="https://vk.com/opennet"><img src="/img/vkontakte.gif" title="ВКонтакте" height="16" width="16" border="0"></a>&nbsp;<a href="https://zen.yandex.ru/opennet"><img src="/img/zen.gif" title="Yandex Zen" height="16" width="16" border="0"></a>&nbsp;<a href="https://www.facebook.com/OpenNet.News/"><img src="/img/facebook.gif" title="Facebook" height="16" width="16" border="0"></a>&nbsp;<a href="https://telegram.space/opennet_ru"><img src="/img/telegram2.png" title="Telegram" height="16" width="16" border="0"></a>
</td></tr></tbody></table>
</aside>

<style>
    .hdr_mobile {
	text-align: center; 
	display: none;
	margin: 0px;
	padding: 0px;
    }
</style>
<div class="hdr_mobile">
<div style="margin-left: auto; margin-right: auto; width: 100%; height: 70px; border:1px solid #b0b190; min-width: 360px; max-width: 600px; background: #E9EAD6 url('/back.gif') repeat-x bottom left;">
<div style="float:left; width: 249px; height: 60px; margin-top: 10px;">
<a href="https://www.opennet.ru"><img src="/opennet2_lite.gif" style="height: 60px; width: 249px; border: 1px;" alt="The OpenNET Project / Index page"></a>
</div>
<div style="float: left; text-align: center; height: 70px; width: 331px; padding: 5px; margin-left: 10px;">
<br><small>[ <a href="/opennews/">новости</a>&nbsp;/<a href="/opennews/?full_lines=15&amp;lines=15&amp;mid_lines=00">+++</a> | <a href="/forum/">форум</a> | <a href="http://wiki.opennet.ru">wiki</a> | <a href="/keywords/">теги</a>
| <a href="tg://resolve?domain=opennet_ru"><img src="/img/telegram2.png" title="Telegram" style="margin-bottom: -4px;" height="16" width="16" border="0"></a>
]</small>
</div>
</div>
</div>
<div style="clear: both;"></div>


<div style="float: left; width: 279; text-align: left;padding-right: 60px;" id="adv">
</div>
<div style="padding-top: 0px;position:absolute;left:50%;margin-left:-235px;width:470px;" id="adv2">
</div>
<div style="width: 279;float: right;" id="adv3">
</div>
<div style="clear: both;"></div>
<br>
</form>
<!--/htdig_noindex-->

<center><h3><font color="#000088">Интерактивная система просмотра системных руководств (man-ов)</font></h3></center>
<form method="GET" action="/man.shtml"> 
<table cellspacing="0" cellpadding="1" bgcolor="#B0B190" align="center" width="600" border="0">
<tbody><tr>
<td valign="TOP">

<table cellspacing="0" cellpadding="0" bgcolor="#E9EAD6" align="center" width="100%" border="0">
<tbody><tr><td>&nbsp;<font color="#555555">Тема</font></td><td><font color="#555555">Набор</font></td><td><font color="#555555">Категория</font></td><td>&nbsp;</td></tr>
<tr><td>

&nbsp;<input size="20" name="topic" value="sysklogd" type="text"></td><td><select name="russian">
<option value="4">Solaris man
</option><option value="1">FreeBSD man
</option><option value="3">Разные man
</option><option value="0" selected="">Русские man
</option><option value="2">Linux man
</option><option value="5">POSIX man
</option></select></td>
<td><select size="1" name="category">
	  <option value="" selected="">All
	  </option><option value="1">1
	  </option><option value="2">2
	  </option><option value="3">3
	  </option><option value="4">4
	  </option><option value="5">5
	  </option><option value="6">6
	  </option><option value="7">7
	  </option><option value="8">8
	  </option><option value="9">9
</option></select></td>

<td><input name="submit" value="Показать man" type="submit"></td></tr>
<script async="" src="https://www.google-analytics.com/analytics.js"></script><script language="JavaScript" src="/print.js"></script>
<tr><td colspan="4" align="left">&nbsp;[<a href="/man.shtml">Cписок руководств</a> | <a href="#" onclick="pr('none');">Печать</a>]</td></tr>
</tbody></table>
</td></tr></tbody></table>
</form>
<h3></h3><font size="+2">sysklogd (8)</font><hr><li>&gt;&gt; <a href="/man.shtml?topic=sysklogd&amp;category=8&amp;russian=0"><u>sysklogd</u></a> (8) <font color="#555555"> ( Русские man: Команды системного администрирования )</font></li><li> <a href="/man.shtml?topic=sysklogd&amp;category=8&amp;russian=2"><u>sysklogd</u></a> (8) <font color="#555555"> ( Linux man: Команды системного администрирования )</font></li>
<a name="lbAB">&nbsp;</a>
<h2>НАЗВАНИЕ</h2>

sysklogd - Утилиты журналирования системы Linux.
<a name="lbAC">&nbsp;</a>
<h2>СИНТАКСИС</h2>

<b>syslogd</b>

[<b> -a </b>

<i>socket</i>

]
[<b> -d </b>]

[<b> -f </b>

<i>config file</i>

]
[<b> -h </b>]

[<b> -l </b>

<i>hostlist</i>

]
[<b> -m </b>

<i>interval</i>

] 
[<b> -n </b>]

[<b> -p</b>

<i>socket</i>

]
[<b> -r </b>]

[<b> -s </b>

<i>domainlist</i>

]
[<b> -v </b>]

<p>

<a name="lbAD">&nbsp;</a>
</p><h2>ОПИСАНИЕ</h2>

<b>Sysklogd</b>

представляет собой две системные утилиты, которые обеспечивают поддержку
журналирования системы и перехват сообщений ядра.  Поддержка доменных гнёзд
интернет и unix позволяет этому пакету утилит поддерживать и локальное и
удалённое журналирование.
<p>
Журналирование системы обеспечивается благодаря версии
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=syslogd&amp;category=8">syslogd</a></b>(8),

основанной на существующих исходных текстах BSD. Поддержка журналирования ядра
обеспечивается утилитой
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=klogd&amp;category=8">klogd</a></b>(8),

которая позволяет протоколировать сообщения ядра, обрабатывая их самостоятельно
или выступая в роли клиента syslogd.
</p><p>
<b>Syslogd</b>

предоставляет средства журналирования, которыми пользуются много современных
программ. Каждое сообщение содержит как минимум поля времени и имени машины,
а обычно также поле имени программы, но этот зависит от доверия к программе.
</p><p>
Т.к. исходные тексты
<b>syslogd</b>

были сильно изменены рассмотрим пару замечаний по порядку. Во-первых, была
сделана попытка систематизировать то что syslogd делает по умолчанию, в
соответствии со стандартным поведением BSD. Второе важное замечание то, что
эта версия syslogd стала взаимодействовать с версией syslog из стандартных
библиотек.  Если бинарик, скомпонованный со стандартными разделяемыми библиотеками
не выполняет своих функций правильно, то мы рады получить такой пример 
аномального поведения.
</p><p>
Главный файл настройки
<i>/etc/syslog.conf</i>

или альтернативный файл, задаваемый в опции
<b>-f</b>,

читается во время запуска. Любые строки, начинающиеся со знака диеза (``#'') и
пустые строки игнорируются. Если ошибка возникает во время синтаксического
анализа, то игнорируется строка целиком.
</p><p>
</p><p>

<a name="lbAE">&nbsp;</a>
</p><h2>ОПЦИИ</h2>

<dl compact="">
<dt><b>-a </b><i>socket</i>

</dt><dd>
Используя этот аргумент, ты можешь задать дополнительные гнёзда, которые
<b>syslogd</b>

будет слушать.  Это необходимо, если у тебя есть какой-то демон, работающий
в среде chroot().  Ты можешь использовать до 19 дополнительных гнёзд. Если 
твоей среде требуется больше, то ты можешь увеличить символ
<b>MAXFUNIX</b>

в исходном файле syslogd.c. Пример для демона chroot() описан людьми из
OpenBSD по адресу <a href="http://www.psionic.com/papers/dns.html.">http://www.psionic.com/papers/dns.html.</a>
</dd><dt><b>-d</b>

</dt><dd>
Включает отладочный режим. При этом демон не выполняет
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=fork&amp;category=2">fork</a></b>(2)

самого себя для перехода в фоновый режим, а напротив остаётся активным и 
выводит массу информации на текущий tty. Подробней смотри в разделе ОТЛАДКА.
</dd><dt><b>-f </b><i>config file</i>

</dt><dd>
Указывает альтернативный файл настроек вместо
<i>/etc/syslog.conf</i>,

используемого по умолчанию.
</dd><dt><b>-h </b>

</dt><dd>
По умолчанию, syslogd не пересылает сообщения, принятые от удалённых машин.
Указание этого параметра в командной строке заставляет демона пересылать любые
принятые удалённые сообщения на заданные машины.
</dd><dt><b>-l </b><i>hostlist</i>

</dt><dd>
Указать имя машины, которая должна журналироваться только с этим простым
именем и без fqdn. Можно указать несколько машин, перечислив их через
двоеточие (``:'').
</dd><dt><b>-m </b><i>interval</i>

</dt><dd>
Заставляет
<b>syslogd</b>

писать метку со временем через определённый интервал. По умолчанию
<i>interval</i>

записи двух строк <i>-- MARK --</i> 20 минут.  Его можно изменить с помощью
этой опции.  Установка
<i>interval</i>

в ноль отключает это свойство совсем.
</dd><dt><b>-n</b>

</dt><dd>
Избегать автоматической фоновой обработки. Особенно эта опция требуется если
<b>syslogd</b>

запускается и управляется с помощью
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=init&amp;category=8">init</a></b>(8).

</dd><dt><b>-p </b><i>socket</i>

</dt><dd>
Можно задать альтернативное доменное гнездо unix вместо
<i>/dev/log</i>.

</dd><dt><b>-r</b>

</dt><dd>
Эта опция включает функцию приёма сообщений из сети через доменное гнездо
интернет с сервисом syslog (смотри
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=services&amp;category=5">services</a></b>(5)).

По умолчанию не принимается никаких сообщений из сети.
<p>
Эта опция введена с версии 1.3 пакета sysklogd. Заметьте, что её поведение
по умолчанию прямо противоположно поведению в старых версиях, так что может
потребоваться её включение.
</p></dd><dt><b>-s </b><i>domainlist</i>

</dt><dd>
Указать имя домена, которое нужно удалить из сообщения перед записью. Можно
указать несколько доменов, разделяя их двоеточиями (``:''). Помни что
используется первое совпавшее, а не лучшее.
</dd><dt><b>-v</b>

</dt><dd>
Напечатать номер версии и выйти.
</dd></dl>
<p>

<a name="lbAF">&nbsp;</a>
</p><h2>СИГНАЛЫ</h2>

<b>Syslogd</b>

реагирует на несколько сигналов. Ты можешь легко послать сигнал в
<b>syslogd</b>

с помощью:
<dl compact="">
<dt></dt><dd>
<pre>kill -SIGNAL `cat /var/run/syslogd.pid`
</pre>

</dd></dl>
<p>

</p><dl compact="">
<dt><b>SIGHUP</b>

</dt><dd>
Этот заставляет
<b>syslogd</b>

выполнить реинициализацию. Все открытые файлы закрываются, файл настройки
(по умолчанию
<i>/etc/syslog.conf</i>)

будет перечитан и средство
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=syslog&amp;category=3">syslog</a></b>(3)

запускается заново.
</dd><dt><b>SIGTERM</b>

</dt><dd>
<b>syslogd</b>

умирает.
</dd><dt><b>SIGINT</b>, <b>SIGQUIT</b>

</dt><dd>
Если отладка разрешена, то они игнорируются, иначе
<b>syslogd</b>

умирает.
</dd><dt><b>SIGUSR1</b>

</dt><dd>
Включить/выключить отладочный режим. Эта опция может использоваться только
если
<b>syslogd</b>

запущен с отладочной опцией
<b>-d</b>.

</dd><dt><b>SIGCHLD</b>

</dt><dd>
Подождать рождения дочерних процессов, из-за сообщений wall.
</dd></dl>
<p>

<a name="lbAG">&nbsp;</a>
</p><h2>ОТЛИЧИЯ СИНТАКСИСА ФАЙЛА НАСТРОЙКИ</h2>

<b>Syslogd</b>

использует слегка другой синтаксис в своем файле настройки чем первоначальный
из BSD. В изначальном все сообщения заданного уровня и выше пересылались в 
журнальный файл.
<dl compact="">
<dt></dt><dd>
Например следующая строка направляет весь вывод от демонов использующих средство
daemon (debug имеет низший приоритет, поэтому все уровни выше него также будут
использованы) в
<i>/usr/adm/daemons</i>:

</dd><dt></dt><dd>
<pre>        # Пример syslog.conf
        daemon.debug                    /usr/adm/daemons
</pre>

</dd></dl>
<p>

По новой схеме такое поведение остается и в ней. Различие состоит в четырех
дополнительных описателях: звездочке (<b>*</b>) шаблона, знака равенства
(<b>=</b>), восклицательного знака (<b>!</b>) и знака минус (<b>-</b>).
</p><p>
Шаблон <b>*</b> указывает, что все сообщения заданного средства будут направлены
по указанному назначению.  Заметим, что такое поведение вырождает указание
уровня debug. Пользователи подтвердили, что запись со звездочкой более понятна.
</p><p>
Шаблон <b>=</b> используется для ограничения записи сообщений заданным уровнем.
Это позволяет, например, брать из определенного источника только сообщения debug.
</p><dl compact="">
<dt></dt><dd>
Например, следующая строка из
<i>syslog.conf</i>

направить сообщения debug от всех источников в файл
<i>/usr/adm/debug</i>.

</dd><dt></dt><dd>
<pre>        # Пример syslog.conf
        *.=debug                        /usr/adm/debug
</pre>

</dd></dl>
<p>



<b>!</b> используется для исключения из журналирования определенных
уровней. Он влияет на все (!) возможные заданные уровни.
</p><dl compact="">
<dt></dt><dd>
Например следующие строки сохраняют все сообщения средства mail, кроме тех
чей уровень равен info в файл
<i>/usr/adm/mail</i>.

И все сообщения от news.info (включительно) по news.crit
(не включая) сохранятся в файле
<i>/usr/adm/news</i>.

</dd><dt></dt><dd>
<pre>        # Пример syslog.conf
        mail.*;mail.!=info              /usr/adm/mail
        news.info;news.!crit            /usr/adm/news
</pre>

</dd></dl>
<p>

Ты можешь использовать исключающий описатель для большей наглядности.
Смысл упомянутого выше объяснения - простая инверсия. Чтобы добиться
такого же результат можно использовать
</p><p>
</p><pre>        mail.none
</pre>

или
<pre>        mail.!*
</pre>

or
<pre>        mail.!debug
</pre>

<p>
будет пропущено каждое сообщение, которое поступает от средства mail.
Есть много возможностей побаловаться с этим. :-)
</p><p>
Шаблон <b>-</b> может использоваться только как префикс имени файла для
пропуска синхронизации файла после каждой в него записи.
</p><p>
Людям, использующим чистый BSD, может понадобиться немного приспособиться, но
тестеры говорят, что этот синтаксис более гибок по сравнению с BSD-ым. Заметим
что эти изменения не влияют на стандартные файлы
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=syslog.conf&amp;category=5">syslog.conf</a></b>(5).

Ты должен специально изменить файлы настройки для получения этих дополнительных
возможностей.
</p><p>

<a name="lbAH">&nbsp;</a>
</p><h2>ПОДДЕРЖКА УДАЛЕННОГО ЖУРНАЛИРОВАНИЯ</h2>

В syslogd сделаны изменения для поддержки сети. Поддержка сети означает, что
сообщения могут перенаправляться с одного узла с запущенным syslogd на другой
узел с запущенным syslogd, где они будут окончательно сохранены в файле на
диске.
<p>
Чтобы включить это, ты должен указать опцию
<b>-r</b>

в командной строке. По умолчанию
<b>syslogd</b>

не слушает сообщения из сети.
</p><p>
Хорошо иметь syslogd слушающий доменное гнездо unix на предмет локально
создаваемых сообщений.  Такое поведение позволит syslogd взаимодействовать с
syslog, расположенным в стандартной библиотеке C.  В то же время syslogd
слушает сообщения из стандартного syslog порта, передаваемые другими машинами.
Чтобы это правильно работало, файл
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=services&amp;category=5">services</a></b>(5)

(обычно лежит в
<i>/etc</i>)

должен иметь следующую запись:
</p><dl compact="">
<dt></dt><dd>
<pre>        syslog          514/udp
</pre>

</dd></dl>
<p>

Если такой записи нет, то
<b>syslogd</b>

не сможет принимать и посылать удаленные сообщения, т.к. UDP порт нельзя
открыть. И
<b>syslogd</b>

сразу умирает, выдав сообщение об ошибке.
</p><p>
Чтобы сообщения передавались на другую машину нужно заменить в строке
<i>syslog.conf</i>

имя нормального файла на имя машины на которую нужно отправлять сообщения
предварив его символом @.
</p><dl compact="">
<dt></dt><dd>
Например, для отправки
<b>ВСЕХ</b>

сообщений на удаленную машину используется
следующая запись в
<i>syslog.conf</i>:

</dd><dt></dt><dd>
<pre>        # Пример файла настройки syslogd, чтобы все сообщения
        # отправлялись на удаленную машину.
        *.*                     @hostname
</pre>

<p>
Чтобы переслать сообщения <b>ядра</b> на удаленную машину нужно вставить
в файл настройки следующее:
</p></dd><dt></dt><dd>
<pre>        # Пример файла настройки для передачи всех
        # сообщений ядра на удаленную машину.
        kern.*          @hostname
</pre>

</dd></dl>
<p>

</p><p>
Если имя удаленной машины не определяется при запуске из-за того что
сервер имен еще не доступен (он может запускаться после syslogd), то это ничего
страшного.
<b>Syslogd</b>

повторит определение имени десять раз и только затем выразит недовольство.
Есть возможность избежать этого, поместив имя машины в 
<i>/etc/hosts</i>.

</p><p>
С нормальным
<b>syslogd</b>

можно получить syslog-зацикливание, если ты отсылаешь сообщения с одной машины
на удаленную машину, которая в свою очередь посылает их назад на отправившую
машину (или гораздо сложнее когда третья машина посылает обратно на первую и
так далее). В моем домене (Infodrom Oldenburg) мы создали такую аварийную
ситуацию и один из наших дисков переполнился одним и тем же сообщением. :-(
</p><p>
Чтобы избежать этого в дальнейшем, сообщения которые приняты с удаленной машины
больше не отсылаются на другую (или ту же самую) удаленную машину. Если вдруг
возникла необходимость это делать, пожалуйста напиши мне (Joey).
</p><p>
Если удаленная машина расположена в том же домене что и машина где запущен
<b>syslogd</b>,

то может использоваться только простое имя машины, а не весь fqdn.
</p><p>
В локальной сети ты можешь выделить центральный сервер журналирования, чтобы
держать всю важную информацию на одной отдельной машине. Если сеть состоит из
нескольких доменов, то не жалуйся что в журнал пишется имя машины полностью
вместо укороченного имени. Ты можешь использовать свойство вырезающее домен
<b>-s</b>

на таком сервере. Ты можешь сказать
<b>syslogd</b>

вырезать некоторые домены, отличные от того где расположен сервер и сохранять
только простое имя машины.
</p><p>
С помощью опции
<b>-l</b>

также возможно определить отдельные хосты как локальные машины.
Это также приводит записи только их простых имен и без fqdn.
</p><p>
Гнездо UDP используется для передачи сообщений на удаленные машины или для
приема сообщений с них и открывается только когда оно нужно.  В версиях до 1.3-23
оно открывалось каждый раз, но не открывалось для чтения или передачи соответственно.
</p><p>
<a name="lbAI">&nbsp;</a>
</p><h2>ВЫВОД В ИМЕНОВАННЫЕ КАНАЛЫ (FIFOs)</h2>

Эта версия syslogd поддерживает вывод журнала в именованные каналы (fifos).
fifo или именованный канал может использоваться как пункт назначения для 
сообщений, если перед именем файла поставить символ канала (``|''). Это удобно
для отладки. Заметим, что fifo должно быть создано с помощью команды mkfifo
перед запуском syslogd.
<dl compact="">
<dt></dt><dd>
Следующий файл настройки направляет debug сообщения из ядра в fifo:
</dd><dt></dt><dd>
<pre>        # Пример файла настройки, перенаправляющего
        # отладочные сообщения ядра ТОЛЬКО в /usr/adm/debug,
        # который является именованным каналом.
        kern.=debug                     |/usr/adm/debug
</pre>

</dd></dl>
<p>

<a name="lbAJ">&nbsp;</a>
</p><h2>ОТНОСИТЕЛЬНО УСТАНОВКИ</h2>

Есть, вероятно один важный момент в установке этой версии syslogd. Эта версия
syslogd зависит от правильного формата сообщений производимых функцией syslog.
Работа функции syslog в разделяемых библиотеках была изменена где-то в районе
версии libc.so.4.[2-4].n.  Изменение состояло в том, что сообщение стало заканчиваться
нулевым символом перед передачей его в гнездо
<i>/dev/log</i>.

Правильная работа этой версии syslogd зависит от того заканчивается сообщение
нулевым символом или нет.
<p>
Эта проблема обычно сама обнаруживается, если в системе используются старые
статически собранные исполняемые файлы.  Использование старой версии функции
syslog приводит к появлению пустых строк сразу после сохраняемого сообщения
с удаленным первым символом. Пересборка этих двоичных файлов с новыми версиями
разделяемых библиотек решает эту проблему.
</p><p>
И
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=syslogd&amp;category=8">syslogd</a></b>(8) и <b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=klogd&amp;category=8">klogd</a></b>(8)

могут запускаться либо из
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=init&amp;category=8">init</a></b>(8)

или как часть последовательности rc.*. Если они стартуют из init, то нужно
указать опцию <i>-n</i>, иначе ты получишь тонну запущенных демонов. Это
происходит из-за того что 
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=init&amp;category=8">init</a></b>(8)

зависит от ID процесса.
</p><p>

<a name="lbAK">&nbsp;</a>
</p><h2>УГРОЗА БЕЗОПАСНОСТИ</h2>

Потенциально, демон syslogd может использоваться как проводник
атаки отказа в обслуживании.  Спасибо John Morrison (<a href="mailto:jmorriso@rflab.ee.ubc.ca">jmorriso@rflab.ee.ubc.ca</a>)
за это предупреждение.
Дегенеративная программа(программист) может очень легко завалить
демона syslogd сообщениями syslog, что в результате приведет к пожиранию
журнальными файлами оставшегося места в файловой системе. Включение журналирования
через доменные гнезда inet естественно подвергает систему риску со стороны.
<p>
Есть несколько методов защиты машины:
</p><dl compact="">
<dt>1.</dt><dd>
Включить в ядре файрволл, разрешающий доступ к гнезду 514/UDP только
определенным машинам или сетям.
</dd><dt>2.</dt><dd>
Запись журнала можно вести в изолированной или не-root файловой системе,
которая если заполнится, все равно не повредит машине.
</dd><dt>3.</dt><dd>
Можно использовать файловую систему ext2, в которой можно настроить процент
файловой системы, которым может пользоваться только суперпользователь.
<b>ЗАМЕТИМ</b>, что часть необходима syslogd для запуска не-root процесса.
<b>ЗАМЕТИМ ТАКЖЕ</b> что это предотвращает использование удаленного журналирования
т.к. syslogd не может связаться с 514/UDP гнездом.
</dd><dt>4.</dt><dd>
Отключить доменные гнезда inet для ограничения риска повреждения локальной машины.
</dd><dt>5.</dt><dd>
Используй шаг 4 и если проблема осталась и это не проказы
программы/демона, то возьми длинный 3.5 фута (приблизительно 1 метр) поршень и
позадавай вопросы своим пользователям.
<p>
Поршень представляет собой диаметром 3/4, 7/8 или 1 дюйм, твердый стальной
прут, с резьбой на концах. Первоначально использовался в нефтяной промышленности
в Северо Западной Дакоте и других местах добычи 'выкачиванием' нефти из
нефтяных скважин. Еще эту конструкцию автоматической подачи время от времени
используют для разговора с непослушными или воинствующими личностями.
</p></dd></dl>
<p>

<a name="lbAL">&nbsp;</a>
</p><h2>ОТЛАДКА</h2>

Когда включается отладка с помощью опции
<b>-d</b>,

то
<b>syslogd</b>

выводит много информации на stdout о том что делает. Всякий раз когда
файл настройки перечитывается и синтаксически разбирается ты увидишь
таблицу, которая отражает внутреннюю структуру данных. Эта таблица состоит из
четырех полей:
<dl compact="">
<dt><i>number</i>

</dt><dd>
Это поле содержит последовательный набор цифр, начинающийся с нуля. Этот номер представляет
собой местоположение во внутренней структуре данных (т.е. массив). Если слева
стоит единица, то это может означать ошибку в соответствующей строке
<i>/etc/syslog.conf</i>.

</dd><dt><i>pattern</i>

</dt><dd>
Это поле сложное и представляет точную внутреннюю структуру. Каждый столбец
отводится под средство (смотри
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=syslog&amp;category=3">syslog</a></b>(3)).

Как ты можешь увидеть, есть еще несколько свободных средств составления шаблона,
используется в основном левая часть. Каждое поле в столбце представляет
собой уровни (смотри
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=syslog&amp;category=3">syslog</a></b>(3)).

</dd><dt><i>action</i>

</dt><dd>
Это поле описывает определенное действие, которое выполняется всякий раз когда
сообщение удовлетворяет шаблону. Смотри man страницу
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=syslog.conf&amp;category=5">syslog.conf</a></b>(5)

на предмет возможных действий.
</dd><dt><i>arguments</i>

</dt><dd>
В этом поле показаны дополнительные аргументы к действиям в последнем поле.
Для сохранения в файл это имя файла; для отправки пользователям это
список пользователей; для удаленного журналирования это имя машины для сбора
сообщений; для вывода на консоль это задействованная консоль; для вывода на tty
это определенный tty; у wall нет дополнительных аргументов.
</dd></dl>
<a name="lbAM">&nbsp;</a>
<h2>ФАЙЛЫ</h2>


<dl compact="">
<dt><i>/etc/syslog.conf</i>

</dt><dd>
Файл настройки
<b>syslogd</b>.

Смотри в
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=syslog.conf&amp;category=5">syslog.conf</a></b>(5)

подробную информацию.
</dd><dt><i>/dev/log</i>

</dt><dd>
Доменное гнездо Unix откуда читаются локальные сообщения syslog.
</dd><dt><i>/var/run/syslogd.pid</i>

</dt><dd>
Файл содержит id процесса
<b>syslogd</b>.


</dd></dl>
<a name="lbAN">&nbsp;</a>
<h2>БАГИ</h2>

Если ошибка встречается в строке, то игнорируется всё правило.
<p>
<b>Syslogd</b>

не изменяет режим доступа к открытым журнальным файлам на всех стадиях процесса.
Если файл создается заново, то он может быть прочитан всеми. Если ты хочешь
избежать этого, тебе нужно самому создать его или изменить права доступа на свои.
Это может быть выполнено в комбинации с циклическим сдвигом журнальных
файлов с помощью программы
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=savelog&amp;category=8">savelog</a></b>(8),

которая есть в дистрибутиве
<b>smail</b>

версии 3.x. Помни, что это может обернуться дырой в безопасности, если
каждый сможет прочитать auth.* сообщения, которые могут содержать пароли.
</p><p>

<a name="lbAO">&nbsp;</a>
</p><h2>СМ. ТАКЖЕ</h2>

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=syslog.conf&amp;category=5">syslog.conf</a></b>(5),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=klogd&amp;category=8">klogd</a></b>(8),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=logger&amp;category=1">logger</a></b>(1),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=syslog&amp;category=2">syslog</a></b>(2),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=syslog&amp;category=3">syslog</a></b>(3),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=services&amp;category=5">services</a></b>(5),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=savelog&amp;category=8">savelog</a></b>(8)

<p>

<a name="lbAP">&nbsp;</a>
</p><h2>СОТРУДНИКИ</h2>

<b>Syslogd</b>

взят из исходных текстов BSD, Greg Wettstein (<a href="mailto:greg@wind.enjellic.com">greg@wind.enjellic.com</a>) выполнил
портирование на Linux, Martin Schulze (<a href="mailto:joey@linux.de">joey@linux.de</a>) исправил несколько ошибок
и добавил некоторые новые свойства.
<b>Klogd</b>

был изначально написан Steve Lord (<a href="mailto:lord@cray.com">lord@cray.com</a>), Greg Wettstein сделал
основные улучшения.
<p>

</p><dl compact="">
<dt>Dr. Greg Wettstein</dt><dd>
</dd><dt>Enjellic Systems Development</dt><dd>
</dd><dt>Oncology Research Division Computing Facility</dt><dd>
</dd><dt>Roger Maris Cancer Center</dt><dd>
</dd><dt>Fargo, ND</dt><dd>
</dd><dt><a href="mailto:greg@wind.enjellic.com">greg@wind.enjellic.com</a></dt><dd>
<p>
</p></dd><dt>Stephen Tweedie</dt><dd>
</dd><dt>Department of Computer Science</dt><dd>
</dd><dt>Edinburgh University, Scotland</dt><dd>
</dd><dt><a href="mailto:sct@dcs.ed.ac.uk">sct@dcs.ed.ac.uk</a></dt><dd>
<p>
</p></dd><dt>Juha Virtanen</dt><dd>
</dd><dt><a href="mailto:jiivee@hut.fi">jiivee@hut.fi</a></dt><dd>
<p>
</p></dd><dt>Shane Alderton</dt><dd>
</dd><dt><a href="mailto:shane@ion.apana.org.au">shane@ion.apana.org.au</a></dt><dd>
<p>
</p></dd><dt>Martin Schulze</dt><dd>
</dd><dt>Infodrom Oldenburg</dt><dd>
</dd><dt><a href="mailto:joey@linux.de">joey@linux.de</a></dt><dd>


<p>
</p></dd></dl>
<a name="lbAQ">&nbsp;</a>
<h2>ПЕРЕВОД</h2>

Оригинал взят из sysklogd-1.3-31
<p>

Перевод выполнил Юрий Козлов, очень рад замечаниям по адресу <a href="mailto:y_kozlov@chat.ru">y_kozlov@chat.ru</a>.
</p><p>

Срд Авг  2 20:07:32 MSD 2000
</p><p>

Сергиев-Посадская LUG spslug.sposad.ru
</p><p>

HomePage <a href="http://www.chat.ru">www.chat.ru</a>/~y_kozlov
</p><p>

</p><hr>
<a name="index">&nbsp;</a><h2>Index</h2>
<dl>
<dt><a href="#lbAB">НАЗВАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAC">СИНТАКСИС</a></dt><dd>
</dd><dt><a href="#lbAD">ОПИСАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAE">ОПЦИИ</a></dt><dd>
</dd><dt><a href="#lbAF">СИГНАЛЫ</a></dt><dd>
</dd><dt><a href="#lbAG">ОТЛИЧИЯ СИНТАКСИСА ФАЙЛА НАСТРОЙКИ</a></dt><dd>
</dd><dt><a href="#lbAH">ПОДДЕРЖКА УДАЛЕННОГО ЖУРНАЛИРОВАНИЯ</a></dt><dd>
</dd><dt><a href="#lbAI">ВЫВОД В ИМЕНОВАННЫЕ КАНАЛЫ (FIFOs)</a></dt><dd>
</dd><dt><a href="#lbAJ">ОТНОСИТЕЛЬНО УСТАНОВКИ</a></dt><dd>
</dd><dt><a href="#lbAK">УГРОЗА БЕЗОПАСНОСТИ</a></dt><dd>
</dd><dt><a href="#lbAL">ОТЛАДКА</a></dt><dd>
</dd><dt><a href="#lbAM">ФАЙЛЫ</a></dt><dd>
</dd><dt><a href="#lbAN">БАГИ</a></dt><dd>
</dd><dt><a href="#lbAO">СМ. ТАКЖЕ</a></dt><dd>
</dd><dt><a href="#lbAP">СОТРУДНИКИ</a></dt><dd>
</dd><dt><a href="#lbAQ">ПЕРЕВОД</a></dt><dd>
</dd></dl>
<hr>
<br>
<form method="get" action="/search.shtml">
<font size="-1">
<font color="#555555">Поиск по тексту MAN-ов:&nbsp;</font><input size="30" name="words" value="sysklogd" type="text">
<input name="restrict" value="/man" type="hidden">
<input value="Найти" type="submit">
</font>
<input name="method" value="and" type="hidden">
<input name="format" value="builtin-long" type="hidden">
<input name="sort" value="score" type="hidden">
</form>
<br>
<!--htdig_noindex-->
<noindex>
<br>


</noindex>
<!--/htdig_noindex-->


<!-- footer -->
<!--htdig_noindex-->
<br><br>
<div style="background-color: #E9EAD6; width:100%; height: 61px;">
<div style="margin-right: 20px; float:left; line-height: 61px; vertical-align: middle; margin-left: 10px; font-size: 120%;">
Спонсоры:
</div>
<div style="float:left; height: 60px;  line-height: 60px; margin-left: 20px;">
<a style="align: middle;" target="_blank" href="https://inferno.name/"><img src="/img/inferno2.png" alt="Inferno Solutions" height="57" width="200"></a>
</div>
<div style="float:right; height: 60px;  line-height: 60px;  margin-left: 15px;">
<a style="align: middle;" target="_blank" href="http://hoster.ru/?utm_source=site&amp;utm_medium=banner&amp;utm_campaign=opennet"><img src="/img/dh143x60t.png" alt="Hosting by Hoster.ru" height="60" width="143"></a>
</div>
<div style="float:right;  height: 60px;  line-height: 60px; vertical-align: middle;font-size: 120%;">
Хостинг:
</div>

</div>

<div style="clear: both;"></div>


<br>
<table class="ttxt" style="border-top: 3px solid #C9CaB6;">
<tbody><tr><td width="35%">
<a href="/cgi-bin/opennet/bookmark.cgi">Закладки на сайте</a><br>
<a href="/cgi-bin/opennet/bookmark.cgi?submit=add" target="blank_">Проследить за страницей</a>
</td>
<td align="RIGHT" width="65%">
Created&nbsp;1996-2021&nbsp;by <b><a href="/contact.shtml" title="email maxim.chirkov@gmail.com">Maxim&nbsp;Chirkov</a></b><br>
<a href="https://www.opennet.ru/add.shtml">Добавить</a>, <a href="https://www.opennet.ru/donate.shtml" style="color: #C00000;">Поддержать</a>, <a href="https://www.opennet.ru/banners2.shtml">Вебмастеру</a>
</td>
</tr>
</tbody></table>
<br><br>


<!--/htdig_noindex-->
<!-- end of footer -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-123449-1', 'auto');
    ga('send', 'pageview');
</script>




</body>
<!---------------------------------------------  0  ---------------------------------------------->
