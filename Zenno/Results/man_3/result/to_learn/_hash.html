
<!--+++++++++++++++++++++++++++++++++++++++++++  0  +++++++++++++++++++++++++++++++++++++++++++--->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Проект OpenNet: MAN hash (3) Библиотечные вызовы (FreeBSD и Linux)</title><meta name="KeyWords" content="man, manual, MAN, системное руководство, linux, FreeBSD, OpenBSD, Solaris, ядро, программы, системный вызов, hash"><meta name="viewport" content="width=device-width, initial-scale=1"></head>


<body link="#0000FF" vlink="#000080" text="#000000" bgcolor="#E3E4D0" alink="#FF00FF">
<link rel="stylesheet" href="/opennet4.css" type="text/css">
<!--htdig_noindex-->
<form method="get" action="https://www.opennet.ru/search.shtml">
<aside>
<div style="width: 100%; text-align: right; font-size: 70%; background: #E9EAD6; margin-bottom:-10px;">
Профиль: <b><a href="/~" rel="nofollow" title="/~ - сводная страница участника"><u>Аноним</u></a></b> (<a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=login">вход</a> | <a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=user_register">регистрация</a>)</div>

<table cellspacing="0" cellpadding="0" width="100%" border="0">
<tbody><tr>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" valign="BOTTOM" bgcolor="#E9EAD6" width="300">
<a href="https://www.opennet.ru/"><img src="/opennet2.gif" alt="The OpenNET Project" height="60" width="249" border="0"></a><br>
</td>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" bgcolor="#E9EAD6" align="CENTER" width="100">

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:10px;" bgcolor="#E9EAD6" align="CENTER" width="50%">
<table width="100%" border="0">
<tbody><tr>
<td width="22%">
 <a href="https://www.opennet.ru/opennews/" class="h"><b>НОВОСТИ</b></a> (<a href="https://www.opennet.ru/news/opennet.shtml" class="h">+</a>)
</td><td width="18%%">
  <a href="https://www.opennet.ru/mp/" class="h"><b>КОНТЕНТ</b></a>
</td><td width="14%">
  <a href="http://wiki.opennet.ru" class="h"><b>WIKI</b></a>
</td><td width="14%">
   <a href="https://www.opennet.ru/man.shtml" class="h"><b>MAN'ы</b></a>
</td><td width="16%">
   <a href="https://www.opennet.ru/forum/" class="h"><b>ФОРУМ</b></a>
</td><td width="16%">
<a href="https://www.opennet.ru/search.shtml" class="h" onmouseover="document.getElementById('form12').style.display='block';">Поиск</a>&nbsp;(<a href="https://www.opennet.ru/keywords/" class="h">теги</a>)
<input id="form12" style="display: none;" size="10" name="words" value="" title="для поиска в google наберите &quot;g фраза&quot;" type="text">
</td></tr>
</tbody></table>

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:5px;" bgcolor="#E9EAD6" align="right" width="20%">

<a href="https://www.opennet.ru/opennews/opennews_all_utf.rss"><img src="/img/rss.png" alt="RSS" title="RSS" height="16" width="16" border="0"></a>&nbsp;<a href="https://twitter.com/opennetru"><img src="/twitter.png" alt="twitter" title="Twitter" height="16" width="16" border="0"></a>&nbsp;<a href="https://vk.com/opennet"><img src="/img/vkontakte.gif" title="ВКонтакте" height="16" width="16" border="0"></a>&nbsp;<a href="https://zen.yandex.ru/opennet"><img src="/img/zen.gif" title="Yandex Zen" height="16" width="16" border="0"></a>&nbsp;<a href="https://www.facebook.com/OpenNet.News/"><img src="/img/facebook.gif" title="Facebook" height="16" width="16" border="0"></a>&nbsp;<a href="https://telegram.space/opennet_ru"><img src="/img/telegram2.png" title="Telegram" height="16" width="16" border="0"></a>
</td></tr></tbody></table>
</aside>

<style>
    .hdr_mobile {
	text-align: center; 
	display: none;
	margin: 0px;
	padding: 0px;
    }
</style>
<div class="hdr_mobile">
<div style="margin-left: auto; margin-right: auto; width: 100%; height: 70px; border:1px solid #b0b190; min-width: 360px; max-width: 600px; background: #E9EAD6 url('/back.gif') repeat-x bottom left;">
<div style="float:left; width: 249px; height: 60px; margin-top: 10px;">
<a href="https://www.opennet.ru"><img src="/opennet2_lite.gif" style="height: 60px; width: 249px; border: 1px;" alt="The OpenNET Project / Index page"></a>
</div>
<div style="float: left; text-align: center; height: 70px; width: 331px; padding: 5px; margin-left: 10px;">
<br><small>[ <a href="/opennews/">новости</a>&nbsp;/<a href="/opennews/?full_lines=15&amp;lines=15&amp;mid_lines=00">+++</a> | <a href="/forum/">форум</a> | <a href="http://wiki.opennet.ru">wiki</a> | <a href="/keywords/">теги</a>
| <a href="tg://resolve?domain=opennet_ru"><img src="/img/telegram2.png" title="Telegram" style="margin-bottom: -4px;" height="16" width="16" border="0"></a>
]</small>
</div>
</div>
</div>
<div style="clear: both;"></div>


<div style="float: left; width: 279; text-align: left;padding-right: 60px;" id="adv">
</div>
<div style="padding-top: 0px;position:absolute;left:50%;margin-left:-235px;width:470px;" id="adv2">
</div>
<div style="width: 279;float: right;" id="adv3">
</div>
<div style="clear: both;"></div>
<br>
</form>
<!--/htdig_noindex-->

<center><h3><font color="#000088">Интерактивная система просмотра системных руководств (man-ов)</font></h3></center>
<form method="GET" action="/man.shtml"> 
<table cellspacing="0" cellpadding="1" bgcolor="#B0B190" align="center" width="600" border="0">
<tbody><tr>
<td valign="TOP">

<table cellspacing="0" cellpadding="0" bgcolor="#E9EAD6" align="center" width="100%" border="0">
<tbody><tr><td>&nbsp;<font color="#555555">Тема</font></td><td><font color="#555555">Набор</font></td><td><font color="#555555">Категория</font></td><td>&nbsp;</td></tr>
<tr><td>

&nbsp;<input size="20" name="topic" value="hash" type="text"></td><td><select name="russian">
<option value="4">Solaris man
</option><option value="1">FreeBSD man
</option><option value="3">Разные man
</option><option value="0" selected="">Русские man
</option><option value="2">Linux man
</option><option value="5">POSIX man
</option></select></td>
<td><select size="1" name="category">
	  <option value="" selected="">All
	  </option><option value="1">1
	  </option><option value="2">2
	  </option><option value="3">3
	  </option><option value="4">4
	  </option><option value="5">5
	  </option><option value="6">6
	  </option><option value="7">7
	  </option><option value="8">8
	  </option><option value="9">9
</option></select></td>

<td><input name="submit" value="Показать man" type="submit"></td></tr>
<script async="" src="https://www.google-analytics.com/analytics.js"></script><script language="JavaScript" src="/print.js"></script>
<tr><td colspan="4" align="left">&nbsp;[<a href="/man.shtml">Cписок руководств</a> | <a href="#" onclick="pr('none');">Печать</a>]</td></tr>
</tbody></table>
</td></tr></tbody></table>
</form>
<h3></h3><font size="+2">hash (3)</font><hr><li> <a href="/man.shtml?topic=hash&amp;category=1&amp;russian=4"><u>hash</u></a> (1) <font color="#555555"> ( Solaris man: Команды и прикладные программы пользовательского уровня )</font></li><li> <a href="/man.shtml?topic=hash&amp;category=1&amp;russian=1"><u>hash</u></a> (1) <font color="#555555"> ( FreeBSD man: Команды и прикладные программы пользовательского уровня )</font></li><li> <a href="/man.shtml?topic=hash&amp;category=1&amp;russian=2"><u>hash</u></a> (1) <font color="#555555"> ( Linux man: Команды и прикладные программы пользовательского уровня )</font></li><li> <a href="/man.shtml?topic=hash&amp;category=1&amp;russian=5"><u>hash</u></a> (1) <font color="#555555"> ( POSIX man: Команды и прикладные программы пользовательского уровня )</font></li><li> <a href="/man.shtml?topic=hash&amp;category=3&amp;russian=1"><u>hash</u></a> (3) <font color="#555555"> ( FreeBSD man: Библиотечные вызовы )</font></li><li>&gt;&gt; <a href="/man.shtml?topic=hash&amp;category=3&amp;russian=0"><u>hash</u></a> (3) <font color="#555555"> ( Русские man: Библиотечные вызовы )</font></li><li> <a href="/man.shtml?topic=hash&amp;category=3&amp;russian=2"><u>hash</u></a> (3) <font color="#555555"> ( Linux man: Библиотечные вызовы )</font></li><li> <a href="/man.shtml?topic=hash&amp;category=9&amp;russian=1"><u>hash</u></a> (9) <font color="#555555"> ( FreeBSD man: Ядро )</font></li><li><font color="#555555">Ключ <a href="/keywords/hash.html"><u>hash</u></a> обнаружен в базе ключевых слов.</font></li>

<a name="lbAB">&nbsp;</a>
<h2>НАЗВАНИЕ</h2>

hash - методы доступа к базе данных ассоциативных массивов
<a name="lbAC">&nbsp;</a>
<h2>СИНТАКСИС</h2>

<pre><b>#include &lt;<a href="file:/usr/include/sys/types.h">sys/types.h</a>&gt;
#include &lt;<a href="file:/usr/include/db.h">db.h</a>&gt;
</b></pre>

<a name="lbAD">&nbsp;</a>
<h2>ОПИСАНИЕ</h2>

Функция
<i>dbopen</i>

является стандартным методом для работы с базами данных. Одним из
поддерживаемых ей форматов являются ассоциативные массивы (hash files).
Описания основных методов доступа к базам данных находятся в
<i><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=dbopen&amp;category=3">dbopen</a></i>(3),

а данная страница руководства описывает только особенности
ассоциативных массивов.
<p>

Структура данных массивов гибка и динамична.
</p><p>

Особая структура данных, методы доступа к которой обеспечивает
<i>dbopen</i>,

определена в файле &lt;<a href="file:/usr/include/db.h">db.h</a>&gt;:
</p><p>
typedef struct {
</p><dl compact=""><dt></dt><dd>
u_int bsize;
<br>

u_int ffactor;
<br>

u_int nelem;
<br>

u_int cachesize;
<br>

u_int32_t (*hash)(const void *, size_t);
<br>

int lorder;
</dd></dl>

} HASHINFO;
<p>

Элементы даной структуры таковы:
</p><dl compact="">
<dt>bsize</dt><dd>
<i>Bsize</i>

определяет размер заголовка блока массива, по умолчанию равный 256 байтам.
Этот параметр может быть изменен, чтобы увеличить размер для таблиц,
расположеных на диске, или таблиц с элементами большого размера.
</dd><dt>ffactor</dt><dd>
<i>Ffactor</i>

указывает на желаемую плотность таблицы ассоциативного массива.
Плотность - это максимальное количество ключей, которые могут находится в одной
связке, определяющей, на какую величину увеличивается или уменьшается
таблица. Значение по умолчанию - 8.
</dd><dt>nelem</dt><dd>
<i>Nelem</i>

- это предполагаемый окончательный размер таблицы массива.
Если величина не установлена, или установлена слишком маленькой,
размер таблицы увеличивается каждый раз, когда добавляется новый ключ.
Это может привести к понижению производительности и скорости работы.
Значение по умолчанию - 1.
</dd><dt>cachesize</dt><dd>
Максимальный размер внутреннего кэша таблицы, в байтах.
Эта величина
<b>только</b>

рекомендация, метод доступа скорее выделит память, чем завершится с ошибкой.
</dd><dt>hash</dt><dd>
<i>Hash</i>

- это пользовательская функция для ассоциативного массива.
Не существует функции, которая подойдет для любых данных, пользователю
может показаться, что встроенная функция слишком проста для некоторых
типов данных.
Определяемая пользователем функция должна иметь два аргумента (указатель
на строку байтов и длина этой строки) и возвращает 32-битную величину
используемую как значение ассоциации.
</dd><dt>lorder</dt><dd>
Порядок байт для целых чисел в метаданных таблицы.
Число должно представлять порядок байт в целом числе, например,
порядок big endian представляется числом 4321.
Если
<i>lorder</i>

равен 0 (т.е. порядок не определен) используется порядок байт текущей
архитектуры.
Если файл уже существует, то определенная величина будет игнорирована и
использоваться будет порядок байт определенный при создании.
</dd></dl>
<p>

Если файл уже существует (и флаг O_TRUNC не определен), величины определяемые
в параметрах bsize, ffactor, lorder и nelem будут игнорированы
и их значения будут получены из файла.
</p><p>

Если функция для работы с массивом определена, то
<i>hash_open</i>

попытается определить, совпадает ли эта функция с той, что использовалась
при создании файла, и завершается с ошибкой, если это не так.
</p><p>

Обратно совместимый интерфейс определеный в
<i><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=dbm&amp;category=3">dbm</a></i>(3),

и
<i><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=ndbm&amp;category=3">ndbm</a></i>(3)

также существует, но он не совместим с предыдущими реализациями по
формату файлов.
<a name="lbAE">&nbsp;</a>
</p><h2>НАЙДЕННЫЕ ОШИБКИ</h2>

Метод доступа
<i>hash</i>

может завершится с ошибкой и установить переменную
<i>errno</i>

в любое значение, определенное для библиотечной функции
<i><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=dbopen&amp;category=3">dbopen</a></i>(3).

<a name="lbAF">&nbsp;</a>
<h2>СМ. ТАКЖЕ</h2>

<i><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=btree&amp;category=3">btree</a></i>(3),

<i><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=dbopen&amp;category=3">dbopen</a></i>(3),

<i><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=mpool&amp;category=3">mpool</a></i>(3),

<i><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=recno&amp;category=3">recno</a></i>(3)

<p>
<i>Dynamic Hash Tables</i>,

Per-Ake Larson, Communications of the ACM, April 1988.
</p><p>
<i>A New Hash Package for UNIX</i>,

Margo Seltzer, USENIX Proceedings, Winter 1991.
<a name="lbAG">&nbsp;</a>
</p><h2>НАЙДЕННЫЕ ОШИБКИ</h2>

Поддерживается только big и little endian порядок байтов.
<p>

</p><hr>
<a name="index">&nbsp;</a><h2>Index</h2>
<dl>
<dt><a href="#lbAB">НАЗВАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAC">СИНТАКСИС</a></dt><dd>
</dd><dt><a href="#lbAD">ОПИСАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAE">НАЙДЕННЫЕ ОШИБКИ</a></dt><dd>
</dd><dt><a href="#lbAF">СМ. ТАКЖЕ</a></dt><dd>
</dd><dt><a href="#lbAG">НАЙДЕННЫЕ ОШИБКИ</a></dt><dd>
</dd></dl>
<hr>
<br>
<form method="get" action="/search.shtml">
<font size="-1">
<font color="#555555">Поиск по тексту MAN-ов:&nbsp;</font><input size="30" name="words" value="hash" type="text">
<input name="restrict" value="/man" type="hidden">
<input value="Найти" type="submit">
</font>
<input name="method" value="and" type="hidden">
<input name="format" value="builtin-long" type="hidden">
<input name="sort" value="score" type="hidden">
</form>
<br>
<!--htdig_noindex-->
<noindex>
<br>


</noindex>
<!--/htdig_noindex-->


<!-- footer -->
<!--htdig_noindex-->
<br><br>
<div style="background-color: #E9EAD6; width:100%; height: 61px;">
<div style="margin-right: 20px; float:left; line-height: 61px; vertical-align: middle; margin-left: 10px; font-size: 120%;">
Спонсоры:
</div>
<div style="float:left; height: 60px;  line-height: 60px; margin-left: 20px;">
<a style="align: middle;" target="_blank" href="https://inferno.name/"><img src="/img/inferno2.png" alt="Inferno Solutions" height="57" width="200"></a>
</div>
<div style="float:right; height: 60px;  line-height: 60px;  margin-left: 15px;">
<a style="align: middle;" target="_blank" href="http://hoster.ru/?utm_source=site&amp;utm_medium=banner&amp;utm_campaign=opennet"><img src="/img/dh143x60t.png" alt="Hosting by Hoster.ru" height="60" width="143"></a>
</div>
<div style="float:right;  height: 60px;  line-height: 60px; vertical-align: middle;font-size: 120%;">
Хостинг:
</div>

</div>

<div style="clear: both;"></div>


<br>
<table class="ttxt" style="border-top: 3px solid #C9CaB6;">
<tbody><tr><td width="35%">
<a href="/cgi-bin/opennet/bookmark.cgi">Закладки на сайте</a><br>
<a href="/cgi-bin/opennet/bookmark.cgi?submit=add" target="blank_">Проследить за страницей</a>
</td>
<td align="RIGHT" width="65%">
Created&nbsp;1996-2021&nbsp;by <b><a href="/contact.shtml" title="email maxim.chirkov@gmail.com">Maxim&nbsp;Chirkov</a></b><br>
<a href="https://www.opennet.ru/add.shtml">Добавить</a>, <a href="https://www.opennet.ru/donate.shtml" style="color: #C00000;">Поддержать</a>, <a href="https://www.opennet.ru/banners2.shtml">Вебмастеру</a>
</td>
</tr>
</tbody></table>
<br><br>


<!--/htdig_noindex-->
<!-- end of footer -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-123449-1', 'auto');
    ga('send', 'pageview');
</script>




</body>
<!---------------------------------------------  0  ---------------------------------------------->
