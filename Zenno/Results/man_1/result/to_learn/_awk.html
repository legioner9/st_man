
<!--+++++++++++++++++++++++++++++++++++++++++++  0  +++++++++++++++++++++++++++++++++++++++++++--->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Проект OpenNet: MAN awk (1) Команды и прикладные программы пользовательского уровня (FreeBSD и Linux)</title><meta name="KeyWords" content="man, manual, MAN, системное руководство, linux, FreeBSD, OpenBSD, Solaris, ядро, программы, системный вызов, awk"><meta name="viewport" content="width=device-width, initial-scale=1"></head>


<body link="#0000FF" vlink="#000080" text="#000000" bgcolor="#E3E4D0" alink="#FF00FF">
<link rel="stylesheet" href="/opennet4.css" type="text/css">
<!--htdig_noindex-->
<form method="get" action="https://www.opennet.ru/search.shtml">
<aside>
<div style="width: 100%; text-align: right; font-size: 70%; background: #E9EAD6; margin-bottom:-10px;">
Профиль: <b><a href="/~" rel="nofollow" title="/~ - сводная страница участника"><u>Аноним</u></a></b> (<a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=login">вход</a> | <a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=user_register">регистрация</a>)</div>

<table cellspacing="0" cellpadding="0" width="100%" border="0">
<tbody><tr>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" valign="BOTTOM" bgcolor="#E9EAD6" width="300">
<a href="https://www.opennet.ru/"><img src="/opennet2.gif" alt="The OpenNET Project" height="60" width="249" border="0"></a><br>
</td>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" bgcolor="#E9EAD6" align="CENTER" width="100">

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:10px;" bgcolor="#E9EAD6" align="CENTER" width="50%">
<table width="100%" border="0">
<tbody><tr>
<td width="22%">
 <a href="https://www.opennet.ru/opennews/" class="h"><b>НОВОСТИ</b></a> (<a href="https://www.opennet.ru/news/opennet.shtml" class="h">+</a>)
</td><td width="18%%">
  <a href="https://www.opennet.ru/mp/" class="h"><b>КОНТЕНТ</b></a>
</td><td width="14%">
  <a href="http://wiki.opennet.ru" class="h"><b>WIKI</b></a>
</td><td width="14%">
   <a href="https://www.opennet.ru/man.shtml" class="h"><b>MAN'ы</b></a>
</td><td width="16%">
   <a href="https://www.opennet.ru/forum/" class="h"><b>ФОРУМ</b></a>
</td><td width="16%">
<a href="https://www.opennet.ru/search.shtml" class="h" onmouseover="document.getElementById('form12').style.display='block';">Поиск</a>&nbsp;(<a href="https://www.opennet.ru/keywords/" class="h">теги</a>)
<input id="form12" style="display: none;" size="10" name="words" value="" title="для поиска в google наберите &quot;g фраза&quot;" type="text">
</td></tr>
</tbody></table>

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:5px;" bgcolor="#E9EAD6" align="right" width="20%">

<a href="https://www.opennet.ru/opennews/opennews_all_utf.rss"><img src="/img/rss.png" alt="RSS" title="RSS" height="16" width="16" border="0"></a>&nbsp;<a href="https://twitter.com/opennetru"><img src="/twitter.png" alt="twitter" title="Twitter" height="16" width="16" border="0"></a>&nbsp;<a href="https://vk.com/opennet"><img src="/img/vkontakte.gif" title="ВКонтакте" height="16" width="16" border="0"></a>&nbsp;<a href="https://zen.yandex.ru/opennet"><img src="/img/zen.gif" title="Yandex Zen" height="16" width="16" border="0"></a>&nbsp;<a href="https://www.facebook.com/OpenNet.News/"><img src="/img/facebook.gif" title="Facebook" height="16" width="16" border="0"></a>&nbsp;<a href="https://telegram.space/opennet_ru"><img src="/img/telegram2.png" title="Telegram" height="16" width="16" border="0"></a>
</td></tr></tbody></table>
</aside>

<style>
    .hdr_mobile {
	text-align: center; 
	display: none;
	margin: 0px;
	padding: 0px;
    }
</style>
<div class="hdr_mobile">
<div style="margin-left: auto; margin-right: auto; width: 100%; height: 70px; border:1px solid #b0b190; min-width: 360px; max-width: 600px; background: #E9EAD6 url('/back.gif') repeat-x bottom left;">
<div style="float:left; width: 249px; height: 60px; margin-top: 10px;">
<a href="https://www.opennet.ru"><img src="/opennet2_lite.gif" style="height: 60px; width: 249px; border: 1px;" alt="The OpenNET Project / Index page"></a>
</div>
<div style="float: left; text-align: center; height: 70px; width: 331px; padding: 5px; margin-left: 10px;">
<br><small>[ <a href="/opennews/">новости</a>&nbsp;/<a href="/opennews/?full_lines=15&amp;lines=15&amp;mid_lines=00">+++</a> | <a href="/forum/">форум</a> | <a href="http://wiki.opennet.ru">wiki</a> | <a href="/keywords/">теги</a>
| <a href="tg://resolve?domain=opennet_ru"><img src="/img/telegram2.png" title="Telegram" style="margin-bottom: -4px;" height="16" width="16" border="0"></a>
]</small>
</div>
</div>
</div>
<div style="clear: both;"></div>


<div style="float: left; width: 279; text-align: left;padding-right: 60px;" id="adv">
</div>
<div style="padding-top: 0px;position:absolute;left:50%;margin-left:-235px;width:470px;" id="adv2">
</div>
<div style="width: 279;float: right;" id="adv3">
</div>
<div style="clear: both;"></div>
<br>
</form>
<!--/htdig_noindex-->

<center><h3><font color="#000088">Интерактивная система просмотра системных руководств (man-ов)</font></h3></center>
<form method="GET" action="/man.shtml"> 
<table cellspacing="0" cellpadding="1" bgcolor="#B0B190" align="center" width="600" border="0">
<tbody><tr>
<td valign="TOP">

<table cellspacing="0" cellpadding="0" bgcolor="#E9EAD6" align="center" width="100%" border="0">
<tbody><tr><td>&nbsp;<font color="#555555">Тема</font></td><td><font color="#555555">Набор</font></td><td><font color="#555555">Категория</font></td><td>&nbsp;</td></tr>
<tr><td>

&nbsp;<input size="20" name="topic" value="awk" type="text"></td><td><select name="russian">
<option value="4">Solaris man
</option><option value="1">FreeBSD man
</option><option value="3">Разные man
</option><option value="0" selected="">Русские man
</option><option value="2">Linux man
</option><option value="5">POSIX man
</option></select></td>
<td><select size="1" name="category">
	  <option value="" selected="">All
	  </option><option value="1">1
	  </option><option value="2">2
	  </option><option value="3">3
	  </option><option value="4">4
	  </option><option value="5">5
	  </option><option value="6">6
	  </option><option value="7">7
	  </option><option value="8">8
	  </option><option value="9">9
</option></select></td>

<td><input name="submit" value="Показать man" type="submit"></td></tr>
<script async="" src="https://www.google-analytics.com/analytics.js"></script><script language="JavaScript" src="/print.js"></script>
<tr><td colspan="4" align="left">&nbsp;[<a href="/man.shtml">Cписок руководств</a> | <a href="#" onclick="pr('none');">Печать</a>]</td></tr>
</tbody></table>
</td></tr></tbody></table>
</form>
<h3></h3><font size="+2">awk (1)</font><hr><li> <a href="/man.shtml?topic=awk&amp;category=1&amp;russian=4"><u>awk</u></a> (1) <font color="#555555"> ( Solaris man: Команды и прикладные программы пользовательского уровня )</font></li><li> <a href="/man.shtml?topic=awk&amp;category=1&amp;russian=1"><u>awk</u></a> (1) <font color="#555555"> ( FreeBSD man: Команды и прикладные программы пользовательского уровня )</font></li><li>&gt;&gt; <a href="/man.shtml?topic=awk&amp;category=1&amp;russian=0"><u>awk</u></a> (1) <font color="#555555"> ( Русские man: Команды и прикладные программы пользовательского уровня )</font></li><li> <a href="/man.shtml?topic=awk&amp;category=1&amp;russian=2"><u>awk</u></a> (1) <font color="#555555"> ( Linux man: Команды и прикладные программы пользовательского уровня )</font></li><li> <a href="/man.shtml?topic=awk&amp;category=1&amp;russian=5"><u>awk</u></a> (1) <font color="#555555"> ( POSIX man: Команды и прикладные программы пользовательского уровня )</font></li><li> <a href="/man.shtml?topic=awk&amp;category=8&amp;russian=0"><u>awk</u></a> (8) <font color="#555555"> ( Русские man: Команды системного администрирования )</font></li><li><font color="#555555">Ключ <a href="/keywords/awk.html"><u>awk</u></a> обнаружен в базе ключевых слов.</font></li>
<table width="100%" border="0">
<tbody><tr>
<td><h1>awk(1)</h1></td>
<td><h1 align="right">awk(1)</h1></td>
</tr>
</tbody></table>

<h2>НАЗВАНИЕ</h2>
<p><b>awk</b> - язык поиска и обработки шаблонов</p>

<h2>СИНТАКСИС</h2>

<dl><dt></dt>
  <dd><tt>
awk [-f <b>файл_программы</b> | '<b>программа</b>'] [-F<b>разделитель</b>]<br> 
&nbsp;&nbsp;&nbsp;   [-v <b>переменная=значение</b>] [<b>файл</b> ...]
</tt></dd></dl>

<h2>ОПИСАНИЕ</h2>
<p><b>awk</b> сканирует каждый входной <b>файл</b> в поисках строк, соответствующих 
любому из набора <i>шаблонов</i> (<i>образцов</i>), указанных в <b>программе</b>. Строку <b>программы</b> 
необходимо брать в одиночные кавычки (<b>'</b>), чтобы защитить ее от обработки 
командным интерпретатором. Шаблоны представляют собой произвольную 
логическую комбинацию расширенных регулярных выражений 
(см. <a href="/man.shtml?topic=grep&amp;category=1"><b>grep(1)</b></a>) и 
<i>относительных выражений</i> (relational expressions). С каждым шаблоном в 
<b>программе</b> может быть связано действие, выполняемое, когда строка файла 
сопоставляется с шаблоном. Набор пар шаблон-действие можно вводить 
непосредственно как <b>программу</b>, а можно и в файле, который указывается с 
помощью опции <b>-f файл_программы</b>. Входные <b>файлы</b> читаются 
последовательно; если <b>файлы</b> не указаны, читается стандартный входной поток. 
Имя файла <b>-</b> обозначает стандартный входной поток.</p>

<p><b>awk</b> обрабатывает символы дополнительного набора в парах шаблон-действие и 
комментариях, а также распознает символы дополнительного набора в качестве 
разделителей полей (см. <a href="#delim">ниже</a>) в соответствии с локалью, заданной в 
переменной среды <b>LC_CTYPE</b> (см. <b>LANG</b> в <a href="/man.shtml?topic=environ&amp;category=5"><b>environ(5)</b></a>). В регулярных 
выражениях поиски шаблонов выполняются над символами, а не над байтами, 
как описано на странице справочного руководства <a href="/man.shtml?topic=grep&amp;category=1"><b>grep(1)</b></a>.</p>

<p>Каждая входная строка сопоставляется с шаблоном каждой пары шаблон-
действие; для каждого сопоставившегося шаблона выполняется 
соответствующее действие. Любой аргумент вида <b>переменная=значение</b> 
рассматривается как присваивание, а не как имя файла, и выполняется в момент, 
когда он должен был бы открываться, если бы представлял собой имя файла. 
Опция <b>-v</b>, за которой идет конструкция <b>переменная=значение</b>, представляет собой 
присваивание, которое должно быть сделано перед выполнением <b>программы</b>; 
можно задавать любое количество опций <b>-v</b>.</p>

<p>Входная строка обычно состоит из полей, разделенных пробельными 
символами. (Это умолчательное предположение можно изменить с помощью 
встроенной переменной <b>FS</b> или опции <b>-Fразделитель</b>.) Поля обозначаются <b>$1</b>, 
<b>$2</b>, ...; <b>$0</b> ссылается на всю строку в целом.</p>

<p>Пара шаблон-действие имеет вид:</p>

<dl><dt></dt><dd><tt>
<b>шаблон</b> { <b>действие</b> }
</tt></dd></dl>

<p>Шаблон или действие можно не указывать. Если для шаблона не задано 
действие, соответствующая строка просто выдается. Если для действия не указан 
шаблон, это действие выполняется для каждой входной строки. Пары шаблон-
действие разделяются переводами строк или точками с запятыми.</p>

<p>Как уже упоминалось, шаблоны представляют собой произвольные логические 
комбинации (с использованием <b>!</b>, <b>||</b>, <b>&amp;&amp;</b> и круглых скобок) относительных 
выражений и расширенных регулярных выражений. Относительным называется 
любое из следующих выражений:</p>

<dl><dt></dt><dd><tt>
<b>выражение</b> <b>оператор_отношения</b> <b>выражение</b><br>
<b>выражение</b> <b>оператор_сопоставления</b> <b>регулярное_выражение</b><br>
<b>выражение</b> in <b>имя_массива</b><br>
(<b>выражение</b>, <b>выражение</b>, ... ) in <b>имя_массива</b>
</tt></dd></dl>

<p>где <b>оператор_отношения</b> представляет собой один из шести операторов 
отношения в языке C, а <b>оператор_сопоставления</b> - это либо <b>~</b> (содержит), либо <b>!~</b> 
(не содержит). <b>Выражением</b> может быть арифметическое выражение, 
относительное выражение, специальное выражение</p>

<dl><dt></dt><dd><tt>
<b>переменная</b> in <b>массив</b>
</tt></dd></dl>

<p>или их логическая комбинация.</p>

<p>В шаблонах расширенные регулярные выражения необходимо заключать в 
косые черты (<b>/</b>). Отдельное регулярное выражение в шаблоне применяется ко 
всей строке. Расширенные регулярные выражения могут также использоваться в 
относительных выражениях. Шаблон может состоять из двух шаблонов через 
запятую; в этом случае действие выполняется для всех строк между 
соответствующей первому шаблону и следующей соответствующей второму 
шаблону.</p>

<p>Специальные шаблоны <b>BEGIN</b> и <b>END</b> можно использовать для получения 
управления перед чтением первой входной строки и после прочтения последней 
входной строки, соответственно. Эти ключевые слова нельзя сочетать с другими 
шаблонами.</p>

<p><a name="delim">Для задания разделителя</a> полей можно использовать расширенное регулярное 
выражение, используя опцию <b>-Fразделитель</b> или присваивая выражение 
встроенной переменной <b>FS</b>. По умолчанию, начальные пробелы в строках 
игнорируются, а поля разделяются произвольным количеством пробелов и/или 
символов табуляции.</p>

<p>Однако, если переменной <b>FS</b> присвоено значение, начальные пробелы не будут 
игнорироваться.</p>

<p>Имеются и другие встроенные переменные:</p>

<dl><dt></dt><dd>
<table cellspacing="4" border="0">
<tbody><tr><td width="30%"><b>ARGC</b></td><td>
количество аргументов командной строки</td></tr>
<tr><td><b>ARGV</b></td><td>
массив аргументов командной строки</td></tr>
<tr><td><b>ENVIRON</b></td><td>
массив переменных среды; в качестве индексов 
используются имена переменных</td></tr>
<tr><td><b>FILENAME</b></td><td>
имя текущего входного файла</td></tr>
<tr><td><b>FNR</b></td><td>
порядковый номер текущей записи в текущем файле</td></tr>
<tr><td><b>FS</b></td><td>
регулярное выражение, задающее разделитель 
входных полей (по умолчанию - пробелы и символы табуляции)</td></tr>
<tr><td><b>NF</b></td><td>
количество полей в текущей записи</td></tr>
<tr><td><b>NR</b></td><td>
порядковый номер текущей записи</td></tr>
<tr><td><b>OFMT</b></td><td>
выходной формат для чисел (по умолчанию - %.6g)</td></tr>
<tr><td><b>OFS</b></td><td>
разделитель выходных полей (по умолчанию - пробел)</td></tr>
<tr><td><b>ORS</b></td><td>
разделитель выходных записей (по умолчанию - новая строка)</td></tr>
<tr><td><b>RS</b></td><td>
разделитель входных записей (по умолчанию - новая строка)</td></tr>
<tr><td><b>SUBSEP</b></td><td>
разделитель нескольких индексов (по умолчанию - символ с кодом 034)</td></tr>
</tbody></table></dd></dl>

Разделители, задаваемые с помощью опции <b>-F</b> или переменных <b>OFS</b>, <b>ORS</b> и <b>FS</b>, 
могут содержать символы дополнительного набора.

Действие представляет собой последовательность операторов. Имеются 
следующие операторы:

<dl><dt></dt><dd>
<tt>
if ( <b>выражение</b> ) <b>оператор</b> [else <b>оператор</b>]<br>
while ( <b>выражение</b> ) <b>оператор</b><br>
do <b>оператор</b> while ( <b>выражение</b> )<br>
for ( <b>выражение</b> ; <b>выражение</b> ; <b>выражение</b> ) <b>оператор</b><br>
for ( <b>переменная</b> in <b>массив</b> ) <b>оператор</b><br>
delete <b>массив</b>[<b>индекс</b>]	# удаление элемента массива<br>
break<br>
continue<br>
{ [<b>оператор</b>] ... }<br>
<b>выражение</b> # обычно, <b>переменная</b> = <b>выражение</b><br>
print [<b>список_выражений</b>] [&gt;<b>выражение</b>]<br>
printf <b>формат</b> [, <b>список_выражений</b>] [&gt;<b>выражение</b>]<br>
next	# пропустить оставшиеся шаблоны для этой строки<br>
<table cellspacing="0" border="0">
<tbody><tr><td><tt>exit [<b>выражение</b>]</tt></td><td><tt> # пропустить остальные входные</tt></td></tr>
<tr><td>&nbsp;</td><td><tt> # строки; <b>выражение</b> задает</tt></td></tr>
<tr><td>&nbsp;</td><td><tt> # код возврата</tt></td></tr>
</tbody></table>
return [<b>выражение</b>]
</tt>
</dd></dl>

<p>Операторы заканчиваются точкой с запятой, новой строкой или закрывающей 
фигурной скобкой. Пустой <b>список_выражений</b> означает всю входную строку. 
<b>Выражения</b> будут иметь строковые или числовые значения, в зависимости от 
строения, и строятся с использованием операторов 
<b>+</b>, <b>-</b>, <b>*</b>, <b>/</b>, <b>%</b>, <b>^</b> и конкатенации 
(выполняемой при записи подряд). В выражениях также можно использовать 
операторы <b>++</b>, <b>--</b>, <b>+=</b>, <b>-=</b>, <b>*=</b>, <b>/=</b>, <b>%=</b>, <b>^=</b>, 
<b>&gt;</b>, <b>&gt;=</b>, <b>&lt;</b>, <b>&lt;=</b>, <b>==</b>, <b>!=</b>, <b>?:</b>. Переменные 
могут быть скалярами, элементами массивов (записывается как <b>x[i]</b>) или полями. 
Переменные инициализируются пустыми строками или нулями. Индексами 
массивов могут быть любые строки, не обязательно только числовые; это 
позволяет реализовать ассоциативную память. Допускается использование 
нескольких индексов, например <b>[i,j,k]</b>; составные элементы конкатенируются, 
разделяясь значением встроенной переменной <b>SUBSEP</b>. Строковые константы 
берутся в двойные кавычки (<b>""</b>), причем в них распознаются стандартные 
управляющие символы языка C.</p>

<p>Оператор <b>print</b> выдает аргументы в стандартный выходной поток или в файл, 
если указано <b>&gt;выражение</b>, или по конвейеру, если указано <b>|команда</b>. 
Аргументы разделяются текущим разделителем выходных полей и завершаются 
разделителем выходных записей. Оператор <b>printf</b> форматирует свой 
<b>список_выражений</b> в соответствии с указанным <b>форматом</b> 
(см. <a href="/man.shtml?topic=fprintf&amp;category=3"><b>fprintf(3S)</b></a>). 
Встроенная функция <b>close(выражение)</b> закрывает указанный файл или поток, 
задаваемый <b>выражением</b>.</p>

<p>Математические функции <b>atan2</b>, <b>cos</b>, <b>exp</b>, <b>log</b>, 
<b>sin</b>, <b>sqrt</b> являются встроенными.</p>

<p>Другие встроенные функции включают:</p>

<table cellspacing="4" width="100%" border="0">
<tbody><tr valign="top"><td width="40%"><b>gsub(for, repl, in)</b></td><td>
работает аналогично <b>sub</b> (см. <a href="#sub">ниже</a>), но заменяет 
последовательные вхождения регулярного 
выражения (как команда глобальной подстановки в <a href="/man.shtml?topic=ed&amp;category=1"><b>ed</b></a>).</td></tr>
<tr valign="top"><td><b>index(s, t)</b></td><td>
возвращает позицию первого вхождения строки <b>t</b> в 
строке <b>s</b>, или 0, если такой подстроки в <b>s</b> нет.</td></tr>
<tr valign="top"><td><b>int</b></td><td>
усекает до целого значения.</td></tr>
<tr valign="top"><td><b>length(s)</b></td><td>
возвращает длину в байтах аргумента, 
рассматриваемого как строка, или длину входной 
строки, если аргумент не указан.</td></tr>
<tr valign="top"><td><b>match(s, re)</b></td><td>
возвращает позицию вхождения регулярного 
выражения <b>re</b> в строке <b>s</b>, или 0, если такого 
выражения в строке нет. Переменная <b>RSTART</b> 
устанавливается в начальную позицию 
соответствующей подстроки (которая совпадает с 
возвращаемым значением), а переменная 
<b>RLENGTH</b> устанавливается равной длине 
соответствующей подстроки.</td></tr>
<tr valign="top"><td><b>rand</b></td><td>
случайное число в диапазоне (0, 1).</td></tr>
<tr valign="top"><td><b>split(s, a, fs)</b></td><td>
разбивает строку <b>s</b> на массив элементов <b>a[1]</b>, <b>a[2]</b>,... 
<b>a[n]</b> и возвращает их количество - n. В качестве 
разделителя используется регулярное выражение <b>fs</b> 
или разделитель полей <b>FS</b>, если аргумент <b>fs</b> не задан.</td></tr>
<tr valign="top"><td><b>srand</b></td><td>
устанавливает базовое значение (seed) для функции <b>rand</b></td></tr>
<tr valign="top"><td><b>sprintf(fmt, expr, expr,...)</b></td><td>
форматирует выражения в соответствии с форматом 
<a href="/man.shtml?topic=fprintf&amp;category=3"><b>fprintf(3S)</b></a>, задаваемым аргументом <b>fmt</b>, и 
возвращает получившуюся в результате строку.</td></tr>
<tr valign="top"><td><b><a name="sub">sub</a>(for, repl, in)</b></td><td>
подставляет строку <b>repl</b> вместо первого вхождения 
регулярного выражения <b>for</b> в строку <b>in</b> и возвращает 
количество подстановок. Если строка <b>in</b> не указана, 
<b>awk</b> выполняет подстановки в текущей записи (<b>$0</b>).</td></tr>
<tr valign="top"><td><b>substr(s, m, n)</b></td><td>
возвращает <b>n</b>-символьную подстроку строки <b>s</b>, 
начиная с позиции <b>m</b>.</td></tr>
</tbody></table>

<p>Поддерживаются также следующие встроенные функции ввода/вывода:</p>

<dl>
<dt><b>close(имя_файла)</b></dt><dd>
закрывает файл или поток с именем <b>имя_файла</b>.
</dd>
<dt><b>cmd | getline</b></dt><dd>
направляет выходной поток команды <b>cmd</b> функции <b>getline</b>; каждый 
последующий вызов <b>getline</b> возвращает следующую строку из выходного 
потока <b>cmd</b>.
</dd>
<dt><b>getline</b></dt><dd>
устанавливает <b>$0</b> в следующую входную запись из текущего входного 
файла.
</dd>
<dt><b>getline &lt;файл</b></dt><dd>
устанавливает <b>$0</b> в следующую запись из <b>файла</b>.
</dd>
<dt><b>getline x</b></dt><dd>
устанавливает значение переменной <b>x</b>.
</dd>
<dt><b>getline x &lt;файл</b></dt><dd>
устанавливает <b>x</b> значение следующей записи из файла.
</dd>
<dt><b>system(команда)</b></dt><dd>
выполняет <b>команду</b> и возвращает ее код возврата.
</dd>
</dl>

<p>Все формы функции <b>getline</b> возвращают 1 в случае успешного чтения, 0 - в 
случае конца файла и -1 в случае ошибки.</p>

<p><b>awk</b> также позволяет создавать функции, определяемые пользователем. Такие 
функции можно определять (в позиции шаблона пары шаблон-действие) 
следующим образом</p>

<dl><dt></dt><dd><tt>
function <b>имя</b>(<b>аргументы</b>,...) { <b>операторы</b> }
</tt></dd></dl>

<p>или</p>

<dl><dt></dt><dd><tt>
func <b>имя</b>(<b>аргументы</b>,...) { <b>операторы</b> }
</tt></dd></dl>

<p>Аргументы функции передаются по значению, если являются скалярами, и по 
ссылке, если представляют собой имена массивов. Имена аргументов локальны 
по отношению к функции; все остальные имена переменных - глобальные. 
Вызовы функций могут быть вложенными, а сами функции - рекурсивными. 
Оператор <b>return</b> можно использовать для возвращения значения из функции.</p>

<h2>ПРИМЕРЫ</h2>
<p>Выдать строки длиннее 72 символов:</p>

<dl><dt></dt><dd><tt>
length &gt; 72
</tt></dd></dl>

<p>Выдать первые два поля в обратном порядке:</p>

<dl><dt></dt><dd><tt>
{ print $2, $1 }
</tt></dd></dl>

<p>То же, но входные поля разделены запятой и/или пробелами и символами 
табуляции:</p>

<dl><dt></dt><dd><tt>
BEGIN { FS = ",[ \t]*|[ \t]+" }<br>
{ print $2, $1 }
</tt></dd></dl>

<p>Просуммировать первый столбец, выдать сумму и среднее значение:</p>

<dl><dt></dt><dd><tt>
{ s += $1 }<br>
END { print "sum is", s, " average is", s/NR }
</tt></dd></dl>

<p>Выдать поля в обратном порядке:</p>

<dl><dt></dt><dd><tt>
{ for (i = NF; i &gt; 0; --i) print $i }
</tt></dd></dl>

<p>Выдать все строки между парами шаблонов start/stop:</p>

<dl><dt></dt><dd><tt>
/start/, /stop/
</tt></dd></dl>

<p>Выдать все строки, первое поле в которых отличается от первого поля 
предыдущей строки:</p>

<dl><dt></dt><dd><tt>
$1 != prev { print; prev = $1 }
</tt></dd></dl>

<p>Имитировать команду <a href="/man.shtml?topic=echo&amp;category=1"><b>echo(1)</b></a>:</p>
<dl><dt></dt><dd><tt>
<pre>BEGIN {
	for (i = 1; i &lt; ARGC; i++)
		printf "%s", ARGV[i]
	printf "\n"
	exit
}</pre>
</tt></dd></dl>

<p>Выдать файл, заполняя номера страниц, начиная с 5:</p>
<dl><dt></dt><dd><tt>
<pre>/Page/	{ $2 = n++; }
		{ print }</pre>
</tt></dd></dl>

<p>Если эта программа находится в файле по имени <b>prog</b>, следующая команда 
распечатает файл <b>input</b>, пронумеровав его страницы начиная с 5:</p>
<dl><dt></dt><dd><tt>
awk -f prog n=5 input.
</tt></dd></dl>

<h2>ФАЙЛЫ</h2>
<dl><dt><b>
/usr/lib/locale/локаль/LC_MESSAGES/uxawk</b></dt>
<dd>файл сообщений для текущего языка (См. <b>LANG</b> в 
<a href="/man.shtml?topic=environ&amp;category=5"><b>environ(5)</b></a>.)
</dd></dl>

<h2>ССЫЛКИ</h2>
<dl><dt></dt><dd>
	<a href="/man.shtml?topic=fprintf&amp;category=3"><b>fprintf(3S)</b></a>,
	<a href="/man.shtml?topic=grep&amp;category=1"><b>grep(1)</b></a>,
	<a href="/man.shtml?topic=lex&amp;category=1"><b>lex(1)</b></a>,
	<a href="/man.shtml?topic=sed&amp;category=1"><b>sed(1)</b></a><br>
A. V. Aho, B. W. Kernighan, P. J. Weinberger, The awk Programming Language, 
Addison-Wesley, 1988
</dd></dl>

<h2>ПРИМЕЧАНИЯ</h2>
<p><b>nawk</b> эквивалентен <b>awk</b>.</p>

<p>Входные пробелы не сохраняются в выходном потоке, если задействованы поля.</p>

<p>Нет явного преобразования чисел в строки и наоборот. Чтобы выражение 
рассматривалось как числовое, добавьте к нему 0; чтобы оно рассматривалось 
как строковое, конкатенируйте его с пустой строкой (<b>""</b>).</p>

<p align="center"><font size="-2">Copyright 1994 Novell, Inc.<br>
Copyright 2000 <a href="mailto:valera@openxs.kiev.ua">В. Кравчук</a>,
<a href="http://ln.com.ua/~openxs">OpenXS Initiative</a>, перевод на русский язык
</font></p> 

<br>
<form method="get" action="/search.shtml">
<font size="-1">
<font color="#555555">Поиск по тексту MAN-ов:&nbsp;</font><input size="30" name="words" value="awk" type="text">
<input name="restrict" value="/man" type="hidden">
<input value="Найти" type="submit">
</font>
<input name="method" value="and" type="hidden">
<input name="format" value="builtin-long" type="hidden">
<input name="sort" value="score" type="hidden">
</form>
<br>
<!--htdig_noindex-->
<noindex>
<br>


</noindex>
<!--/htdig_noindex-->


<!-- footer -->
<!--htdig_noindex-->
<br><br>
<div style="background-color: #E9EAD6; width:100%; height: 61px;">
<div style="margin-right: 20px; float:left; line-height: 61px; vertical-align: middle; margin-left: 10px; font-size: 120%;">
Спонсоры:
</div>
<div style="float:left; height: 60px;  line-height: 60px; margin-left: 20px;">
<a style="align: middle;" target="_blank" href="https://inferno.name/"><img src="/img/inferno2.png" alt="Inferno Solutions" height="57" width="200"></a>
</div>
<div style="float:right; height: 60px;  line-height: 60px;  margin-left: 15px;">
<a style="align: middle;" target="_blank" href="http://hoster.ru/?utm_source=site&amp;utm_medium=banner&amp;utm_campaign=opennet"><img src="/img/dh143x60t.png" alt="Hosting by Hoster.ru" height="60" width="143"></a>
</div>
<div style="float:right;  height: 60px;  line-height: 60px; vertical-align: middle;font-size: 120%;">
Хостинг:
</div>

</div>

<div style="clear: both;"></div>


<br>
<table class="ttxt" style="border-top: 3px solid #C9CaB6;">
<tbody><tr><td width="35%">
<a href="/cgi-bin/opennet/bookmark.cgi">Закладки на сайте</a><br>
<a href="/cgi-bin/opennet/bookmark.cgi?submit=add" target="blank_">Проследить за страницей</a>
</td>
<td align="RIGHT" width="65%">
Created&nbsp;1996-2021&nbsp;by <b><a href="/contact.shtml" title="email maxim.chirkov@gmail.com">Maxim&nbsp;Chirkov</a></b><br>
<a href="https://www.opennet.ru/add.shtml">Добавить</a>, <a href="https://www.opennet.ru/donate.shtml" style="color: #C00000;">Поддержать</a>, <a href="https://www.opennet.ru/banners2.shtml">Вебмастеру</a>
</td>
</tr>
</tbody></table>
<br><br>


<!--/htdig_noindex-->
<!-- end of footer -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-123449-1', 'auto');
    ga('send', 'pageview');
</script>




</body>
<!---------------------------------------------  0  ---------------------------------------------->
