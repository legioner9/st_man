
<!--+++++++++++++++++++++++++++++++++++++++++++  0  +++++++++++++++++++++++++++++++++++++++++++--->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Проект OpenNet: MAN rsync (1) Команды и прикладные программы пользовательского уровня (FreeBSD и Linux)</title><meta name="KeyWords" content="man, manual, MAN, системное руководство, linux, FreeBSD, OpenBSD, Solaris, ядро, программы, системный вызов, rsync"><meta name="viewport" content="width=device-width, initial-scale=1"></head>


<body link="#0000FF" vlink="#000080" text="#000000" bgcolor="#E3E4D0" alink="#FF00FF">
<link rel="stylesheet" href="/opennet4.css" type="text/css">
<!--htdig_noindex-->
<form method="get" action="https://www.opennet.ru/search.shtml">
<aside>
<div style="width: 100%; text-align: right; font-size: 70%; background: #E9EAD6; margin-bottom:-10px;">
Профиль: <b><a href="/~" rel="nofollow" title="/~ - сводная страница участника"><u>Аноним</u></a></b> (<a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=login">вход</a> | <a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=user_register">регистрация</a>)</div>

<table cellspacing="0" cellpadding="0" width="100%" border="0">
<tbody><tr>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" valign="BOTTOM" bgcolor="#E9EAD6" width="300">
<a href="https://www.opennet.ru/"><img src="/opennet2.gif" alt="The OpenNET Project" height="60" width="249" border="0"></a><br>
</td>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" bgcolor="#E9EAD6" align="CENTER" width="100">

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:10px;" bgcolor="#E9EAD6" align="CENTER" width="50%">
<table width="100%" border="0">
<tbody><tr>
<td width="22%">
 <a href="https://www.opennet.ru/opennews/" class="h"><b>НОВОСТИ</b></a> (<a href="https://www.opennet.ru/news/opennet.shtml" class="h">+</a>)
</td><td width="18%%">
  <a href="https://www.opennet.ru/mp/" class="h"><b>КОНТЕНТ</b></a>
</td><td width="14%">
  <a href="http://wiki.opennet.ru" class="h"><b>WIKI</b></a>
</td><td width="14%">
   <a href="https://www.opennet.ru/man.shtml" class="h"><b>MAN'ы</b></a>
</td><td width="16%">
   <a href="https://www.opennet.ru/forum/" class="h"><b>ФОРУМ</b></a>
</td><td width="16%">
<a href="https://www.opennet.ru/search.shtml" class="h" onmouseover="document.getElementById('form12').style.display='block';">Поиск</a>&nbsp;(<a href="https://www.opennet.ru/keywords/" class="h">теги</a>)
<input id="form12" style="display: none;" size="10" name="words" value="" title="для поиска в google наберите &quot;g фраза&quot;" type="text">
</td></tr>
</tbody></table>

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:5px;" bgcolor="#E9EAD6" align="right" width="20%">

<a href="https://www.opennet.ru/opennews/opennews_all_utf.rss"><img src="/img/rss.png" alt="RSS" title="RSS" height="16" width="16" border="0"></a>&nbsp;<a href="https://twitter.com/opennetru"><img src="/twitter.png" alt="twitter" title="Twitter" height="16" width="16" border="0"></a>&nbsp;<a href="https://vk.com/opennet"><img src="/img/vkontakte.gif" title="ВКонтакте" height="16" width="16" border="0"></a>&nbsp;<a href="https://zen.yandex.ru/opennet"><img src="/img/zen.gif" title="Yandex Zen" height="16" width="16" border="0"></a>&nbsp;<a href="https://www.facebook.com/OpenNet.News/"><img src="/img/facebook.gif" title="Facebook" height="16" width="16" border="0"></a>&nbsp;<a href="https://telegram.space/opennet_ru"><img src="/img/telegram2.png" title="Telegram" height="16" width="16" border="0"></a>
</td></tr></tbody></table>
</aside>

<style>
    .hdr_mobile {
	text-align: center; 
	display: none;
	margin: 0px;
	padding: 0px;
    }
</style>
<div class="hdr_mobile">
<div style="margin-left: auto; margin-right: auto; width: 100%; height: 70px; border:1px solid #b0b190; min-width: 360px; max-width: 600px; background: #E9EAD6 url('/back.gif') repeat-x bottom left;">
<div style="float:left; width: 249px; height: 60px; margin-top: 10px;">
<a href="https://www.opennet.ru"><img src="/opennet2_lite.gif" style="height: 60px; width: 249px; border: 1px;" alt="The OpenNET Project / Index page"></a>
</div>
<div style="float: left; text-align: center; height: 70px; width: 331px; padding: 5px; margin-left: 10px;">
<br><small>[ <a href="/opennews/">новости</a>&nbsp;/<a href="/opennews/?full_lines=15&amp;lines=15&amp;mid_lines=00">+++</a> | <a href="/forum/">форум</a> | <a href="http://wiki.opennet.ru">wiki</a> | <a href="/keywords/">теги</a>
| <a href="tg://resolve?domain=opennet_ru"><img src="/img/telegram2.png" title="Telegram" style="margin-bottom: -4px;" height="16" width="16" border="0"></a>
]</small>
</div>
</div>
</div>
<div style="clear: both;"></div>


<div style="float: left; width: 279; text-align: left;padding-right: 60px;" id="adv">
</div>
<div style="padding-top: 0px;position:absolute;left:50%;margin-left:-235px;width:470px;" id="adv2">
</div>
<div style="width: 279;float: right;" id="adv3">
</div>
<div style="clear: both;"></div>
<br>
</form>
<!--/htdig_noindex-->

<center><h3><font color="#000088">Интерактивная система просмотра системных руководств (man-ов)</font></h3></center>
<form method="GET" action="/man.shtml"> 
<table cellspacing="0" cellpadding="1" bgcolor="#B0B190" align="center" width="600" border="0">
<tbody><tr>
<td valign="TOP">

<table cellspacing="0" cellpadding="0" bgcolor="#E9EAD6" align="center" width="100%" border="0">
<tbody><tr><td>&nbsp;<font color="#555555">Тема</font></td><td><font color="#555555">Набор</font></td><td><font color="#555555">Категория</font></td><td>&nbsp;</td></tr>
<tr><td>

&nbsp;<input size="20" name="topic" value="rsync" type="text"></td><td><select name="russian">
<option value="4">Solaris man
</option><option value="1">FreeBSD man
</option><option value="3">Разные man
</option><option value="0" selected="">Русские man
</option><option value="2">Linux man
</option><option value="5">POSIX man
</option></select></td>
<td><select size="1" name="category">
	  <option value="" selected="">All
	  </option><option value="1">1
	  </option><option value="2">2
	  </option><option value="3">3
	  </option><option value="4">4
	  </option><option value="5">5
	  </option><option value="6">6
	  </option><option value="7">7
	  </option><option value="8">8
	  </option><option value="9">9
</option></select></td>

<td><input name="submit" value="Показать man" type="submit"></td></tr>
<script async="" src="https://www.google-analytics.com/analytics.js"></script><script language="JavaScript" src="/print.js"></script>
<tr><td colspan="4" align="left">&nbsp;[<a href="/man.shtml">Cписок руководств</a> | <a href="#" onclick="pr('none');">Печать</a>]</td></tr>
</tbody></table>
</td></tr></tbody></table>
</form>
<h3></h3><font size="+2">rsync (1)</font><hr><li>&gt;&gt; <a href="/man.shtml?topic=rsync&amp;category=1&amp;russian=0"><u>rsync</u></a> (1) <font color="#555555"> ( Русские man: Команды и прикладные программы пользовательского уровня )</font></li><li> <a href="/man.shtml?topic=rsync&amp;category=1&amp;russian=2"><u>rsync</u></a> (1) <font color="#555555"> ( Linux man: Команды и прикладные программы пользовательского уровня )</font></li><li><font color="#555555">Ключ <a href="/keywords/rsync.html"><u>rsync</u></a> обнаружен в базе ключевых слов.</font></li>
<a name="lbAB">&nbsp;</a>
<h2>НАЗВАНИЕ</h2>

rsync
-
более быстрая и гибкая замена rcp
<a name="lbAC">&nbsp;</a>
<h2>СИНТАКСИС</h2>

<p>

rsync [OPTION]... SRC [SRC]... [USER@]HOST:DEST
</p><p>

rsync [OPTION]... [USER@]HOST:SRC DEST
</p><p>

rsync [OPTION]... SRC [SRC]... DEST
</p><p>

rsync [OPTION]... [USER@]HOST::SRC [DEST]
</p><p>

rsync [OPTION]... SRC [SRC]... [USER@]HOST::DEST
</p><p>

rsync [OPTION]... <a href="rsync://[USER@]HOST[:PORT]/SRC">rsync://[USER@]HOST[:PORT]/SRC</a> [DEST]
</p><p>

<a name="lbAD">&nbsp;</a>
</p><h2>ОПИСАНИЕ</h2>

<p>

Утилита rsync ведет себя во многом подобно rcp с той разницей, что
имеет гораздо больше параметров и использует протокол удаленного
обновления (remote-update protocol) для значительного ускорения
передачи файлов, которые уже существуют в месте назначения.
</p><p>

Благодаря этому протоколу rsync передает только различия между двумя
наборами файлов через сетевое соединение, используя эффективный
алгоритм поиска контрольных сумм (cheksum-search algorithm), описанный
в сопровождающей этот пакет документации.
</p><p>

Вот некоторые дополнительные особенности rsync:
</p><p>

</p><dl compact="">
<dt>o</dt><dd>
поддержка копирования ссылок, файлов устройств, атрибутов владельца,
группы и прав
</dd><dt>o</dt><dd>
параметры исключения путей exclude и exclude-from подобно GNU tar
</dd><dt>o</dt><dd>
CVS-подобный режим исключения для определенных файлов, которые
игнорируются тем же образом, каким их должен игнорировать CVS
</dd><dt>o</dt><dd>
может прозрачно использовать любую оболочку удаленного доступа,
включая rsh или ssh
</dd><dt>o</dt><dd>
не нуждается в привилегиях суперпользователя root
</dd><dt>o</dt><dd>
конвейеризация передач файлов для уменьшения задержек
</dd><dt>o</dt><dd>
поддержка анонимного сервера rsync или сервера rsync с аутентификацией
(идеально для зеркалирования)
</dd></dl>
<p>

<a name="lbAE">&nbsp;</a>
</p><h2>ГЛАВНОЕ</h2>

<p>

Относительно rsync существует восемь способов его использования:
</p><p>

</p><dl compact="">
<dt>o</dt><dd>
Для локального копирования файлов, когда ни исходный SRC, ни конечный
DEST пути не содержат двоеточия <b>:</b> .
</dd><dt></dt><dd>
</dd><dt>o</dt><dd>
Для копирования локальных файлов на удаленный хост, используя
программу удаленной оболочки  в качестве транспорта (например, rsh или
ssh).
В этом случае конечный путь DEST содержит одно двоеточие <b>:</b> как
разделитель адреса удаленного хоста и пути файловой системы на нем.
</dd><dt></dt><dd>
</dd><dt>o</dt><dd>
Для копирования с удаленного хоста в локальные файлы, используя
программу удаленной оболочки.
Это происходит, если исходный путь SRC содержит двоеточие <b>:</b> .
</dd><dt></dt><dd>
</dd><dt>o</dt><dd>
Для копирования с удаленного rsync-сервера в локальные файлы, когда
исходный путь SRC содержит либо двойное двоеточие <b>::</b> , либо он
сформирован в виде URL, начинающийся с <b>rsync://</b> .
</dd><dt></dt><dd>
</dd><dt>o</dt><dd>
Для копирования локальных файлов на удаленный rsync-сервер.
В этом случае конечный путь DEST содержит <b>::</b> или является URL'ом
вида <b>rsync://</b> .
</dd><dt></dt><dd>
</dd><dt>o</dt><dd>
Для копирования с удаленной машины с использованием удаленной оболочки
как транспорта и удаленного rsync-сервера.
Это происходит, когда исходный путь SRC содержит разделителем двойное
двоеточие <b>::</b> и установлен параметр <b>--rsh=</b><i>COMMAND</i> (или
<b>-e "</b><i>COMMAND</i><b>"</b>).
</dd><dt></dt><dd>
</dd><dt>o</dt><dd>
Для копирования с локальной машины на удаленную с использованием
удаленной оболочки как транспорта и удаленного rsync-сервера.
Это происходит, когда конечный путь DEST содержит разделителем двойное
двоеточие <b>::</b> и установлен параметр <b>--rsh=</b><i>COMMAND</i> (или
<b>-e "</b><i>COMMAND</i><b>"</b>).
</dd><dt></dt><dd>
</dd><dt>o</dt><dd>
Для получения списка файлов на удаленной машине.
Это происходит, если не указать (оставить пустым) локальный путь.
</dd></dl>
<p>

Обратите внимание, что во всех случаях (кроме запроса списка) как
минимум один путь (либо исходный SRC, либо конечный DEST) должен быть
локальным.
</p><p>

<a name="lbAF">&nbsp;</a>
</p><h2>УСТАНОВКА</h2>

<p>

За инструкциями по установке обращайтесь в файл README.
</p><p>

Для удаленных передач rsync использует ssh для выполнения
коммуникаций с удаленными хостами, поэтому сразу после установки
Вы можете использовать rsync относительно любой машины, к которой
возможен доступ через ssh (также как и к тем, где запущен
rsync-сервер).
Но можно сконфигурировать использование другой оболочки, например, rsh
или remsh.
</p><p>

Вы можете указать альтернативу rsh либо с помощью параметра командной
строки <b>-e</b>, либо с помощью переменной окружения <i>RSYNC_RSH</i>.
</p><p>

Обратите внимание, что rsync должна быть установлена на обоих
хостах, которые вовлечены в операцию копирования.
</p><p>

<a name="lbAG">&nbsp;</a>
</p><h2>ИСПОЛЬЗОВАНИЕ</h2>

<p>

Применение rsync подобно rcp. Вы должны указать исходный путь и
конечный путь назначения, один из которых может быть на удаленном
хосте.
</p><p>

Возможно, лучший способ объяснить синтаксис - это привести примеры:
</p><p>

</p><dl compact=""><dt></dt><dd>
rsync *.c foo:src/
</dd></dl>

<p>

Копирует все файлы по шаблону *.c из текущего каталога в каталог
src , расположенный на машине foo .
Если какой-либо из файлов уже существует, rsync использует протокол
удаленного обновления для передачи только различий.
За деталями протокола обращайтесь к соответствующей документации.
</p><p>

</p><dl compact=""><dt></dt><dd>
rsync -avz foo:src/bar /data/tmp
</dd></dl>

<p>

Копирует все файлы рекурсивно из каталога src/bar с машины foo в
локальный каталог /data/tmp/bar .
Передача файлов происходит в "архивном" режиме, который гарантирует
сохранение символьных ссылок, файлов-устройств, атрибутов, разрешений
и т.д.
Кроме того, используется сжатие для уменьшения объема непосредственно
передаваемых данных.
</p><p>

</p><dl compact=""><dt></dt><dd>
rsync -avz foo:src/bar/ /data/tmp
</dd></dl>

<p>

Слэш в окончании исходного пути меняет поведение при копировании так,
что все файлы копируются в каталог /data/tmp без создания
дополнительного уровня вложения каталогов.
Завершающий исходный путь слэш означает "копировать содержимое этого
каталога".
Без завершающего слэша - "копировать каталог".
В обоих случаях (со слэшем и без него) атрибуты содержащего файлы
каталога копируются на содержащий их копии каталог назначения.
Другими словами, в каждом последующем примере команды копируют файлы
одинаково, включая атрибуты /dest/foo :
</p><p>

</p><dl compact=""><dt></dt><dd>
rsync -avz /src/foo /dest
</dd></dl>

<dl compact=""><dt></dt><dd>
rsync -avz /src/foo/ /dest/foo
</dd></dl>

<p>

Вы также можете использовать rsync в режиме только локального
копирования, когда ни один из путей НЕ содержит двоеточия <b>:</b> .
Тогда rsync ведет себя как улучшенная команда копирования.
</p><p>

</p><dl compact=""><dt></dt><dd>
rsync somehost.mydomain.com::
</dd></dl>

<p>

Запрашивает весь список анонимно-доступных модулей на машине
somehost.mydomain.com.
(Смотрите следующую секцию на предмет деталей.)
</p><p>

<a name="lbAH">&nbsp;</a>
</p><h2>ПОДКЛЮЧЕНИЕ К RSYNC-СЕРВЕРУ</h2>

<p>

rsync можно использовать без обращения к удаленной оболочке как
транспорту.
В этом случае Вы будете подключаться к удаленному rsync-серверу,
запущенному на 873 порту TCP.
</p><p>

Вы можете осуществлять соединение через web-прокси, устанавливая
переменную окружения <i>RSYNC_PROXY</i>, равной паре
<b>hostname:port</b>, соответствующей Вашему web-прокси.
В этом случае Ваш web-прокси должен разрешать проксирование 873 порта.
</p><p>

Использование rsync-сервера аналогично варианту с удаленной оболочкой
за исключением:
</p><p>

</p><dl compact="">
<dt>o</dt><dd>
Вы используете двойное двоеточие <b>::</b> , а не одинарное, как
разделитель имени хоста и пути.
</dd><dt></dt><dd>
</dd><dt>o</dt><dd>
удаленный сервер может выводить сообщение дня (motd), когда Вы
подсоединяетесь.
</dd><dt></dt><dd>
</dd><dt>o</dt><dd>
если Вы опускаете указание пути на удаленном сервере, то он показывает
список доступных путей.
</dd><dt></dt><dd>
</dd><dt>o</dt><dd>
если Вы опускаете локальный путь копирования, то Вам предоставляется
список указанных файлов на удаленном сервере.
</dd></dl>
<p>

Некоторые пути на удаленном сервере могут быть доступными только по
аутентификации.
Тогда вы получите приглашение ввести пароль при подключении.
Можно избежать запроса пароля, предварительно выставив переменную
<i>RSYNC_PASSWORD</i> в значение с необходимым паролем или указав
параметр в командной строке <b>--password-file</b> .
Это удобно при использовании rsync в скриптах.
</p><p>

ВНИМАНИЕ: На некоторых системах переменные окружения видимы всеми
пользователями.
На таких системах рекомендуется использовать <b>--password-file</b> .
</p><p>

<a name="lbAI">&nbsp;</a>
</p><h2>ПОДКЛЮЧЕНИЕ К RSYNC-СЕРВЕРУ ЧЕРЕЗ УДАЛЕННУЮ ОБОЛОЧКУ</h2>

<p>

Иногда бывает полезно при подключении к rsync-серверу передавать
файлы, используя удаленную оболочку как транспорт.
Это особенно полезно, если нужно подключиться к удаленной машине через
ssh (для шифрации или в обход сетевого экрана), но при этом сохранить
доступ к функциональным особенностям rsync-сервера (см. <b>ЗАПУСК
RSYNC-СЕРВЕРА ПОВЕРХ УДАЛЕННОЙ ОБОЛОЧКИ</b>).
</p><p>

С пользовательской точки зрения этот способ такой же, как и
подключение к rsync-серверу, за исключением того, что необходимо явно
указать программу удаленной оболочки в командной строке параметром
<b>--rsh=</b><i>COMMAND</i>.
(Установка <i>RSYNC_RSH</i> в окружении не активизирует эту
функциональность.)
</p><p>

В порядке необходимости различать пользователя удаленной оболочки и
пользователя удаленного rsync-сервера Вы можете использовать '-l
user' в указании программы оболочки:
</p><p>

</p><dl compact=""><dt></dt><dd>
rsync -av --rsh="ssh -l ssh-user" <a href="mailto:rsync-user@host">rsync-user@host</a>::module[/path] local-path
</dd></dl>

<p>

Здесь "ssh-user" имеет значение на уровне ssh; "rsync-user"
проверяется относительно rsyncd.conf на удаленной стороне.
</p><p>

<a name="lbAJ">&nbsp;</a>
</p><h2>ЗАПУСК RSYNC СЕРВЕРА</h2>

<p>

rsync-сервер конфигурируется с помощью специального файла, которым по
умолчанию выбирается /etc/rsyncd.conf, кроме тех случаев, когда
rsync запускается поверх удаленной оболочки и не от root.
В этом случае выбирается rsyncd.conf из текущего каталога на
удаленной машине (обычно $HOME).
Смотрите страницы руководства по <b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=rsyncd.conf&amp;category=5">rsyncd.conf</a></b>(5) на предмет деталей.
</p><p>

<a name="lbAK">&nbsp;</a>
</p><h2>ЗАПУСК RSYNC-СЕРВЕРА ПОВЕРХ УДАЛЕННОЙ ОБОЛОЧКИ</h2>

<p>

Некоторые конфигурационные параметры не будут доступны, если удаленный
пользователь не root (chroot, setuid/setgid и т.д.).
Нет необходимости в конфигурировании inetd или включении порта
rsync-сервера в список доступных сетевых служб, если rsync-сервер
запущен только через программу удаленной оболочки.
</p><p>

Для запуска rsync-сервера с ssh-ключом ограниченного применения
см. соответствующий раздел <b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=rsyncd.conf&amp;category=5">rsyncd.conf</a></b>(5).
</p><p>

<a name="lbAL">&nbsp;</a>
</p><h2>ПРИМЕРЫ</h2>

<p>

Далее приведено несколько примеров, как использовать rsync.
</p><p>

Для резервного архивирования домашнего каталога моей жены, который
содержит большие MS Word файлы и почтовые папки, я использую задание
для cron'а, которое запускается
</p><p>

</p><dl compact=""><dt></dt><dd>
rsync -Cavz . arvidsjaur:backup
</dd></dl>

<p>

каждую ночь через PPP-соединение для дублирования каталога на мою
машину "arvidsjaur".
</p><p>

Для синхронизации моего дерева samba-исходников я использую Makefile-указания:
</p><p>

</p><dl compact=""><dt></dt><dd>
get:
<br>

rsync -avuzb --exclude '*~' samba:samba/ .
<p>

put:
<br>

rsync -Cavuzb . samba:samba/
</p><p>

sync: get put 
</p></dd></dl>

<p>

Это позволяет мне синхронизировать с CVS-каталогом на другом конце
соединения.
Затем я осуществляю cvs-операции на удаленной машине, что сохраняет
мне массу времени, т.к. передача по удаленному cvs-протоколу не
очень эффективна.
</p><p>

Я зеркалирую каталог между моими "старым" и "новым" ftp-сайтами
командой
</p><p>

</p><dl compact=""><dt></dt><dd>
rsync  -az  -e  ssh  --delete  ~ftp/pub/samba/
nimbus:"~ftp/pub/tridge/samba"
</dd></dl>

<p>

это запускается cron'ом несколько раз в день.
</p><p>

<a name="lbAM">&nbsp;</a>
</p><h2>СВОДКА ПАРАМЕТРОВ</h2>

<p>

Далее краткий обзор параметров, понимаемых rsync.
Пожалуйста, обращайтесь к более детальному описанию чуть ниже.
</p><p>

</p><pre></pre>

<dl compact="">
<dt><b>-v, --verbose</b></dt><dd>
увеличить уровень подробностей
</dd><dt><b>-q, --quiet</b></dt><dd>
уменьшить уровень подробностей
</dd><dt><b>-c, --checksum</b></dt><dd>
проверять контрольные суммы
</dd><dt><b>-a, --archive</b></dt><dd>
архивный режим, эквивалент для <b>-rlptgoD</b>
</dd><dt><b>-r, --recursive</b></dt><dd>
рекурсивно входить в подкаталоги
</dd><dt><b>    --no-recursive</b></dt><dd>
отключить действие <b>--recursive</b>
</dd><dt><b>    --no-implied-dirs</b></dt><dd>
не передавать затрагиваемые параметром <b>-R</b> каталоги
</dd><dt><b>-R, --relative</b></dt><dd>
использовать относительные пути
</dd><dt><b>-b, --backup</b></dt><dd>
создавать резервную копию (см. <b>--suffix</b> и <b>--backup-dir</b>)
</dd><dt><b>    --backup-dir</b></dt><dd>
создавать резервную копию в этом каталоге
</dd><dt><b>    --suffix=</b><i>SUFFIX</i></dt><dd>
суффикс для резервной копии (по умолчанию ~ в отсутствие --backup-dir)
</dd><dt><b>-u, --update</b></dt><dd>
только обновление (не переписывает более новые файлы)
</dd><dt><b>-l, --links</b></dt><dd>
копировать символьные ссылки как символьные ссылки
</dd><dt><b>-L, --copy-links</b></dt><dd>
копировать то, на что ссылаются символьные ссылки
</dd><dt><b>    --copy-unsafe-links</b></dt><dd>
копировать ccылки за пределы исходного дерева каталогов
</dd><dt><b>    --safe-links</b></dt><dd>
не копировать любые символьные ссылки, которые ссылаются за пределы
дерева каталогов назначения
</dd><dt><b>-H, --hard-links</b></dt><dd>
сохранять жесткие ссылки
</dd><dt><b>-p, --perms</b></dt><dd>
сохранять разрешения
</dd><dt><b>-o, --owner</b></dt><dd>
сохранять владельца (только root)
</dd><dt><b>-g, --group</b></dt><dd>
сохранять группу
</dd><dt><b>-D, --devices</b></dt><dd>
сохранять файлы устройств (только root)
</dd><dt><b>-t, --times</b></dt><dd>
сохранять время
</dd><dt><b>-S, --sparse</b></dt><dd>
эффективно обработать фрагментированные файлы
</dd><dt><b>-n, --dry-run</b></dt><dd>
показать, что скопируется
</dd><dt><b>-W, --whole-file</b></dt><dd>
копировать весь файл без rsync-алгоритма
</dd><dt><b>    --no-whole-file</b></dt><dd>
отключить <b>--whole-file</b>
</dd><dt><b>-x, --one-file-system</b></dt><dd>
не выходить за пределы файловой системы
</dd><dt><b>-B, --block-size=</b><i>SIZE</i></dt><dd>
размер блока контрольных сумм (по умолчанию 700)
</dd><dt><b>-e, --rsh=</b><i>COMMAND</i></dt><dd>
указывает замену программу удаленной оболочки
</dd><dt><b>    --rsync-path=</b><i>PATH</i></dt><dd>
указывает путь к rsync на удаленной машине
</dd><dt><b>    --existing</b></dt><dd>
только обновить те файлы, которые уже существуют
</dd><dt><b>    --ignore-existing</b></dt><dd>
пропускать те файлы, которые уже существуют на приемной стороне
</dd><dt><b>    --delete</b></dt><dd>
удалять файлы, которых нет на передающей стороне
</dd><dt><b>    --delete-excluded</b></dt><dd>
также удалять те файлы, которые исключены из списка копирования
</dd><dt><b>    --delete-after</b></dt><dd>
удалять после копирования, а не до него
</dd><dt><b>    --ignore-errors</b></dt><dd>
удалить даже при наличии ошибок ввода/вывода
</dd><dt><b>    --max-delete=</b><i>NUM</i></dt><dd>
не удалять больше, чем <i>NUM</i> файлов
</dd><dt><b>    --partial</b></dt><dd>
сохранять частично переданные файлы
</dd><dt><b>    --force</b></dt><dd>
принудительно удалять даже не пустые каталоги
</dd><dt><b>    --numeric-ids</b></dt><dd>
не преобразовывать  значения uid/gid по именам пользователя/группы
</dd><dt><b>    --timeout=</b><i>TIME</i></dt><dd>
установить время ожидания ввода/вывода в секундах
</dd><dt><b>-I, --ignore-times</b></dt><dd>
отключить "быструю проверку" файлов по времени модификации и
размеру
</dd><dt><b>    --size-only</b></dt><dd>
отключить проверку времени модификации при "быстрой проверке"
файлов (проверять только размер)
</dd><dt><b>    --modify-window=</b><i>NUM</i></dt><dd>
сравнивать времена модификации файлов с пониженной точностью
</dd><dt><b>-T, --temp-dir=</b><i>DIR</i></dt><dd>
каталог для временных файлов
</dd><dt><b>    --compare-dest=</b><i>DIR</i></dt><dd>
также сравнивать принятые файлы относительно каталога <i>DIR</i>
</dd><dt><b>    --link-dest=</b><i>DIR</i></dt><dd>
создавать жесткие ссылки в каталоге <i>DIR</i> на не изменявшиеся файлы
</dd><dt><b>-P</b></dt><dd>
эквивалент для <b>--partial --progress</b>
</dd><dt><b>-z, --compress</b></dt><dd>
сжимать поток передачи данных
</dd><dt><b>-C, --cvs-exclude</b></dt><dd>
автоматический пропуск файлов тем же способом, что и в cvs
</dd><dt><b>    --exclude=</b><i>PATTERN</i></dt><dd>
исключить файлы, соответствующие шаблону <i>PATTERN</i>
</dd><dt><b>    --exclude-from=</b><i>FILE</i></dt><dd>
шаблоны исключения брать из файла <i>FILE</i>
</dd><dt><b>    --include=</b><i>PATTERN</i></dt><dd>
не исключать файлы по шаблону <i>PATTERN</i>
</dd><dt><b>    --include-from=</b><i>FILE</i></dt><dd>
не исключать файлы по шаблонам в файле <i>FILE</i>
</dd><dt><b>    --files-from=</b><i>FILE</i></dt><dd>
читать имена файлов для копирования из файла <i>FILE</i>
</dd><dt><b>-0, --from0</b></dt><dd>
нуль - разделитель всех списков файлов
</dd><dt><b>    --version</b></dt><dd>
вывести номер версии
</dd><dt><b>    --daemon</b></dt><dd>
запустить как rsync-демон
</dd><dt><b>    --no-detach</b></dt><dd>
не отключаться от родительского процесса
</dd><dt><b>    --address=</b><i>ADDRESS</i></dt><dd>
слушать на указанном адресе
</dd><dt><b>    --config=</b><i>FILE</i></dt><dd>
указать другой <b>rsyncd.conf</b> файл
</dd><dt><b>    --port=PORT</b></dt><dd>
слушать другой порт
</dd><dt><b>    --blocking-io</b></dt><dd>
использовать блочный ввод/вывод для удаленной оболочки
</dd><dt><b>    --no-blocking-io</b></dt><dd>
отключить <b>--blocking-io</b>
</dd><dt><b>    --stats</b></dt><dd>
выдавать статистику по передаче файлов
</dd><dt><b>    --progress</b></dt><dd>
показать % выполнения во время передачи
</dd><dt><b>    --log-format=</b><i>FORMAT</i></dt><dd>
формат лог-файла передач
</dd><dt><b>    --password-file=</b><i>FILE</i></dt><dd>
читать пароль из  файла <i>FILE</i>
</dd><dt><b>    --bwlimit=</b><i>KBPS</i></dt><dd>
ограничить скорость ввода/вывода, Кбайт/с
</dd><dt><b>    --read-batch=</b><i>PREFIX</i></dt><dd>
для пакетного режима читать набор файлов с префиксом <i>PREFIX</i>
</dd><dt><b>    --write-batch=</b><i>PREFIX</i></dt><dd>
для пакетного режима записать набор файлов с префиксом <i>PREFIX</i>
</dd><dt><b>-h, --help</b></dt><dd>
показать помощь

</dd></dl>
<p>

<a name="lbAN">&nbsp;</a>
</p><h2>ПАРАМЕТРЫ</h2>

<p>

rsync использует соглашение о длинных именах параметров GNU.
Многие из параметров командной строки имеют два варианта: один -
короткий, а другой - длинный.
Ниже это отражено в разделении запятой двух вариантов.
Некоторые параметры имеют только длинный вариант.
Знак '=' для параметров с дополнительным значением необязателен и
может быть заменен на пробел.
</p><p>

</p><dl compact="">
<dt><b>-h, --help</b></dt><dd>
Печатает короткую подсказку, описывающую доступные параметры rsync
</dd><dt></dt><dd>
</dd><dt><b>--version</b></dt><dd>
Печатает номер версии rsync и завершается
</dd><dt></dt><dd>
</dd><dt><b>-v, --verbose</b></dt><dd>
Этот параметр увеличивает сумму подробностей, которые выводятся в течение
передачи.
По умолчанию, rsync работает молча.
Один -v будет иметь следствием выдачу списка переданных файлов и
короткий итог в конце.
Два -v раскрывают детали о пропущенных файлах и выдают несколько
больше информации в завершение.
Большее<tt>&nbsp;</tt>число может понадобится только при отладке rsync.<br>
</dd><dt></dt><dd>
</dd><dt><b>-q, --quiet</b></dt><dd>
Уменьшает сумму подробностей о передаче, преимущественно, сообщения от
удаленного сервера.
Этот параметр полезен при вызове из cron.
</dd><dt></dt><dd>
</dd><dt><b>-I, --ignore-times</b></dt><dd>
Обычно rsync пропускает файлы, чей размер и время модификации
идентичны.
Этот параметр отключает  такое  поведение  "быстрой проверки".
</dd><dt></dt><dd>
</dd><dt><b>--size-only</b></dt><dd>
Обычно rsync пропускает файлы, чей размер и время модификации
идентичны.
С <b>--size-only</b> файлы будут пропускаться, если их размер одинаков,
независимо от времени модификации.
Это полезно при использовании rsync сразу после работы другой
зеркалирующей системы, которая не сохранила точно времена.
</dd><dt></dt><dd>
</dd><dt><b>--modify-window</b></dt><dd>
При сравнение двух меток времени rsync рассматривает эти метки
равными, если они расходятся в пределах значения
<i>modify_window</i>.
Обычно это значение ноль, но Вы можете найти полезным установку его в
большую величину в некоторых случаях.
На практике, при передаче на файловую систему Windows FAT, которая не
может представлять время с точностью до секунды,
<i>--modify_window=1</i> весьма полезна.
</dd><dt></dt><dd>
</dd><dt><b>-c, --checksum</b></dt><dd>
Принуждает на передающей стороне подсчитывать контрольные суммы всех
файлов, используя 128-битный алгоритм MD4 перед передачей.
Контрольная сумма затем проверяется на приемной стороне для того,
чтобы пропускать передачи уже существующих файлов с одинаковыми
размером и контрольной суммой.
Этот параметр может приводить к некоторому замедлению.
</dd><dt></dt><dd>
</dd><dt><b>-a, --archive</b></dt><dd>
Эквивалентно набору <b>-rlptgoD</b>.
Это быстрый способ указать, что Вам нужна рекурсия и Вы хотите
сохранить почти все.
</dd><dt></dt><dd>
Однако заметьте, что <b>-a</b> <b>не сохраняет жесткие ссылки</b>, потому что поиск
многосвязных файлов дорог.
Вам придется отдельно указывать <b>-H</b>.
</dd><dt><b>-r, --recursive</b></dt><dd>
Указывает  rsync  копировать каталоги рекурсивно.
Без указания этого rsync совсем не будет копировать каталоги.
</dd><dt></dt><dd>
</dd><dt><b>-R, --relative</b></dt><dd>
Использовать относительные пути.
Это значит, что посылаются полные пути, указанные в командной строке,
а не последние части имен файлов.
На практике это полезно, когда Вам нужно послать несколько различных
каталогов за раз.
Например, если указать команду:
</dd><dt></dt><dd>
<p>
</p><pre>
rsync foo/bar/foo.c remote:/tmp/
</pre>

<p>
</p><p>
</p></dd><dt></dt><dd>
то она создаст файл foo.c в /tmp на удаленной машине.
Если вместо этого указать
</dd><dt></dt><dd>
<p>
</p><pre>
rsync -R foo/bar/foo.c remote:/tmp/
</pre>

<p>
</p><p>
</p></dd><dt></dt><dd>
то файл создастся в /tmp/foo/bar/foo.c на удаленной машине -
полный путь сохранится.
</dd><dt></dt><dd>
</dd><dt><b>--no-relative</b></dt><dd>
Выключает параметр <b>--relative</b>.
Это нужно только если Вы хотите использовать параметр <b>--files-from</b>
без подразумеваемого им поведения с включенным параметром
<b>--relative</b>.
</dd><dt></dt><dd>
</dd><dt><b>--no-implied-dirs</b></dt><dd>
В комбинации с <b>--relative</b> все затрагиваемые каталоги в каждом
пути явно не копируются как часть процесса передачи.
Это делает передачу более оптимальной и также позволяет иметь непарные
(см. пример ниже) символьные ссылки в подразумеваемых передачей
путях.
Например, если передается файл "/path/foo/file" с параметром
-R, то по умолчанию rsync следит, чтобы "/path" и
"/path/foo" в точности соответствовали каталогам/ссылкам на
приемной стороне.
Параметр <b>--no-implied-dirs</b> позволяет игнорировать
несоответствие, когда "/path" - реальный каталог на одной
стороне и символьная ссылка на другой.
rsync не пытается с этим параметром что-либо менять в этом случае.
</dd><dt></dt><dd>
</dd><dt><b>-b, --backup</b></dt><dd>
С этим параметром существовавшие до передачи файлы на приемной стороне
переименовываются, как только соответствующий файл передан или
удален.
Вы можете контролировать, куда перемещаются файлы и какой суффикс
(если нужно) добавляется к имени, используя параметры
<b>--backup-dir</b> и <b>--suffix</b>.
</dd><dt></dt><dd>
</dd><dt><b>--backup-dir=</b><i>DIR</i></dt><dd>
В комбинации с <b>--backup</b> указывает каталог, куда сохранять
резервные копии.
Это весьма полезно для инкрементального резервирования.
Вы можете дополнительно указать суффикс с помощью <b>--suffix</b>
(иначе резервные копии файлов будут сохранять свои исходные имена).
</dd><dt></dt><dd>
</dd><dt><b>--suffix=</b><i>SUFFIX</i></dt><dd>
Этот параметр позволяет указать суффикс, отличный от суффикса по умолчанию, для
резервных копий файлов при установленном <b>--backup</b> (<b>-b</b>).
По умолчанию этот суффикс установлен в ~ без установки
<b>--backup-dir</b>, установка которого сбрасывает этот суффикс в пустую
строку.
</dd><dt></dt><dd>
</dd><dt><b>-u, --update</b></dt><dd>
Указывает пропускать любые файлы, уже существующие на приемной стороне
с более поздней датой, чем у исходных файлов.
</dd><dt></dt><dd>
</dd><dt><b>-l, --links</b></dt><dd>
Если обнаружена символьная ссылка, то она же создается и на приемной
стороне.
</dd><dt></dt><dd>
</dd><dt><b>-L, --copy-links</b></dt><dd>
Если обнаружена символьная ссылка, то на приемную сторону копируется
файл, на который она указывает, а не такая же символьная ссылка.
</dd><dt></dt><dd>
</dd><dt><b>--copy-unsafe-links</b></dt><dd>
Копирует все объекты за пределами <i>исходного</i> дерева каталогов, на
которые ссылаются символьные ссылки.
Абсолютные символьные ссылки, а также, при выставленном
<b>--relative</b>, любые символьные ссылки в пределах <i>исходного</i>
дерева каталогов, рассматриваются как обычные файлы.
</dd><dt></dt><dd>
</dd><dt><b>--safe-links</b></dt><dd>
Указывает игнорировать любую символьную ссылку, которая относится к
объекту за пределами <i>конечного</i> дерева каталогов.
Все абсолютные ссылки также пропускаются.
Использование этого параметра в комбинации с <b>--relative</b> может
дать неожиданные результаты.
</dd><dt></dt><dd>
</dd><dt><b>-H, --hard-links</b></dt><dd>
Указывает пересоздать жесткие ссылки на конечной стороне в
соответствии с тем, что имеется на исходной.
Без этого параметра жесткие ссылки обрабатываются как обычные файлы.
</dd><dt></dt><dd>
Обратите внимание, что rsync может обнаруживать жесткие ссылки, только
если обе части ссылки попадают в список предназначенных к передаче
файлов.
</dd><dt></dt><dd>
С этим параметром передача может быть довольно-таки медленной, так что
пользуйтесь им только при необходимости.
</dd><dt></dt><dd>
</dd><dt><b>-W, --whole-file</b></dt><dd>
Этот параметр отключает дифференциальный алгоритм rsync'а и с ним весь
файл передается как есть, целиком.
Передача может происходить быстрее с этим параметром, если полоса
пропускания между исходной и конечной машинами шире, чем полоса
пропускания доступа к диску (особенно, если "диск" в
действительности сетевая файловая система).
Этот параметр включен по умолчанию, если и исходная, и конечная цели
находятся локально.
</dd><dt></dt><dd>
</dd><dt><b>--no-whole-file</b></dt><dd>
Выключает действие параметра <b>--whole-file</b>, если последний
включен по умолчанию.
</dd><dt></dt><dd>
</dd><dt><b>-p, --perms</b></dt><dd>
Копирует все права на приемную сторону точь в точь с оригиналом.
</dd><dt></dt><dd>
Без указания этого параметра каждый <i>новый</i> файл получает те права
доступа, что имеет исходный с учетом umask, действующей на
<i>приемной</i> стороне, в то время как все другие (включая
обновляемые) сохраняют свои уже существующие разрешения (это то же
поведение, что имеют другие утилиты копирования файлов, такие как
cp).
</dd><dt></dt><dd>
</dd><dt><b>-o, --owner</b></dt><dd>
Копирует атрибуты владельца на приемную сторону в точности с
оригиналом.
На большинстве систем только супер-пользователь имеет право
устанавливать владельца файла.
Нужно заметить, что если удаленный демон действует в chroot-окружении,
то подразумевается наличие параметра <b>--numeric-ids</b>, потому что
на удаленной стороне в этом случае нет доступа к именам пользователей
в /etc/passwd.
</dd><dt></dt><dd>
</dd><dt><b>-g, --group</b></dt><dd>
Копирует атрибуты группы на приемную сторону в точности с
оригиналом.
Если удаленная сторона не действует из-под супер-пользователя,
то сохранятся только те значения групп, членом которых является
пользователь приемной стороны (имеет значение имя группы, а не ее
id).
</dd><dt></dt><dd>
</dd><dt><b>-D, --devices</b></dt><dd>
Указывает передавать информацию о символьных и блочных устройствах для
пересоздания их на приемной стороне.
Доступно только супер-пользователю.
</dd><dt></dt><dd>
</dd><dt><b>-t, --times</b></dt><dd>
Указывает передавать время модификации файлов и обновлять им
соответствующий атрибут на приемной стороне.
Обратите внимание, что если этот параметр не установлен, то становится
неэффективной оптимизация передачи по исключению не изменявшихся по
времени файлов; другими словами, пропуск <b>-t</b> или <b>-a</b> будет
означать, что следующая передача будет осуществляться с параметром
<b>-I</b>, для всех файлов будут сравниваться контрольные суммы, а в
журнале появятся соответствующие сообщения о них, даже если они не
изменялись.
</dd><dt></dt><dd>
</dd><dt><b>-n, --dry-run</b></dt><dd>
Указывает не осуществлять никаких передач, а только сообщать о тех
действиях, которые могли бы произойти.
</dd><dt></dt><dd>
</dd><dt><b>-S, --sparse</b></dt><dd>
Пытаться эффективнее обработать фрагментацию файлов, чтобы сэкономить
пространство на приемной стороне.
<p>
ЗАМЕЧАНИЕ: Не используйте этот параметр, если в точке назначения
имеется файловая система "<i>tmpfs</i>" Solaris.
Не представляется возможным правильно управлять поиском среди
"дырок" (null regions), что заканчивается повреждением файлов.
</p></dd><dt></dt><dd>
</dd><dt><b>-x, --one-file-system</b></dt><dd>
Требует не переходить границ файловой системы при рекурсивном
копировании.
Это полезно при необходимости копирования только одной
файловой системы.
</dd><dt></dt><dd>
</dd><dt><b>--existing</b></dt><dd>
Указывает не создавать никаких новых файлов - только обновить те,
которые уже существуют на приемной стороне.
</dd><dt></dt><dd>
</dd><dt><b>--ignore-existing</b></dt><dd>
Указывает не обновлять файлы, которые уже существуют на приемной
стороне.
</dd><dt></dt><dd>
</dd><dt><b>--max-delete=</b><i>NUM</i></dt><dd>
Не удалять больше, чем <i>NUM</i> файлов и каталогов.
Это полезно при зеркалировании очень массивных деревьев каталогов для
предохранения от неприятностей.
</dd><dt></dt><dd>
</dd><dt><b>--delete</b></dt><dd>
Удалять любые файлы на приемной стороне, которых нет на передающей.
Файлы, исключенные из передачи, исключаются также и из процесса
удаления, если не указана <b>--delete-excluded</b>.
</dd><dt></dt><dd>
Этот параметр не оказывает никакого влияния, если не включено
рекурсивное копирование каталогов.
</dd><dt></dt><dd>
Этот параметр может быть опасным при неправильном использовании!
Очень хорошим правилом может стать использование сначала холостого
выполнения rsync (<b>-n</b>) для просмотра того, что за файлы могут
удалиться и нет ли среди них важных.
</dd><dt></dt><dd>
При возникновении каких-либо ошибок ввода-вывода на передающей стороне
удаление любых файлов на приемной автоматически отключается.
Это предотвращает от массивного удаления файлов на приемной стороне
из-за временных ошибок файловой системы (например, NFS) на
передающей.
Это поведение можно отключить параметром <b>--ignore-errors</b>.
</dd><dt></dt><dd>
</dd><dt><b>--delete-excluded</b></dt><dd>
В дополнение к файлам, удаляемым на приемной стороне из-за отсутствия
их на передающей, указывает удалять также любые исключенные параметром
<b>--exclude</b> файлы на приемной стороне.
Подразумевается наличие параметра <b>--delete</b>.
</dd><dt></dt><dd>
</dd><dt><b>--delete-after</b></dt><dd>
По умолчанию, rsync сначала выполняет удаление файлов перед
копированием для пущей уверенности, что хватит свободного места на
приемной стороне.
Если же Вы хотите, чтобы удаление производилось после, то используйте
<b>--delete-after</b>.
Подразумевается наличие параметра <b>--delete</b>.
</dd><dt></dt><dd>
</dd><dt><b>--ignore-errors</b></dt><dd>
При удалении (<b>--delete</b>) форсирует процесс и игнорирует любые ошибки,
даже ошибки ввода-вывода.
</dd><dt></dt><dd>
</dd><dt><b>--force</b></dt><dd>
Удалять каталоги при замене их не-каталогами, даже если они не
пусты.
Уместен только без <b>--delete</b>, потому что удаление происходит
только каталогов одного уровня.
Требует <b>--recursive</b> (который подразумевается, если <b>-a</b>) для
значимого эффекта.
</dd><dt></dt><dd>
</dd><dt><b>-B, --block-size=</b><i>BLOCKSIZE</i></dt><dd>
Регулирует размер блока, используемый rsync-алгоритмом.
См. техническое описание на предмет деталей.
</dd><dt></dt><dd>
</dd><dt><b>-e, --rsh=</b><i>COMMAND</i></dt><dd>
Позволяет выбрать альтернативную программу удаленной оболочки для
осуществления соединения между удаленной и локальной копиями rsync.
Обычно rsync сконфигурирован для использования ssh по умолчанию, но Вы
можете предпочесть использовать rsh в локальной сети.
</dd><dt></dt><dd>
Если этот параметр используется с указанием пути вида
<b>[user@]host::module/path</b>, то программа удаленной оболочки
<i>COMMAND</i> будет использована для запуска rsync-сервера на
удаленной стороне, а все данные будут передаваться через соединение
удаленной оболочки, а не напрямую через соединение с rsync-сервером на
"том" конце.
См. раздел "<b>ПОДКЛЮЧЕНИЕ К RSYNC-СЕРВЕРУ ЧЕРЕЗ УДАЛЕННУЮ
ОБОЛОЧКУ</b>".
</dd><dt></dt><dd>
Аргументы командной строки для <i>COMMAND</i> разрешено указывать в
форме, при которой <i>COMMAND</i> представляется для rsync в виде
одного аргумента.
Например:
</dd><dt></dt><dd>
<dl compact=""><dt></dt><dd>
-e "ssh -p 2234"
</dd></dl>

</dd><dt></dt><dd>
(Заметьте, что ssh-пользователи могут альтернативно настраивать
специфичные для своего окружения параметры подключения в своих
.ssh/config файлах.)
</dd><dt></dt><dd>
Вы также можете выбирать программу удаленной оболочки через переменную
окружения <i>RSYNC_RSH</i>, которая принимает тот же диапазон значений, что и
<b>-e</b>.
</dd><dt></dt><dd>
См. также <b>--blocking-io</b>, на которую влияет установка параметра <b>-e</b>.
</dd><dt></dt><dd>
</dd><dt><b>--rsync-path=</b><i>PATH</i></dt><dd>
Указывает путь к копии rsync на удаленной стороне.
Полезен, если rsync'а нет в Ваших путях поиска.
Заметьте, что здесь указывается полный путь к программе, а не каталог,
где она лежит.
</dd><dt></dt><dd>
</dd><dt><b>-C, --cvs-exclude</b></dt><dd>
Этим параметром Вы исключаете широкий диапазон файлов, которые Вы не
хотите передавать между системами.
При этом используется тот же алгоритм, что использует CVS для
определения игнорируемых файлов.
</dd><dt></dt><dd>
Список исключений изначально включает в себя:
</dd><dt></dt><dd>
<dl compact=""><dt></dt><dd>
RCS/   SCCS/  CVS/  .svn/  CVS.adm  RCSLOG  cvslog.*  tags  TAGS
.make.state .nse_depinfo *~ #* .#* ,* *.old *.bak  *.BAK  *.orig
*.rej .del-* *.a *.o *.obj *.so *.Z *.elc *.ln core
</dd></dl>

</dd><dt></dt><dd>
затем файлы, перечисленные в $HOME/.cvsignore , добавляются к
первоначальному списку, а также любые, перечисленные в переменной
окружения <i>CVSIGNORE</i> (разделенные пробелами).
</dd><dt></dt><dd>
В заключение, любой файл пропускается, если в том же каталоге есть
файл .cvsignore, в котором есть соответствующий файлу
шаблон.
См. руководство по <b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=cvs&amp;category=1">cvs</a>(1)</b> для дальнейшей информации.
</dd><dt></dt><dd>
</dd><dt><b>--exclude=</b><i>PATTERN</i></dt><dd>
Позволяет выборочно исключать определенные файлы из процесса
передачи.
Это наиболее полезно при рекурсивной передаче.
</dd><dt></dt><dd>
Вы можете использовать так много <b>--exclude</b>, как Вам
заблагорассудится для построения произвольного списка исключаемых
файлов.
</dd><dt></dt><dd>
См. секцию "<b>ШАБЛОНЫ ИСКЛЮЧЕНИЯ</b>" за информацией о синтаксисе для
этого параметра.
</dd><dt></dt><dd>
</dd><dt><b>--exclude-file=</b><i>FILE</i></dt><dd>
Подобен параметру <b>--exclude</b>, но в отличие от него использует
шаблоны исключаемых фалов, перечисленные в файле <i>FILE</i>.
Пустые строки вместе со строками, начинающимися с ';' или '#',
игнорируются.
Если <i>FILE</i> указан как <b>-</b>, то список шаблонов читается со
стандартного ввода.
</dd><dt></dt><dd>
</dd><dt><b>--include=</b><i>PATTERN</i></dt><dd>
Указывает шаблоны для имен тех файлов, которые  нельзя исключать из
процесса.
Полезен тем, что позволяет Вам строить довольно сложные правила
включения/исключения.
</dd><dt></dt><dd>
См. секцию "<b>ШАБЛОНЫ ИСКЛЮЧЕНИЯ</b>" за информацией о синтаксисе для
этого параметра.
</dd><dt></dt><dd>
</dd><dt><b>--include-from=</b><i>FILE</i></dt><dd>
Указывает брать список обязательно включаемых в передачу файлов из
файла <i>FILE</i>.
Если <i>FILE</i> указан как <b>-</b>, то список шаблонов читается со
стандартного ввода.
</dd><dt></dt><dd>
</dd><dt><b>--files-from=</b><i>FILE</i></dt><dd>
Позволяет задать точный список файлов для передачи (который будет
прочитан из указанного <i>FILE</i> или из стандартного ввода, если
указан <b>-</b>).
Это также меняет поведение rsync по умолчанию  в целях облегчения
процесса передачи заданных файлов и каталогов.
Например,  по умолчанию включается использование опции
<b>--relative</b> (для отключения этого используйте
<b>--no-relative</b>), на принимающей стороне создаются все указанные в
списке каталоги (а не пропускаются безгласно, как если бы не
использовалась опция <b>-r</b>), а поведение <b>-a</b> (<b>--archive</b>)
не подразумевает наличие <b>-r</b> (<b>--recursive</b>) - его, при
необходимости, нужно указывать явно.
</dd><dt></dt><dd>
Все имена файлов, прочитанные из <i>FILE</i>, считаются относительными
к исходному каталогу -- первые слэши убираются и не допускаются ссылки
"..", указывающие выше по дереву исходного каталога.
Для примера рассмотрим:
</dd><dt></dt><dd>
<dl compact=""><dt></dt><dd>
rsync -a --files-from=/tmp/foo /usr remote:/backup
</dd></dl>

</dd><dt></dt><dd>
Если /tmp/foo содержит строку bin (или даже "/bin"), каталог
/usr/bin будет создан как /backup/bin на удаленной машине
(но содержимое /usr/bin не должно передаваться, кроме тех случаев,
когда объекты явно указаны в /tmp/foo, или в случае указания
параметра <b>-r</b>).
Также учитывайте, что эффект от <b>--relative</b> (включенный по
умолчанию) касается копирования путей, прочитанных из файла, -- он не
принуждает копировать полностью указанный исходный путь (/usr в
примере).
</dd><dt></dt><dd>
В дополнение, <b>--files-from</b> файл может быть прочитан с удаленной
машины, а не локально, если указать перед именем файла "host:"
(это должно соответствовать одному из концов передачи). Для
краткости, можно указывать только префикс ":" для обозначения
удаленного участника копирования.
Например:
</dd><dt></dt><dd>
<dl compact=""><dt></dt><dd>
rsync -a --files-from=:/path/file-list src:/ /tmp/copy
</dd></dl>

</dd><dt></dt><dd>
эта команда должна скопировать все файлы указанные в файле
/path/file-list, который расположен на удаленной машине
"src".
</dd><dt></dt><dd>
</dd><dt><b>-0, --from0</b></dt><dd>
Говорит rsync, что имена файлов, читаемые извне, заканчиваются
символом '\0', не NL, CR или CR+LF.
Это касается параметров <b>--exclude-from</b>, <b>--include-from</b>,
and <b>--files-from</b>.
</dd><dt></dt><dd>
</dd><dt><b>-T, --temp-dir=</b><i>DIR</i></dt><dd>
Инструктирует использовать <i>DIR</i> как каталог временных копий
передаваемых файлов на принимающей стороне.
По умолчанию временные файлы создаются в  каталоге назначения.
</dd><dt></dt><dd>
</dd><dt><b>--compare-dest=</b><i>DIR</i></dt><dd>
Инструктирует использовать <i>DIR</i> на машине назначения как каталог,
относительно содержимого которого осуществляется сравнение во время
процесса передачи при условии отсутствия файлов в каталоге
назначения.
Это полезно для осуществления передачи в новое место, оставляя
существующие файлы неприкосновенными, а затем перенося и очищая, когда
все файлы были переданы (например, при перемещении каталогов в новое
место и удалении старого, хотя при этом пропускаются не изменявшиеся
файлы; см. также <b>--link-dest</b>).
</dd><dt></dt><dd>
Прим. переводчика: Существование этого параметра обусловлено
необходимостью обновлять, например, дерево с взаимозависимыми
файлами.
В этом случае нежелательно осуществлять копирование на пофайловой
основе.
Параметр --compare-dest позволяет указывать временный каталог
назначения, куда и копируются передаваемые файлы.
По окончании процесса передачи rsync переименовывает оригинальное
дерево назначения, затем переименовывает временный каталог <i>DIR</i> в
оригинальный и, наконец, удаляет переименованный на первом шаге
оригинальный каталог со "старыми" файлами.
</dd><dt></dt><dd>
Этот параметр повышает полезность <b>--partial</b>, потому что частично
переданные файлы будут оставаться в новом временном каталоге до тех
пор, пока не окажутся целиком на месте.
Если <i>DIR</i> задан как относительный путь, то он соотносится к
каталогу назначения.
</dd><dt></dt><dd>
</dd><dt><b>--link-dest=</b><i>DIR</i></dt><dd>
Ведет себя также, как и <b>--compare-dest</b>, но также создает жесткие
ссылки в <i>DIR</i> на не изменявшиеся файлы в каталоге назначения.
Файлы с измененными правами и владением не подвергаются этому.
Как и в случае <b>--compare-dest</b>, если <i>DIR</i> задается
относительным именем, то и действия осуществляются относительно
каталога назначения.
</dd><dt></dt><dd>
</dd><dt><b>-z, --compress</b></dt><dd>
С этим параметром rsync сжимает все передаваемые данные файлов.
Это полезно на медленных линиях.
Метод сжатия, используемый при этом, тот же, что реализует gzip.
</dd><dt></dt><dd>
Заметьте, что при этом обычно достигается лучший коэффициент сжатия,
чем может быть достигнут, используя сжатие программ удаленной оболочки
или сжатие транспортного уровня, т.к. в процесс сжатия вовлекается
вся информация, посылаемая в соответствующих блоках данных.
</dd><dt></dt><dd>
</dd><dt><b>--numeric-ids</b></dt><dd>
Вместо имен групп и пользователей посылаются их числовые id и
ставятся в соответствие друг другу на обоих концах.
</dd><dt></dt><dd>
По умолчанию rsync использует имена групп и пользователей для
определения владельца файлов.
Специальные uid 0 и gid 0  никогда не отображаются через имена
пользователей/групп, даже если не указана <b>--numeric-ids</b>.
</dd><dt></dt><dd>
Если исходная система работает в ограниченном chroot-окружении или
если пользователь или группа не существуют на приемной стороне, то
используются исходные числовые id.
</dd><dt></dt><dd>
</dd><dt><b>--timeout=</b><i>TIMEOUT</i></dt><dd>
Позволяет устанавливать максимальное время ожидания ввода-вывода в
секундах.
Если за указанный период ничего не передано, то работа rsync завершается.
По умолчанию 0, что означает без ожидания.
</dd><dt></dt><dd>
</dd><dt><b>--daemon</b></dt><dd>
Запускает rsync как демон.
Демон доступен для клиентов через синтаксис <b>host::module</b> или
<b><a href="rsync://host/module">rsync://host/module</a></b> .
</dd><dt></dt><dd>
Если стандартным вводом является сокет, то rsync полагает условием
запуск от inetd, иначе он отключается от текущего терминала и
становится фоновым процессом-демоном.
Демон читает конфигурационный файл (<b>rsyncd.conf</b>) на каждое
соединение от клиентов и соответственно отвечает на их запросы.
</dd><dt></dt><dd>
</dd><dt><b>--no-detach</b></dt><dd>
При запуске демоном этот параметр инструктирует rsync не отключаться
от терминала и стать фоновым процессом.
Он требуется при запуске службой под Cygwin, и также может быть
полезен, если rsync находится под наблюдением таких программ как
<b>daemontools</b> или AIX's <b>System Resource Controller</b>.
<b>--no-detach</b> также рекомендуется к применению при запуске rsync
под отладчиком.
Этот параметр не имеет никакого эффекта при запуске от inetd или sshd.
</dd><dt></dt><dd>
</dd><dt><b>--address</b></dt><dd>
По умолчанию rsync использует групповой адрес 0.0.0.0, когда запускается
как демон с <b>--daemon</b> или при подключениях к rsync-серверу.
<b>--address</b> позволяет Вам указать точный IP-адрес (или хост-имя)
для этого.
Это делает возможным виртуальный хостинг в сочетании с <b>--config</b>.
</dd><dt></dt><dd>
</dd><dt><b>--config=</b><i>FILE</i></dt><dd>
Указывает альтернативный файл конфигурации.
Это имеет значение только если указан <b>--daemon</b>.
По умолчанию /etc/rsyncd.conf за исключением случая, когда демон
запускается поверх удаленной оболочки и удаленный пользователь не
root.
В последнем случае rsyncd.conf по умолчанию располагается в текущем
каталоге (обычно $HOME).
</dd><dt></dt><dd>
</dd><dt><b>--port=</b><i>PORT</i></dt><dd>
Указывает альтернативный номер TCP порта для работы, а не 873 по
умолчанию.
</dd><dt></dt><dd>
</dd><dt><b>--blocking-io</b></dt><dd>
Указывает использовать блокирующий ввод-вывод при запуске поверх
программы-транспорта удаленной оболочки.
Если этой программой являются либо rsh, либо remsh, то rsync
использует блокирующий ввод-вывод по умолчанию, иначе по умолчанию
используется неблокирующий ввод-вывод.
(Заметьте, что ssh предпочитает неблокирующий.)
</dd><dt></dt><dd>
</dd><dt><b>--no-blocking-io</b></dt><dd>
Отключает действие <b>--blocking-io</b>, когда оно активировано по
умолчанию.
</dd><dt></dt><dd>
</dd><dt><b>--log-format=</b><i>FORMAT</i></dt><dd>
Позволяет Вам точно указывать, что rsync сообщает (журналирует) на
стандартный вывод на по-файловой основе.
Формат сообщений определяется тем же соглашением, что и для параметра
журналирования в файле rsyncd.conf.
</dd><dt></dt><dd>
</dd><dt><b>--stats</b></dt><dd>
Указывает выводить подробную статистику по передаче файлов, позволяя
Вам оценить, насколько эффективен алгоритм rsync относительно Ваших
данных.
</dd><dt></dt><dd>
</dd><dt><b>--partial</b></dt><dd>
По умолчанию rsync будет удалять все частично-переданные файлы в
случае прерывания передачи.
В некоторых случаях более желательно сохранять такие файлы.
Используя параметр <b>--partial</b>, можно указать rsync сохранять
частично-переданный файл, что может ускорить передачу всего файла при
последовательном повторении таких передач.
</dd><dt></dt><dd>
</dd><dt><b>--progress</b></dt><dd>
Указывает выводить rsync информацию о ходе передачи.
Скучающему пользователю будет на что посмотреть.
Подразумевает наличие <b>--verbose</b> без увеличения подробностей.
</dd><dt></dt><dd>
</dd><dt><b>-P</b></dt><dd>
Эквивалент для <b>--partial --progress</b> .
Автор нашел для себя частым использование этой комбинации, поэтому для
облегчения ввел отдельный параметр.
</dd><dt></dt><dd>
</dd><dt><b>--password-file</b></dt><dd>
Позволяет Вам предоставить пароль для доступа к rsync-серверу,
сохранив его в файле.
Заметьте, что этот параметр полезен только при использовании для
доступа к rsync-серверу встроенного rsync-транспорта, при
использовании программы удаленной оболочки он бесполезен.
Файл не должен быть всем доступен на чтение.
Он должен содержать только пароль, в одну строчку.
</dd><dt></dt><dd>
</dd><dt><b>--bwlimit=</b><i>KBPS</i></dt><dd>
Позволяет указать максимальную скорость передачи, килобайт в
секунду.
Этот параметр наиболее эффективен при использовании rsync для передачи
больших файлов (несколько мегабайт и выше).
В соответствии с природой rsync-передач передается обычный блок
данных, затем если rsync определяет, что скорость выше установленного,
то он вводит задержку перед посылкой следующего блока.
В результате средняя скорость передачи равна указанному пределу.
Нулевое значение означает отсутствие этого ограничения.
</dd><dt></dt><dd>
</dd><dt><b>--write-batch=</b><i>PREFIX</i></dt><dd>
Генерирует набор файлов, которые могут быть переданы в пакетном
обновлении.
Каждое имя файла в наборе начинается с <i>PREFIX</i>.
См. раздел "ПАКЕТНЫЙ РЕЖИМ" за деталями.
</dd><dt></dt><dd>
</dd><dt><b>--read-batch=</b><i>PREFIX</i></dt><dd>
Применяет ранее сгенерированный пакет изменений, используя тот набор
файлов, чьи имена начинаются с <i>PREFIX</i>.
См. раздел "ПАКЕТНЫЙ РЕЖИМ" за деталями.
</dd><dt></dt><dd>
</dd></dl>
<p>

<a name="lbAO">&nbsp;</a>
</p><h2>ШАБЛОНЫ ИСКЛЮЧЕНИЯ</h2>

<p>

Шаблоны исключения и включения, будучи заданными, позволяют гибко
выделять, какие файлы должны передаваться, а какие должны быть
пропущены.
</p><p>

rync строит упорядоченный список на основе параметров
<b>--include</b>/<b>--exclude</b>, указанных в командной строке.
Rsync проверяет каждое имя файла или каталога относительно
соответствия каждому шаблону включения/исключения.
В действие вступает первое же совпадение.
Если совпавший шаблон исключающий, то соответствующий файл
пропускается.
Если шаблон включающий, то не пропускается.
При отсутствии подходящих шаблонов к имени файла он также не
пропускается.
</p><p>

Имена файлов проверяемых по таким шаблонам задаются относительно
каталога назначения, "верхнего каталога", так что шаблоны
необязательно должны включать элементы исходного или конечного
каталогов.
Единственный случай, когда шаблоны будут проверяться относительно
абсолютных путей к файлам или каталогам, - это случай, когда исходным
путем является корневой каталог файловой системы.
</p><p>

Заметьте, что при использовании параметра <b>-r</b> (он подразумевается
при <b>-a</b>) каждая отдельная часть каждого пути просматривается
сверху вглубь, так что шаблоны включения/исключения применяются
рекурсивно к каждой такой части.
</p><p>

Также обратите внимание, что параметры <b>--include</b> и
<b>--exclude</b> допускают только по одному шаблону каждый.
Для добавления множества шаблонов используйте параметры
<b>--include-from</b> и <b>--exclude-from</b> или множество параметров
<b>--include</b> и <b>--exclude</b> соответственно.
</p><p>

Шаблоны могут быть заданы в нескольких формах.
Правила для них таковы:
</p><p>

</p><dl compact="">
<dt></dt><dd>
</dd><dt>o</dt><dd>
Если шаблон начинается с /, то он проверяется на соответствие с
началом имени файла, в противном случае - относительно завершающей
части имени.
Это эквивалент начального ^ в регулярных выражениях.
Таким образом, "/foo" должен соответствовать файлу с именем
"foo" в вершине передаваемого дерева.
С другой стороны, "foo" должен соответствовать любому файлу
"foo" везде в пределах дерева каталогов, потому что алгоритм
применяется рекурсивно сверху вглубь.
Он работает так, как если бы каждая составная часть пути была завершением
имени файла.
Начальный / не превращает шаблон в абсолютный путь.
</dd><dt></dt><dd>
</dd><dt>o</dt><dd>
Если шаблон заканчивается на /, то он соответствует только каталогу,
не файлу, не ссылке и не устройству.
</dd><dt></dt><dd>
</dd><dt>o</dt><dd>
Если шаблон содержит символы подстановки из набора *?[ , то при
проверке соответствия используются правила подстановки командной
оболочки для имен файлов.
В противном случае используется просто соответствие строке.
</dd><dt></dt><dd>
</dd><dt>o</dt><dd>
В соответствия двойной звездочки "**" входит слэш, в то время как
для одиночной звездочки "*" на слэше совпадение заканчивается.
</dd><dt></dt><dd>
</dd><dt>o</dt><dd>
Если шаблон содержит слэш / (не считая завершающего слэша) или
"**" , то такой шаблон проверяется на соответствие полному имени
файла, включая любые вышестоящие каталоги.
Если шаблон не содержит / или "**", то такой шаблон проверяется
относительно завершающей части имени файла.
Еще раз, помните, что алгоритм применяется рекурсивно, так что
"полным именем файла" может оказаться в действительности любая
часть пути в глубине иерархии от начального каталога.
</dd><dt></dt><dd>
</dd><dt>o</dt><dd>
Если шаблон начинается на "+ " (плюс с последующим пробелом), то
это всегда рассматривается как включающий шаблон, даже если указан как
часть параметра исключения.
Сама часть "+ " не учитывается при проверке на соответствие.
</dd><dt></dt><dd>
</dd><dt>o</dt><dd>
Если шаблон начинается на "- " (минус с последующим пробелом), то
это всегда рассматривается как исключающий шаблон, даже если он
фигурирует как часть параметра включения.
Сама часть "- " не учитывается при проверке на соответствие.
</dd><dt></dt><dd>
</dd><dt>o</dt><dd>
Если шаблоном указан одиночный восклицательный знак ! , то текущий
список включения/исключения  сбрасывается удалением всех ранее
определенных шаблонов.
</dd></dl>
<p>

Правила +/- наиболее полезны в списках, читаемых из файла, позволяя
Вам иметь один общий список, который содержит как исключающие, так и
включающие шаблоны.
</p><p>

Если Вы завершите исключающий список указанием <b>--exclude</b>
'*', то обратите внимание, что из-за рекурсивного характера
алгоритм остановится на родительских каталогах и не будет пробовать
файлы внутри них за исключением тех случаев, когда Вы явно укажете
включать родительские каталоги файлов, которые Вы хотите включить.
Для включения всех каталогов используйте <b>--include</b> '*/' до
<b>--exclude</b> '*'.
</p><p>

Несколько примеров включения/исключения:
</p><p>

</p><dl compact="">
<dt>o</dt><dd>
--exclude "*.o" исключить все имена файлов, соответствующие
*.o
</dd><dt>o</dt><dd>
--exclude "/foo" исключить файл с именем foo в верхнем каталоге
</dd><dt>o</dt><dd>
--exclude "foo/" исключить любой каталог с именем foo
</dd><dt>o</dt><dd>
--exclude "/foo/*/bar" исключить любой файл с именем bar в
двух уровнях вглубь по иерархии от каталога "foo" в вершине дерева
</dd><dt>o</dt><dd>
--exclude "/foo/**/bar" исключить любой файл с именем bar в
двух и более уровнях вглубь по иерархии от верхнего каталога
"foo"
</dd><dt>o</dt><dd>
--include "*/" --include "*.c" --exclude "*" включить
только каталоги и файлы с Си-исходниками
</dd><dt>o</dt><dd>
--include "foo/" --include  "foo/bar.c"  --exclude
"*" включит только foo/bar.c (каталог foo/ нужно включать
явно, иначе он будет пропущен из-за "*")
</dd></dl>
<p>

<a name="lbAP">&nbsp;</a>
</p><h2>ПАКЕТНЫЙ РЕЖИМ</h2>

<p>

<b>Заметьте</b>: Пакетный режим должен рассматриваться как
экспериментальный в этой версии rsync.
Интерфейс и дизайн могут измениться, прежде чем его реализация
стабилизируется.
</p><p>

Пакетный режим может использоваться для выполнения обновлений
нескольких идентичных систем.
Предположим, что имеется дерево каталогов, которое нужно реплицировать
на некоторое количество машин.
Теперь предположим, что в это исходное дерево внесены изменения,
которые нужно распространить на те машины.
В порядке реализации этого в пакетном режиме rsync запускается с
параметром <b>--write-batch</b> для копирования изменений исходного
дерева на одну из конечных машин.
Этот параметр заставляет rsync сохранить в набор файлов пакетного
обновления (см. ниже) информацию, необходимую для повторения той же
операции копирования относительно и других машин.
Имя каждого файла в наборе начинается с префикса, указанного
пользователем в аргументе для параметра <b>--write-batch</b>.
Затем этот набор файлов копируется на каждую из оставшихся удаленных
машин, где запускается rsync с параметром <b>--read-batch</b>, тем же
префиксом и конечным деревом назначения.
Rsync обновляет последнее, используя информацию, сохраненную в наборе
файлов пакетного обновления.
</p><p>

Набор состоит из 4 файлов:
</p><p>

</p><dl compact="">
<dt>o </dt><dd>
<b>&lt;prefix&gt;.rsync_argvs</b>
параметры и аргументы командной строки
</dd><dt>o </dt><dd>
<b>&lt;prefix&gt;.rsync_flist</b>
внутренние метаданные rsync'а о перемещаемых файлах 
</dd><dt>o </dt><dd>
<b>&lt;prefix&gt;.rsync_csums</b>
контрольные суммы
</dd><dt>o </dt><dd>
<b>&lt;prefix&gt;.rsync_delta</b>
блоки данных для обновления и изменения файлов
</dd></dl>
<p>

Файл .rsync_argvs содержит необходимые команды оболочки, подходящие
для обновления конечного дерева каталогов, используя набор файлов
пакетного обновления.
Это можно использовать при запуске из Bourne-подобной оболочки,
дополнительно передавая параметр альтернативного пути который затем
используется вместо оригинального.
Последнее полезно, если конечный путь отличается от оригинального
конечного пути.
</p><p>

Генерация набора файлов пакетного обновления позволяет избежать
многократного повторения создания информации о состоянии файлов,
контрольных суммах и блоках данных при обновлении многих конечных
деревьев каталогов.
Многоадресные транспортные протоколы могут быть использованы для
передачи файлов пакетного обновления параллельно на несколько машин за
раз вместо посылки их на каждую индивидуально.
</p><p>

Примеры:
</p><p>

</p><p>
</p><pre>

$ rsync --write-batch=pfx -a /source/dir/ /adest/dir/
$ rcp pfx.rsync_* remote:
$ ssh remote rsync --read-batch=pfx -a /bdest/dir/
# или альтернативно
$ ssh remote ./pfx.rsync_argvs /bdest/dir/

</pre>

<p>
</p><p>
</p><p>

В этом примере rsync используется для обновления /adest/dir/ из
/source/dir/ , и  информация для повторения этой операции
сохраняется в файлах pfx.rsync_* .
Эти файлы затем копируются на машину с именем "remote" .
После этого rsync запускается на "remote" для обновления
/bdest/dir/ тем же способом, что и /adest/dir/ .
Последняя строка демонстрирует как можно использовать rsync_argvs для
запуска rsync.
</p><p>

Предостережения:
</p><p>

Параметр <b>--read-batch</b> требует аргументом конечное дерево
назначения, что значит обновлять идентично тому дереву назначения,
которое было использовано для создания набора файлов обновления.
Если выясняется различие между конечными деревьями, то обновление
немедленно прекращается, оставляя дерево назначения в частично
обновленном состоянии.
В таком случае rsync может быть использован в своем обычном режиме (не
пакетном) для исправления дерева назначения.
</p><p>

Версия rsync должна быть везде одинаковой относительно той версии,
которая использовалась для создания оригинала.
</p><p>

Параметр <b>-z</b>/<b>--compress</b> не работает в пакетном режиме и
выдает ошибку использования.
Вместо этого  могут быть использованы сторонние средства сжатия для
уменьшения размера файлов пакетного обновления при транспортировке к
цели.
</p><p>

Параметр <b>-n</b>/<b>--dryrun</b> не работает в пакетном режиме и
выдает ошибку выполнения.
</p><p>

См.
<b><a href="http://www.ils.unc.edu/i2dsi/unc_rsync+.html">http://www.ils.unc.edu/i2dsi/unc_rsync+.html</a></b> на
предмет документации и технических описаний.
</p><p>

<a name="lbAQ">&nbsp;</a>
</p><h2>СИМВОЛИЧЕСКИЕ ССЫЛКИ</h2>

<p>

Три основных сценария поведения возможны при обнаружении символических
ссылок в исходном каталоге.
</p><p>

По умолчанию символические ссылки не передаются совсем.
Для любой существующей ссылки в этом случае выдается сообщение
"skipping non-regular" ("пропуск нерегулярного").
</p><p>

Если указан параметр <b>--links</b>, то символические ссылки на тот же
объект в конечном месте заново пересоздаются.
Заметьте, что <b>--archive</b> подразумевает <b>--links</b>.
</p><p>

Если указан параметр <b>--copy-links</b>, то символическая ссылка
"раскрывается" копированием того объекта, на который она
указывает, вместо создания ссылки.
</p><p>

rsync также различает безопасные и небезопасные символические
ссылки.
Примером того, где это может быть использовано, может послужить
такое зеркалирование web-сайта, при котором желательно быть уверенным,
что в зеркальной копии нет символических ссылок на
<b>/etc/passwd</b> в доступной всем пользователям части сайта.
При использовании <b>--copy-unsafe-links</b> любые ссылки копируются в
конечное место в виде  файла, на который они указывают.
Параметр <b>--safe-links</b> указывает полностью пропускать
небезопасные ссылки.
</p><p>

Символические ссылки считаются небезопасными, если они указывают на
абсолютный путь (начинающийся с <b>/</b>), если они пустые или если
они содержат достаточное количество <b>".."</b>, чтобы выйти за
пределы каталога копирования.
</p><p>

<a name="lbAR">&nbsp;</a>
</p><h2>ДИАГНОСТИКА</h2>

<p>

rsync порой производит сообщения об ошибках, которые могут показаться
немного загадочными.
Одним из таких сообщений является "protocol  version mismatch - is
your shell clean?" ("несоответствие версий - ваша оболочка в
порядке?").
</p><p>

Это сообщение обычно является следствием того, что Ваши запускающие
скрипты или возможности удаленной оболочки производят лишний мусор в
потоке, который rsync использует в качестве транспорта.
Способ диагностирования этой проблемы следующий:
</p><p>

</p><p>
</p><pre>

ssh remotehost /bin/true &gt; out.dat

</pre>

<p>
</p><p>
</p><p>

и посмотреть в out.dat .
Если все работает корректно, то этот файл должен быть нулевого
размера.
Если Вы получаете вышеупомянутое сообщение от rsync, то Вы, возможно,
найдете какие-то текст или данные в файле out.dat .
Взгляните на его содержимое и по нему проверьте то, что может его
производить. 
Наиболее общая причина - это неправильно настроенные скрипты запуска
(такие как .cshrc или .profile), которые содержат выражения,
выдающие сообщения при не интерактивном входе в систему.
</p><p>

Если Вы имеете трудности с отладкой шаблонов включения и(или)
исключения, то попробуйте указать параметр -vv.
При таком уровне подробностей rsync будет показывать, почему включен
или исключен каждый отдельный файл.
</p><p>

<a name="lbAS">&nbsp;</a>
</p><h2>КОДЫ ЗАВЕРШЕНИЯ</h2>

<p>

</p><dl compact="">
<dt><b>0</b></dt><dd>
Успешно
</dd><dt><b>1</b></dt><dd>
Синтаксическая ошибка или ошибка использования
</dd><dt><b>2</b></dt><dd>
Несовместимость протоколов
</dd><dt><b>3</b></dt><dd>
Ошибки выбора входных/выходных файлов и каталогов
</dd><dt><b>4</b></dt><dd>
Запрошенное действие не поддерживается: была сделана попытка работы с
64-битными файлами на платформе, которая их не поддерживает; или
указан параметр, который поддерживается только клиентом и не
поддерживается сервером.
</dd><dt><b>5</b></dt><dd>
Ошибка при попытке начать работать по протоколу клиент-сервер
</dd><dt><b>10</b></dt><dd>
Ошибка сокета ввода/вывода
</dd><dt><b>11</b></dt><dd>
Ошибка ввода/вывода файла
</dd><dt><b>12</b></dt><dd>
Ошибка в потоке данных rsync-протокола
</dd><dt><b>13</b></dt><dd>
Ошибки при диагностике
</dd><dt><b>14</b></dt><dd>
Ошибка в IPC-коде
</dd><dt><b>20</b></dt><dd>
Получены сигналы или SIGUSR1, или SIGINT
</dd><dt><b>21</b></dt><dd>
Вызов waitpid() возвращает ошибку
</dd><dt><b>22</b></dt><dd>
Error allocating core memory buffers
</dd><dt><b>23</b></dt><dd>
Незавершенная передача из-за ошибки
</dd><dt><b>24</b></dt><dd>
Незавершенная передача из-за пропадания исходного файла
</dd><dt><b>30</b></dt><dd>
Время ожидания при передаче/приеме данных
</dd></dl>
<p>

<a name="lbAT">&nbsp;</a>
</p><h2>ПЕРЕМЕННЫЕ ОКРУЖЕНИЯ</h2>

<p>

</p><dl compact="">
<dt></dt><dd>
</dd><dt><b>CVSIGNORE</b></dt><dd>
Переменная окружения <i>CVSIGNORE</i> дополняет исключающие шаблоны из файла
.cvsignore.
За деталями см. параметр <b>--cvs-exclude</b>.
</dd><dt></dt><dd>
</dd><dt><b>RSYNC_RSH</b></dt><dd>
Переменная окружения <i>RSYNC_RSH</i> позволяет переопределить
программу удаленной оболочки, используемую rsync'ом как транспорт.
Параметры командной строки для оболочки указываются после имени
программы, также как и для параметра <b>-e</b>.
</dd><dt></dt><dd>
</dd><dt><b>RSYNC_PROXY</b></dt><dd>
Переменная окружения <i>RSYNC_PROXY</i> позволяет указать rsync-клиенту
использовать web-прокси для подключения к rsync-серверу.
Вы должны указать прокси в виде пары <b>hostname:port</b> .
</dd><dt></dt><dd>
</dd><dt><b>RSYNC_PASSWORD</b></dt><dd>
Установка значения <i>RSYNC_PASSWORD</i> позволяет осуществить
rsync-соединение к rsync-серверу без вмешательства пользователя для
ввода пароля.
Заметьте, что это не тоже самое, что и пароль для транспортной
оболочки, например, ssh.
</dd><dt></dt><dd>
</dd><dt><b>USER</b> или <b>LOGNAME</b></dt><dd>
Переменные окружения <i>USER</i> или <i>LOGNAME</i> используются для
определения пользователя по умолчанию, имя которого предоставляется
rsync-серверу для аутентификации.
</dd><dt></dt><dd>
</dd><dt><b>HOME</b></dt><dd>
Переменная <i>HOME</i> используется для поиска пользовательского файла
.cvsignore.
</dd><dt></dt><dd>
</dd></dl>
<p>

<a name="lbAU">&nbsp;</a>
</p><h2>ФАЙЛЫ</h2>

<p>

/etc/rsyncd.conf или rsyncd.conf
</p><p>

<a name="lbAV">&nbsp;</a>
</p><h2>СМ. ТАКЖЕ</h2>

<p>

<i><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=rsyncd.conf&amp;category=5">rsyncd.conf</a>(5)</i>
</p><p>

<a name="lbAW">&nbsp;</a>
</p><h2>ДИАГНОСТИКА</h2>

<p>

<a name="lbAX">&nbsp;</a>
</p><h2>ОШИБКИ</h2>

<p>

Информация о времени передается как unix-структура time_t .
</p><p>

При передаче на файловую систему FAT rsync может скопировать
не измененные файлы.
См. комментарий к параметру <b>--modify-window</b>.
</p><p>

Права на файлы, устройства и т.п. передаются как изначальные
числовые значения.
</p><p>

См. также комментарии к параметру --delete.
</p><p>

Пожалуйста, сообщайте об ошибках! См. web-сайт
<a href="http://rsync.samba.org/">http://rsync.samba.org/</a>
</p><p>

<a name="lbAY">&nbsp;</a>
</p><h2>CREDITS</h2>

<p>

rsync распространяется на условиях GPL.
См. файл COPYING на предмет деталей.
</p><p>

Web-сайт доступен по адресу <i><a href="http://rsync.samba.org/">http://rsync.samba.org/</a></i>.
Сайт содержит в том числе FAQ-O-Matic, который отвечает на многие
незатронутые в этом руководстве вопросы.
</p><p>

Первичный ftp-сервер для rsync
<a href="ftp://rsync.samba.org/pub/rsync.">ftp://rsync.samba.org/pub/rsync.</a>
</p><p>

Нам было бы приятно услышать от Вас, что Вам понравилась наша
программа.
</p><p>

Эта программа использует превосходную библиотеку сжатия zlib,
написанную Jean-loup Gailly и Mark Adler.
</p><p>

<a name="lbAZ">&nbsp;</a>
</p><h2>БЛАГОДАРНОСТИ</h2>

<p>

Благодарим Richard Brent, Brendan Mackay, Bill Waite, Stephen Rothwell
и David Bell за полезные предложения, патчи и тестирование rsync.
Если мы пропустили некоторых людей, то пусть примут наши извинения.
</p><p>

Специальные благодарности: David Dykstra, Jos Backus, Sebastian
Krahmer.
</p><p>

<a name="lbBA">&nbsp;</a>
</p><h2>АВТОР</h2>

<p>

rsync была написана Andrew Tridgell &lt;<a href="mailto:tridge@samba.org">tridge@samba.org</a>&gt; and Paul
Mackerras.
</p><p>

Сейчас rsync сопровождается Martin Pool &lt;<a href="mailto:mbp@samba.org">mbp@samba.org</a>&gt;.
</p><p>

Списки рассылок для поддержки и разработки доступны по адресу
<a href="http://lists.samba.org">http://lists.samba.org</a>
</p><p>

</p><p>

Если Вы подозреваете, что нашли уязвимость в rsync, пожалуйста,
известите Martin  Pool  и  Andrew  Tridgell.
Для других вопросов пользуйтесь списком рассылки.
</p><p>

<a name="lbBB">&nbsp;</a>
</p><h2>ПЕРЕВОД</h2>

<p>

Sergey Golovin &lt;<a href="mailto:svgol@mail.ru">svgol@mail.ru</a>&gt;
</p><p>

Aleksandr Blokhin &lt;<a href="mailto:sass@altlinux.ru">sass@altlinux.ru</a>&gt;
</p><p>

</p><hr>
<a name="index">&nbsp;</a><h2>Index</h2>
<dl>
<dt><a href="#lbAB">НАЗВАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAC">СИНТАКСИС</a></dt><dd>
</dd><dt><a href="#lbAD">ОПИСАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAE">ГЛАВНОЕ</a></dt><dd>
</dd><dt><a href="#lbAF">УСТАНОВКА</a></dt><dd>
</dd><dt><a href="#lbAG">ИСПОЛЬЗОВАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAH">ПОДКЛЮЧЕНИЕ К RSYNC-СЕРВЕРУ</a></dt><dd>
</dd><dt><a href="#lbAI">ПОДКЛЮЧЕНИЕ К RSYNC-СЕРВЕРУ ЧЕРЕЗ УДАЛЕННУЮ ОБОЛОЧКУ</a></dt><dd>
</dd><dt><a href="#lbAJ">ЗАПУСК RSYNC СЕРВЕРА</a></dt><dd>
</dd><dt><a href="#lbAK">ЗАПУСК RSYNC-СЕРВЕРА ПОВЕРХ УДАЛЕННОЙ ОБОЛОЧКИ</a></dt><dd>
</dd><dt><a href="#lbAL">ПРИМЕРЫ</a></dt><dd>
</dd><dt><a href="#lbAM">СВОДКА ПАРАМЕТРОВ</a></dt><dd>
</dd><dt><a href="#lbAN">ПАРАМЕТРЫ</a></dt><dd>
</dd><dt><a href="#lbAO">ШАБЛОНЫ ИСКЛЮЧЕНИЯ</a></dt><dd>
</dd><dt><a href="#lbAP">ПАКЕТНЫЙ РЕЖИМ</a></dt><dd>
</dd><dt><a href="#lbAQ">СИМВОЛИЧЕСКИЕ ССЫЛКИ</a></dt><dd>
</dd><dt><a href="#lbAR">ДИАГНОСТИКА</a></dt><dd>
</dd><dt><a href="#lbAS">КОДЫ ЗАВЕРШЕНИЯ</a></dt><dd>
</dd><dt><a href="#lbAT">ПЕРЕМЕННЫЕ ОКРУЖЕНИЯ</a></dt><dd>
</dd><dt><a href="#lbAU">ФАЙЛЫ</a></dt><dd>
</dd><dt><a href="#lbAV">СМ. ТАКЖЕ</a></dt><dd>
</dd><dt><a href="#lbAW">ДИАГНОСТИКА</a></dt><dd>
</dd><dt><a href="#lbAX">ОШИБКИ</a></dt><dd>
</dd><dt><a href="#lbAY">CREDITS</a></dt><dd>
</dd><dt><a href="#lbAZ">БЛАГОДАРНОСТИ</a></dt><dd>
</dd><dt><a href="#lbBA">АВТОР</a></dt><dd>
</dd><dt><a href="#lbBB">ПЕРЕВОД</a></dt><dd>
</dd></dl>
<hr>
<br>
<form method="get" action="/search.shtml">
<font size="-1">
<font color="#555555">Поиск по тексту MAN-ов:&nbsp;</font><input size="30" name="words" value="rsync" type="text">
<input name="restrict" value="/man" type="hidden">
<input value="Найти" type="submit">
</font>
<input name="method" value="and" type="hidden">
<input name="format" value="builtin-long" type="hidden">
<input name="sort" value="score" type="hidden">
</form>
<br>
<!--htdig_noindex-->
<noindex>
<br>


</noindex>
<!--/htdig_noindex-->


<!-- footer -->
<!--htdig_noindex-->
<br><br>
<div style="background-color: #E9EAD6; width:100%; height: 61px;">
<div style="margin-right: 20px; float:left; line-height: 61px; vertical-align: middle; margin-left: 10px; font-size: 120%;">
Спонсоры:
</div>
<div style="float:left; height: 60px;  line-height: 60px; margin-left: 20px;">
<a style="align: middle;" target="_blank" href="https://inferno.name/"><img src="/img/inferno2.png" alt="Inferno Solutions" height="57" width="200"></a>
</div>
<div style="float:right; height: 60px;  line-height: 60px;  margin-left: 15px;">
<a style="align: middle;" target="_blank" href="http://hoster.ru/?utm_source=site&amp;utm_medium=banner&amp;utm_campaign=opennet"><img src="/img/dh143x60t.png" alt="Hosting by Hoster.ru" height="60" width="143"></a>
</div>
<div style="float:right;  height: 60px;  line-height: 60px; vertical-align: middle;font-size: 120%;">
Хостинг:
</div>

</div>

<div style="clear: both;"></div>


<br>
<table class="ttxt" style="border-top: 3px solid #C9CaB6;">
<tbody><tr><td width="35%">
<a href="/cgi-bin/opennet/bookmark.cgi">Закладки на сайте</a><br>
<a href="/cgi-bin/opennet/bookmark.cgi?submit=add" target="blank_">Проследить за страницей</a>
</td>
<td align="RIGHT" width="65%">
Created&nbsp;1996-2021&nbsp;by <b><a href="/contact.shtml" title="email maxim.chirkov@gmail.com">Maxim&nbsp;Chirkov</a></b><br>
<a href="https://www.opennet.ru/add.shtml">Добавить</a>, <a href="https://www.opennet.ru/donate.shtml" style="color: #C00000;">Поддержать</a>, <a href="https://www.opennet.ru/banners2.shtml">Вебмастеру</a>
</td>
</tr>
</tbody></table>
<br><br>


<!--/htdig_noindex-->
<!-- end of footer -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-123449-1', 'auto');
    ga('send', 'pageview');
</script>




</body>
<!---------------------------------------------  0  ---------------------------------------------->
