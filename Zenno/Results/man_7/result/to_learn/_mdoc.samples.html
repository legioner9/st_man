
<!--+++++++++++++++++++++++++++++++++++++++++++  0  +++++++++++++++++++++++++++++++++++++++++++--->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Проект OpenNet: MAN mdoc.samples (7) Макропакеты и соглашения (FreeBSD и Linux)</title><meta name="KeyWords" content="man, manual, MAN, системное руководство, linux, FreeBSD, OpenBSD, Solaris, ядро, программы, системный вызов, mdoc.samples"><meta name="viewport" content="width=device-width, initial-scale=1"></head>


<body link="#0000FF" vlink="#000080" text="#000000" bgcolor="#E3E4D0" alink="#FF00FF">
<link rel="stylesheet" href="/opennet4.css" type="text/css">
<!--htdig_noindex-->
<form method="get" action="https://www.opennet.ru/search.shtml">
<aside>
<div style="width: 100%; text-align: right; font-size: 70%; background: #E9EAD6; margin-bottom:-10px;">
Профиль: <b><a href="/~" rel="nofollow" title="/~ - сводная страница участника"><u>Аноним</u></a></b> (<a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=login">вход</a> | <a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=user_register">регистрация</a>)</div>

<table cellspacing="0" cellpadding="0" width="100%" border="0">
<tbody><tr>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" valign="BOTTOM" bgcolor="#E9EAD6" width="300">
<a href="https://www.opennet.ru/"><img src="/opennet2.gif" alt="The OpenNET Project" height="60" width="249" border="0"></a><br>
</td>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" bgcolor="#E9EAD6" align="CENTER" width="100">

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:10px;" bgcolor="#E9EAD6" align="CENTER" width="50%">
<table width="100%" border="0">
<tbody><tr>
<td width="22%">
 <a href="https://www.opennet.ru/opennews/" class="h"><b>НОВОСТИ</b></a> (<a href="https://www.opennet.ru/news/opennet.shtml" class="h">+</a>)
</td><td width="18%%">
  <a href="https://www.opennet.ru/mp/" class="h"><b>КОНТЕНТ</b></a>
</td><td width="14%">
  <a href="http://wiki.opennet.ru" class="h"><b>WIKI</b></a>
</td><td width="14%">
   <a href="https://www.opennet.ru/man.shtml" class="h"><b>MAN'ы</b></a>
</td><td width="16%">
   <a href="https://www.opennet.ru/forum/" class="h"><b>ФОРУМ</b></a>
</td><td width="16%">
<a href="https://www.opennet.ru/search.shtml" class="h" onmouseover="document.getElementById('form12').style.display='block';">Поиск</a>&nbsp;(<a href="https://www.opennet.ru/keywords/" class="h">теги</a>)
<input id="form12" style="display: none;" size="10" name="words" value="" title="для поиска в google наберите &quot;g фраза&quot;" type="text">
</td></tr>
</tbody></table>

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:5px;" bgcolor="#E9EAD6" align="right" width="20%">

<a href="https://www.opennet.ru/opennews/opennews_all_utf.rss"><img src="/img/rss.png" alt="RSS" title="RSS" height="16" width="16" border="0"></a>&nbsp;<a href="https://twitter.com/opennetru"><img src="/twitter.png" alt="twitter" title="Twitter" height="16" width="16" border="0"></a>&nbsp;<a href="https://vk.com/opennet"><img src="/img/vkontakte.gif" title="ВКонтакте" height="16" width="16" border="0"></a>&nbsp;<a href="https://zen.yandex.ru/opennet"><img src="/img/zen.gif" title="Yandex Zen" height="16" width="16" border="0"></a>&nbsp;<a href="https://www.facebook.com/OpenNet.News/"><img src="/img/facebook.gif" title="Facebook" height="16" width="16" border="0"></a>&nbsp;<a href="https://telegram.space/opennet_ru"><img src="/img/telegram2.png" title="Telegram" height="16" width="16" border="0"></a>
</td></tr></tbody></table>
</aside>

<style>
    .hdr_mobile {
	text-align: center; 
	display: none;
	margin: 0px;
	padding: 0px;
    }
</style>
<div class="hdr_mobile">
<div style="margin-left: auto; margin-right: auto; width: 100%; height: 70px; border:1px solid #b0b190; min-width: 360px; max-width: 600px; background: #E9EAD6 url('/back.gif') repeat-x bottom left;">
<div style="float:left; width: 249px; height: 60px; margin-top: 10px;">
<a href="https://www.opennet.ru"><img src="/opennet2_lite.gif" style="height: 60px; width: 249px; border: 1px;" alt="The OpenNET Project / Index page"></a>
</div>
<div style="float: left; text-align: center; height: 70px; width: 331px; padding: 5px; margin-left: 10px;">
<br><small>[ <a href="/opennews/">новости</a>&nbsp;/<a href="/opennews/?full_lines=15&amp;lines=15&amp;mid_lines=00">+++</a> | <a href="/forum/">форум</a> | <a href="http://wiki.opennet.ru">wiki</a> | <a href="/keywords/">теги</a>
| <a href="tg://resolve?domain=opennet_ru"><img src="/img/telegram2.png" title="Telegram" style="margin-bottom: -4px;" height="16" width="16" border="0"></a>
]</small>
</div>
</div>
</div>
<div style="clear: both;"></div>


<div style="float: left; width: 279; text-align: left;padding-right: 60px;" id="adv">
</div>
<div style="padding-top: 0px;position:absolute;left:50%;margin-left:-235px;width:470px;" id="adv2">
</div>
<div style="width: 279;float: right;" id="adv3">
</div>
<div style="clear: both;"></div>
<br>
</form>
<!--/htdig_noindex-->

<center><h3><font color="#000088">Интерактивная система просмотра системных руководств (man-ов)</font></h3></center>
<form method="GET" action="/man.shtml"> 
<table cellspacing="0" cellpadding="1" bgcolor="#B0B190" align="center" width="600" border="0">
<tbody><tr>
<td valign="TOP">

<table cellspacing="0" cellpadding="0" bgcolor="#E9EAD6" align="center" width="100%" border="0">
<tbody><tr><td>&nbsp;<font color="#555555">Тема</font></td><td><font color="#555555">Набор</font></td><td><font color="#555555">Категория</font></td><td>&nbsp;</td></tr>
<tr><td>

&nbsp;<input size="20" name="topic" value="mdoc.samples" type="text"></td><td><select name="russian">
<option value="4">Solaris man
</option><option value="1">FreeBSD man
</option><option value="3">Разные man
</option><option value="0" selected="">Русские man
</option><option value="2">Linux man
</option><option value="5">POSIX man
</option></select></td>
<td><select size="1" name="category">
	  <option value="" selected="">All
	  </option><option value="1">1
	  </option><option value="2">2
	  </option><option value="3">3
	  </option><option value="4">4
	  </option><option value="5">5
	  </option><option value="6">6
	  </option><option value="7">7
	  </option><option value="8">8
	  </option><option value="9">9
</option></select></td>

<td><input name="submit" value="Показать man" type="submit"></td></tr>
<script async="" src="https://www.google-analytics.com/analytics.js"></script><script language="JavaScript" src="/print.js"></script>
<tr><td colspan="4" align="left">&nbsp;[<a href="/man.shtml">Cписок руководств</a> | <a href="#" onclick="pr('none');">Печать</a>]</td></tr>
</tbody></table>
</td></tr></tbody></table>
</form>
<h3></h3><font size="+2">mdoc.samples (7)</font><hr><li> <a href="/man.shtml?topic=mdoc.samples&amp;category=7&amp;russian=1"><u>mdoc.samples</u></a> (7) <font color="#555555"> ( FreeBSD man: Макропакеты и соглашения )</font></li><li>&gt;&gt; <a href="/man.shtml?topic=mdoc.samples&amp;category=7&amp;russian=0"><u>mdoc.samples</u></a> (7) <font color="#555555"> ( Русские man: Макропакеты и соглашения )</font></li><li> <a href="/man.shtml?topic=mdoc.samples&amp;category=7&amp;russian=2"><u>mdoc.samples</u></a> (7) <font color="#555555"> ( Linux man: Макропакеты и соглашения )</font></li><br>BSD mandoc<br>


<a name="lbAB">&nbsp;</a>
<h2>НАЗВАНИЕ</h2>

<b>mdoc.samples -</b>

 - примеры написания страниц руководства

BSD при помощи
<b>-mdoc</b>

<a name="lbAC">&nbsp;</a>
<h2>СИНТАКСИС</h2>

<b>man mdoc.samples</b>

<a name="lbAD">&nbsp;</a>
<h2>ОПИСАНИЕ</h2>

В данном файле приведены примеры написания страниц руководства
BSD при помощи макро-пакета
<b>-mdoc</b>

 
<i>который является зависимым от контекста </i><b>и</b>



<i>домена </i><b>пакетом форматирования текста</b>



<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=troff&amp;category=1">troff</a>(1).


Его предок, пакет
-man7,


задавал только расположение текста на странице,
оставляя работу со шрифтами на авторскую доработку.
В
<b>-mdoc </b>

формат страницы определяется
<i>структурным доменом страницы</i>

 
состоящим из макросов для заголовков текста, секций, блоков вывода
и списков. Особенно это касается макросов, определяющих
физическое положение текста на отформатированной странице.
В дополнение к структурному домену страницы существуют еще два домена:
страничный домен и общий текстовый домен.
Общий текстовый домен содержит макросы, выполняющие задачи
выделения текста.
Страничный домен содержит набор макросов, предоставляющих пользователю
(в стандартной форме вывода) команды, функции и
соответствующие файлы
BSD .
Макросы в страничном домене работают с названиями команд, их
параметрами и опциями, названиями и параметрами функций, именами файлов,
переменными, ссылками на другие страницы и т.п.
Эти элементы доменов имеют большую
ценность как для автора документа, так и для будущего пользователя.
Есть надежда, что такая стандартизация всего набора
страниц руководства обеспечит более простое их преобразование для
будущих утилит формирования документации.
<p>

<a name="lbAE">&nbsp;</a>
</p><h2>ПРИСТУПАЯ К РАБОТЕ</h2>

По той причине, что обычно учебные пособия, похожие на это,
читают люди, которым информация нужна немедленно, мы
предполагаем, что пользователь этого документа тоже нетерпелив.
Материал, представленный в этом документе, поделен на несколько
частей:
<ol><p>

</p><li>

<b>ОГРАНИЧЕНИЯ TROFF</b>

<dl compact="">
<p>

</p><dt><b>"Использование макросов"</b>
</dt><dd>
 
</dd><dt><b>"Передача пробелов в виде параметров"</b>
</dt><dd>
 
</dd><dt><b>"Завершающие строку пробелы (предупреждение)"</b>
</dt><dd>
 
</dd><dt><b>"Escape-последовательности для вывода специальных символов"</b>
</dt><dd>
 
</dd></dl>
<p>

</p></li><li>

<b>СТРОЕНИЕ СТРАНИЦЫ РУКОВОДСТВА</b>

<dl compact="">
<p>

</p><dt><b>"Шаблон страницы руководства"</b>
</dt><dd>
 
</dd></dl>
<p>

</p></li><li>

<b>МАКРОСЫ ЗАГОЛОВКА</b>

 
</li><li>

<b>ВВЕДЕНИЕ В СТРАНИЧНЫЙ И ОБЩИЙ ТЕКСТОВЫЙ ДОМЕНЫ</b>

 
<dl compact="">
<p>

</p><dt><b>"Что в имени тебе моем..."</b>
</dt><dd>
 
</dd><dt><b>"Общий синтаксис"</b>
</dt><dd>
 
</dd></dl>
<p>

</p></li><li>

<b>СТРАНИЧНЫЙ ДОМЕН</b>

<dl compact="">
<p>

</p><dt><b>"Адреса"</b>
</dt><dd>
 
</dd><dt><b>"Автор"</b>
</dt><dd>
 
</dd><dt><b>"Параметры"</b>
</dt><dd>
 
</dd><dt><b>"Задание конфигурации (только раздел #4)"</b>
</dt><dd>
 
</dd><dt><b>"Модификатор команды"</b>
</dt><dd>
 
</dd><dt><b>"Определенные переменные"</b>
</dt><dd>
 
</dd><dt><b>"Коды ошибок (только раздел #2)"</b>
</dt><dd>
 
</dd><dt><b>"Переменные окружения"</b>
</dt><dd>
 
</dd><dt><b>"Параметры функции"</b>
</dt><dd>
 
</dd><dt><b>"Определение функции"</b>
</dt><dd>
 
</dd><dt><b>"Флаги"</b>
</dt><dd>
 
</dd><dt><b>"Функции (в т.ч. и библиотечные)"</b>
</dt><dd>
 
</dd><dt><b>"Типы функций"</b>
</dt><dd>
 
</dd><dt><b>"Интерактивные команды"</b>
</dt><dd>
 
</dd><dt><b>"Названия"</b>
</dt><dd>
 
</dd><dt><b>"Опции"</b>
</dt><dd>
 
</dd><dt><b>"Пути"</b>
</dt><dd>
 
</dd><dt><b>"Переменные"</b>
</dt><dd>
 
</dd><dt><b>"Ссылки"</b>
</dt><dd>
 
</dd></dl>
<p>

</p></li><li>

<b>ОБЩИЙ ТЕКСТОВЫЙ ДОМЕН</b>

<dl compact="">
<p>

</p><dt><b>"Макрос AT&amp;T"</b>
</dt><dd>
 
</dd><dt><b>"Макрос BSD"</b>
</dt><dd>
 
</dd><dt><b>"Макрос FreeBSD"</b>
</dt><dd>
 
</dd><dt><b>"Макррос UNIX"</b>
</dt><dd>
 
</dd><dt><b>"Макросы выделения"</b>
</dt><dd>
<dl compact="">
<p>

</p><dt><b>"Выделение угловыми скобками"</b>
</dt><dd>
 
</dd><dt><b>"Выделение квадратными скобками"</b>
</dt><dd>
 
</dd><dt><b>"Выделение двойными кавычками"</b>
</dt><dd>
 
</dd><dt><b>"Выделение круглыми скобками"</b>
</dt><dd>
 
</dd><dt><b>"Выделение одинарными кавычками"</b>
</dt><dd>
 
</dd><dt><b>"Макрос префикса"</b>
</dt><dd>
 
</dd></dl>
<p>

</p></dd><dt><b>"Макрос обычного текста"</b>
</dt><dd>
 
</dd><dt><b>"Макрос отключения пробелов"</b>
</dt><dd>
 
</dd><dt><b>"Ссылки на раздел"</b>
</dt><dd>
 
</dd><dt><b>"Ссылки и цитаты"</b>
</dt><dd>
 
</dd><dt><b>"Возвращаемые значения (только разделы #2 и #3)"</b>
</dt><dd>
</dd><dt><b>"Торговые марки (Акронимы и названия видов)"</b>
</dt><dd>
 
</dd><dt><b>"Расширенные параметры"</b>
</dt><dd>
 
</dd></dl>
<p>

</p></li><li>

<b>СТРУКТУРНЫЙ ДОМЕН СТРАНИЦЫ</b>

<dl compact="">
<p>

</p><dt><b>"Заголовки секций"</b>
</dt><dd>
 
</dd><dt><b>"Параграфы и расстояние между строками"</b>
</dt><dd>
 
</dd><dt><b>"Сохранение исходного формата"</b>
</dt><dd>
 
</dd><dt><b>"Блоки вывода"</b>
</dt><dd>
 
</dd><dt><b>"Режимы шрифтов (Выделение, Неформатируемый текст и Символьный режим)"</b>
</dt><dd>
 
</dd><dt><b>"Списки и колонки"</b>
</dt><dd>
 
</dd></dl>
<p>

</p></li><li>

<b>ПРЕДОПРЕДЕЛЕННЫЕ СТРОКИ</b>

</li><li>

<b>ДИАГНОСТИКА</b>

</li><li>

<b>ФОРМАТИРОВАНИЕ ПРИ ПОМОЩИ GROFF, TROFF И NROFF</b>

</li><li>

<b>ОШИБКИ</b>

</li></ol><p>


<a name="lbAF">&nbsp;</a>
</p><h2>ОГРАНИЧЕНИЯ TROFF</h2>

Пакет
<b>-mdoc</b>

ставит перед собой цель упростить процесс написания страниц руководства.
Теоретически автор не должен знать тонкостей
<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=troff&amp;category=1">troff</a>(1)


для использования
<b>-mdoc</b>

 
однако, существует несколько ограничений, которые обойти невозможно,
и лучше их не использовать.
Надо добавить, что этот пакет
<i>не работает</i>

быстро.
<a name="lbAG">&nbsp;</a>
<h3>Использование макросов</h3>

Как и в
<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=troff&amp;category=1">troff</a>(1),


макрос может быть вызван указанием
`.'

(точки)
в начале строки, за которой следует двухсимвольное название макроса.
За ним могут следовать параметры макроса, разделенные пробелами.
Именно точка в начале строки заставляет
<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=troff&amp;category=1">troff</a>(1)


считать следующие два символа именем макроса.
Для того, чтобы поместить
`.'

(точку)
в начало строки в ином, отличном от запуска макроса
контексте, укажите перед
`.'

(точкой) escape-последовательность
`\&amp;'

Эта последовательность означает пробел с нулевой шириной и никогда не выводится.
<p>

Вообще, макросы
<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=troff&amp;category=1">troff</a>(1)


могут иметь до 9-и параметров, остальные же параметры игнорируются.
Многие макросы в
<b>-mdoc</b>

также могут иметь до 9-и параметров, и
в некоторых случаях параметров может быть и больше
(См. секцию
Sx Расширенные параметры ) .

Некоторые макросы обрабатывают параметры в кавычках (см. ниже секцию
Sx Передача пробелов в виде параметров

).
</p><p>

Многие макросы из общего текстового или страничного доменов
<b>-mdoc</b>

особенны тем, что их параметры могут представлять собой
имена вызываемых макросов.
Это означает, что если один из параметров в списке соответствует
имени макроса из общего текстового или страничного доменов
и этот макрос является вызываемым, то этот макрос
будет исполнен или вызван при обработке.
В этом случае перед параметром не ставится
`.'

(точка), несмотря на то, что это имя макроса.
Таким образом, макросы могут быть вложенными; например,
макрос необязательных параметров,
`.[,]

'

может
<i>вызвать</i>

макросы флагов и параметров
`-

'

и
`<i>file ...</i>

'

для
указания необязательного флага с параметром:
</p><dl compact="">
<p>

</p><dt><b></b>[-<b>s </b><i>байтов</i>



]


</dt><dd>
делается при помощи
<b>.</b>[-<b>s </b><i>байтов</i>



]



</dd></dl>
<p>

</p><p>

Для того, чтобы двухсимвольная строка не обрабатывалась в
качестве имени макроса, перед ней надо указать
`\&amp;'

:
</p><dl compact="">
<p>

</p><dt><b></b>[-<b>s </b><i>bytes</i>



]


</dt><dd>
делается при помощи
<b>.</b>[\&amp;-<b>s \&amp;</b><i>bytes</i>



]



</dd></dl>
<p>

</p><p>

Таким образом, в данном случае строки
`-

'

и
`<i>file ...</i>

'

не
считаются именами макросов.
Макросы, чьи списки параметров проверяются на наличие
в них имен вызываемых макросов, называются "обрабатываемыми",
а макросы, которые могут быть вызваны из параметров, называются
"вызываемыми".
Это не совсем корректно, с технической точки зрения,
так как все макросы обрабатываются и вызываются,
но эта терминология используется лишь для разделения двух понятий.
<a name="lbAH">&nbsp;</a>
</p><h3>Передача пробелов в виде параметров</h3>

Иногда в качестве параметра макроса необходимо указать один
или несколько пробелов.
Это бывает нужно для игнорирования лимита из девяти параметров
или для макросов, которым необходим
строгий порядок расположения параметров в строке.
Например, макрос функции
`.Fn определяет,

'

что первый его параметр - название функции, а все остальные -
ее параметры.
В
<b>ANSI C</b>

параметры функции указываются в списке, заключенном в скобки,
и каждый параметр бывает, как минимум, строкой из двух слов.
Например,
Fa int foo .

<p>

Существует два возможных способа передачи параметра, содержащего
пробел.
<i>Примечание по реализации </i>

К сожалению, наиболее простой и удобный способ передачи пробелов
внутри кавычек очень отражался на скорости работы и объемах
памяти, используемой
<b>AT&amp;T</b>

troff.


Этот способ не отражается на работе
groff,


но для совместимости этот способ реализован только для тех
макросов, которым это было необходимо:
</p><p>

</p><dl compact="">
<p>

</p><dt><b>Задание конфигурации (только секция</b>



</dt><dd>
Sx СИНТАКСИС

раздела 4).
</dd><dt><b></b><dl compact=""><b>
</b><p><b>

</b>


</p><dd>
Начало списка (для подпараметра width).
</dd><dt><b></b><i>Выделенный текст.</i>



</dt><dd>
</dd><dt><b>Fn </b>Функции (разделы #2 и #3).



</dt><dd>
</dd><dt><b></b></dt><dt><b>Элементы списков.</b>
</dt><dd>



</dd><dd>
</dd><dt><b>Неформатируемый текст.</b>



</dt><dd>
</dd><dt><b>Символьный текст.</b>



</dt><dd>
</dd><dt><b>%B</b>


</dt><dd>
Названия книг.
</dd><dt><b>%J</b>


</dt><dd>
Названия журналов.
</dd><dt><b>%O</b>


</dt><dd>
Дополнительная информация об упоминаемом тексте.
</dd><dt><b>%R</b>


</dt><dd>
Название отчета (в упоминаемом тексте).
</dd><dt><b>%T</b>


</dt><dd>
Название статьи в книге или журнале.
</dd></dl>
<p>

</p><p>

Одним из способов передачи строки, содержащей пробелы, является
использование "жесткого" (или непереносимого) пробела
`\<br>&nbsp;,'

то есть, пробела, перед которым указан символ
`\'

Этот метод может использоваться в работе с любым макросом, но у него есть
побочный эффект - не совсем корректное выравнивание пробелов в строке.
Troff


рассматривает "жесткий" пробел так, как любой другой печатный символ,
и не может разделить строку для форматирования, как того
можно было ожидать.
Этот метод можно использовать в работе со строками, которые, в принципе,
не должны переноситься на новую строку.
Например:
</p><dl compact="">
<p>

</p><dt><b>Fn </b>fetch char&nbsp;*str


</dt><dd>
делается при помощи
`.Fn fetch

'

char\ *str
</dd><dt><b>Fn </b>fetch char *str


</dt><dd>
можно сделать и так:
`.Fn fetch

'

\*qchar *str\*q
</dd></dl>
<p>

</p><p>

Если
`\'

или кавычки опустить, то макрос
`.Fn будет

'

иметь три параметра, а результат будет следующим:
</p><p>


</p><blockquote><tt>Fn </tt>fetch char *str

</blockquote>
<p>

Пример, в котором описано, что происходит, если список параметров
превышает длину строки, приведен в секции
Sx ЗАМЕЧАНИЯ .

</p></dt></dl>

<a name="lbAI">&nbsp;</a>
<h3>Завершающие строку пробелы (предупреждение)</h3>

Troff


может не распознать пробелы в конце строки.
Неплохо удалять все пробелы, находящиеся в конце строк.
Если возникнет необходимость поставить пробел в конце строки,
то лучше это сделать при помощи непереносимого пробела и 
escape-символа
`\&amp;'

(Например, 
`string\\&amp;'

).
<a name="lbAJ">&nbsp;</a>
<h3>Escape-последовательности для вывода специальных символов</h3>

Специальные символы, такие, как
`\n'

,
указываются при помощи замены символа
`\'

на
`\e'

(например,
`\en'

)
для того, чтобы сохранить в тексте обратный слэш.
<a name="lbAK">&nbsp;</a>
<h2>СТРУКТУРА СТРАНИЦЫ РУКОВОДСТВА</h2>

"Тело" страницы руководства можно легко создать при помощи базового шаблона,
находящегося в файле
/usr/share/misc/mdoc.template

 
Несколько примеров страниц руководства можно найти в каталоге
/usr/share/examples/mdoc

 
<p>

<a name="lbAL">&nbsp;</a>
</p><h3>Шаблон страницы руководства </h3>


<blockquote>
<pre>.\" Следующие макросы обязательны для всех страниц руководства
.Dd Месяц, день, год
.Os ОПЕРАЦИОННАЯ_СИСТЕМА [версия/релиз]
.Dt НАЗВАНИЕ_ДОКУМЕНТА [номер_раздела] [том]
.Sh НАЗВАНИЕ
.Nm название
.Nd одна строка с описанием названия
.Sh СИНТАКСИС
.Sh ОПИСАНИЕ
.\" Следующие макросы должны быть раскомментированы
.\" и использованы по необходимости.  Эта сеция справедлива
.\" только для описания возвращаемых значений страниц руководства из секций #2 и #3.
.\" .Sh ВОЗВРАЩАЕМЫЕ ЗНАЧЕНИЯ
.\" Эта секция необходима только для страниц разделов #1, #6, #7 и #8
.\" .Sh ПЕРЕМЕННЫЕ ОКРУЖЕНИЯ
.\" .Sh ФАЙЛЫ
.\" .Sh ПРИМЕРЫ
.\" Следующая секция нужна только для разделов #1, #6, #7 и #8
.\"     (возвращаемые shell-значения команды и
.\"       диагностика fprintf/stderr)
.\" .Sh ДИАГНОСТИКА
.\" Следующая секция есть только в разделах #2 и #3
.\" .Sh ОШИБКИ
.\" .Sh СМ.ТАКЖЕ
.\" .Sh СООТВЕТСТВИЕ
.\" .Sh ИСТОРИЯ
.\" .Sh АВТОРЫ
.\" .Sh ЗАМЕЧАНИЯ
</pre>
</blockquote>

<p>

Первыми в шаблоне находятся макросы:
(<b>., ., .



</b>

)

 
дата документа, операционная система страницы руководства или некоторый
источник, для которого разрабатывалась или модифицировалась страница,
и заголовок страницы,
(<i>в верхнем регистре</i>

)

вместе с номером раздела, которому принадлежит страница.
Эти макросы однозначно идентифицируют страницу.
Они описаны ниже в секции
Sx МАКРОСЫ ЗАГОЛОВКА .

</p><p>

Все остальное в шаблоне - заголовки секций
(<b>.</b><a name="lbAM">&nbsp;</a>
</p><h2>,</h2>



)

из которых
Sx НАЗВАНИЕ ,

Sx СИНТАКСИС

и
Sx ОПИСАНИЕ

являются обязательными.
Заголовки секций описаны в разделе
Sx СТРУКТУРНЫЙ ДОМЕН СТРАНИЦЫ 

после описания
Sx СТРАНИЧНОГО ДОМЕНА .

Некоторые контекстные макросы используются для демонстрации работы
макросов форматирования страницы; рекомендуется прочесть
главу о контекстных макросах до главы о макросах форматирования.
<a name="lbAN">&nbsp;</a>
<h2>МАКРОСЫ ЗАГОЛОВКА</h2>

Макросы заголовка являются первой частью структурного домена страницы,
но описаны отдельно. Это сделано для тех, кто желает создавать
страницы руководства старого формата.
Макросы заголовка существуют для указания названия страницы или документа,
операционной системы и даты его создания.
Эти макросы вызываются только один раз в самом начале документа
и используются только для создания верхнего и нижнего колонтитулов страницы.
<dl compact="">
<p>

</p><dt><b>.
</b>


</dt><dd>
Название документа сообщает о том, что данный документ описывает.
Оно должно быть написано
<b>ПРОПИСНЫМИ БУКВАМИ</b>

вследствие некоторых ограничений troff.
Номер секции может быть от 1-ого до 8-и,
и, если он задан, название тома можно опустить.
Название тома может быть произвольным или таким:
<p>

</p><dl compact="">
<p>

</p><dt><b>AMD<tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt>UNIX Ancestral Manual Documents (Документы предыдущих версий)</b>


</dt><dd>
</dd><dt><b>SMM<tt>&nbsp;&nbsp;&nbsp;&nbsp;</tt>UNIX System Manager's Manual (Документы системного администратора)</b>


</dt><dd>
</dd><dt><b>URMUNIX Reference Manual (Справочное руководство)</b>


</dt><dd>
</dd><dt><b>PRMUNIX Programmer's Manual (Руководство программиста)</b>


</dt><dd>
</dd></dl>
<p>

</p><p>

По умолчанию<br>
для секций #1,#6 и #7 принимается том
<b>URM</b>

 
для секции #8 - 
<b>SMM</b>

 
а для секций #2, #3, #4 и #5 -
<b>PRM</b>

 
</p></dd><dt><b>.операционная_система номер_версии

</b>


</dt><dd>
Название операционной системы должно быть
общепринятым сокращением, например,
<b>BSD</b>

 
<b>FreeBSD</b>

или
<b>ATT</b>

 
Номер версии должен быть указан в стандартном формате
заданной версии системы, например, 4.3, 4.3+Tahoe, V.3, V.4.
Нераспознанные параметры выводятся в нижнем колонтитуле страницы, "как есть".
Например, стандартный нижний колонтитул выглядит примерно так:
<p>


</p><blockquote><tt>.BSD 4.3,

</tt></blockquote>
<p>


</p><blockquote><tt>.FreeBSD 2.2

</tt></blockquote>
<p>

или (для местного набора страниц)
</p><p>


</p><blockquote><tt>.Отдел КБ

</tt></blockquote>
<p>

По умолчанию
`.без

'

параметров задан как
<b>BSD</b>

в машинозависимом файле
/usr/share/tmac/mdoc/doc-common

 
На самом деле, это должно автоматически преобразовываться, как в случае с
<b>LOCAL</b>

 
Заметьте, что если макрос
`.не

'

указан, то левый нижний угол страницы будет выглядеть непривлекательно.
</p></dd><dt><b>.месяц день, год

</b>


</dt><dd>
Дата должна быть написана в стандартном (для англоязычных стран) варианте:
<p>



</p><blockquote><tt>Январь 25, 1989</tt></blockquote>
</dd></dl>
<p>

<a name="lbAO">&nbsp;</a>
</p><h2>ВВЕДЕНИЕ В СПРАВОЧНЫЙ И ОБЩИЙ ТЕКСТОВЫЙ ДОМЕНЫ</h2>

<a name="lbAP">&nbsp;</a>
<h3>Что в имени тебе моем...</h3>

Названия макросов страничного домена появились из повседневного
информационного языка, используемого для описания команд, процедур
и сопутствующих файлов.
Несколько различающиеся варианты этого языка используются для
описания трех аспектов написания страницы руководства:
во-первых, это описание использования макросов
<b>-mdoc</b>

 
во-вторых - описание команд
UNIX
<i>при помощи</i>

<b>-mdoc</b>

 
и в-третьих, -
описание команды пользователю в обычном виде;
то есть описание команды в виде текста на странице руководства.
<p>

В первом случае макросы
<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=troff&amp;category=1">troff</a>(1)


сами по себе являются командами;
общий синтаксис команд troff:

</p><blockquote>

.Va параметр1 параметр2 ... параметр9
</blockquote>

<p>

`.<i>-</i>

'

это макрос, а все, что следует за ним, - его параметры.
Во втором случае при описании команды
UNIX
используются контекстные макросы; командная строка в секции
Sx СИНТАКСИС

обычно выглядит так:

</p><blockquote>

<b>filter</b>

[-<b>флаг</b>

]

<i>вх.файл вых.файл</i>

</blockquote>

<p>

Здесь,
<b>filter</b>

- это название команды, заключенная в квадратные скобки строка;
-<b>флаг</b>

- это необязательный (это указано квадратными скобками)
<i>параметр-флаг</i>

 
Согласно терминологии
<b>-mdoc </b>

<i>вх.файл</i>

и
<i>вых.файл</i>

называются
<i>параметрами</i>

 
Создается этот формат при помощи следующих макросов:

</p><blockquote>
<pre>.Nm filter
.Op Fl флаг
.Ar вх.файл вых.файл
</pre>
</blockquote>

<p>

Третий случай представляет собой взаимодействие первых двух
с добавлением некоторых деталей.
Аргументы
<i>вх.файл</i>

и
<i>вых.файл</i>

из предыдущего примера рассматриваются как 
<i>операнды</i>

или
<i>аргументы файла</i>

 
Списки аргументов командной строки могут быть довольно
длинными:
</p><dl compact="">
<p>

</p><dt><b>make</b>


</dt><dd>
[-<b>e iknqrstv</b>

]

[-<b>D </b><i>переменная</i>



]

[-<b>d </b><i>флаги</i>



]

[-<b>f </b><i>makefile</i>



]

-words

[-<b>I </b><i>каталог</i>



]

[-<b>j </b><i>максимальное_количество_задач</i>



]



[<i>переменная=значение</i>

]

-words

[<i>цель_сборки ...</i>

]

</dd></dl>
<p>



</p><p>

Далее Вы можете рассмотреть команду 
<b>make</b>

и определить аргумент
<i>makefile </i>

как аргумент флага
-<b>f</b>

 
имея в виду, что операнд файла 
<i>цель_сборки </i>

является дополнительным.
Такие детали могут предотвратить появление путаницы.
Так или иначе, пакет 
<b>-mdoc</b>

не имеет макроса для аргумента
<i>к</i>

флагу.
Вместо этого аргумент макроса
`<i>file ...</i>

'

используется
для такого операнда или аргумента файла, как
<i>цель_сборки</i>

 
так же, как и для аргумента к флагу, например, 
<i>variable</i>

 
Командная строка make состоит из:

</p><blockquote>
<pre>.Nm make
.Op Fl eiknqrstv
.Op Fl D Ar переменная
.Op Fl d Ar флаги
.Op Fl f Ar makefile
.Op Fl I Ar каталог
.Op Fl j Ar максимальное_количество_задач
.Op Ar переменная=значение
.Bk -words
.Op Ar цель_сборки ...
.Ek
</pre>
</blockquote>

<p>

Макросы
`.и

'

`.рассматриваются

'

в 
Sx Keeps .

<a name="lbAQ">&nbsp;</a>
</p><h3>Общий синтаксис</h3>

Страничный домен макросов и общий текстовый домен макросов имеют
одинаковый синтаксис, но есть ряд небольших различий:
`.<i>file ...</i>

'

 
`.-

'

 
`.<b></b>

'

 
и
`.различаются

'

только, когда вызываются без аргументов;
`.Fn и

'

`.определяют

'

порядок своих аргументов в списках, а макросы
`.[и]

'

`.Fn имеют

'

ограничения глубины вложенных вызовов макросов.
Все макросы содержания должны распознавать и поддерживать пунктуацию, 
оставляя пробел перед знаком. Если запрос делается в такой форме:
<p>


</p><blockquote><tt>.</tt><b>sptr, ptr),</b>

</blockquote>
<p>

то результат будет следующим:
</p><p>


</p><blockquote><tt></tt><b>sptr, ptr),</b>

</blockquote>
<p>

Пунктуация не была распознана, и вся информация выведена в обычном текстовом
режиме. Поэтому перед знаками следует сразу ставить пробелы:
</p><p>


</p><blockquote><tt>.</tt><b>sptr , ptr ) ,</b>

</blockquote>
<p>

В этом случае результат будет следующим:
</p><p>


</p><blockquote><tt></tt><b>sptr , ptr</b>

 </blockquote>
 
<p>

Теперь пунктуация распознана и выведена в формате, отличном от текстового.
</p><p>

Для того, чтобы убрать специальное значение символа, используйте
`\&amp;'

Troff


является языком макросов, и поэтому возникают проблемы
при написании строки, содержащей 
математические, логические или цитирующие символы:

</p><blockquote>
<pre>{+,-,/,*,%,&lt;,&gt;,&lt;=,&gt;=,=,==,&amp;,`,',"}
</pre>
</blockquote>

<p>

Проблема заключается в том, что
troff


может воспринять эти знаки как составляющие команды. Для того, чтобы этого
не произошло, рекомендуется обособлять такие знаки при помощи
`\&amp;'

Типичный синтаксис показан в макросе содержания, приведенном ниже 
`.<i></i>

'

<a name="lbAR">&nbsp;</a>
</p><h2>ДОМЕН СТРУКТУРЫ СТРАНИЦ</h2>

<a name="lbAS">&nbsp;</a>
<h3>Адреса</h3>

Макрос адреса определяет структуру адреса в форме addr1[,addr2[,addr3]].
<p>


</p><blockquote><tt>Использование: .</tt><i>адрес ... </i>

</blockquote>
<dl compact="">
<p>

</p><dt><b>.</b><i>addr1</i>



</dt><dd>
<i>addr1</i>

</dd><dt><b>.</b><i>addr1</i>



</dt><dd>
<i>addr1</i>

 
</dd><dt><b>.</b><i>addr1&nbsp;, file2</i>



</dt><dd>
<i>addr1 , file2</i>

</dd><dt><b>.</b><i>f1&nbsp;, f2&nbsp;, f3:</i>



</dt><dd>
<i>f1 , f2 , f3</i>

 
</dd><dt><b>.</b><i>addr&nbsp;)&nbsp;),</i>



</dt><dd>
<i>addr ) )</i>

 
</dd></dl>
<p>

</p><p>

Вызов 
`.<i>без</i>

'

аргументов будет ошибочным.
Значение
`.<i>может</i>

'

быть вызвано и обработано другими макросами.
<a name="lbAT">&nbsp;</a>
</p><h3>Автор</h3>

Макрос
`.An используется

'

для указания имени автора документа или страницы 
руководства. Любые аргументы, стоящие после имени, считаются 
пунктуационными знаками.
<p>


</p><blockquote><tt>Использование: .An </tt>имя_автора 

</blockquote>
<dl compact="">
<p>

</p><dt><b>.An </b>Joe&nbsp;Author



</dt><dd>
An Joe Author

</dd><dt><b>.An </b>Joe&nbsp;Author,



</dt><dd>
An Joe&nbsp;Author ,

</dd><dt><b>.An </b>Joe&nbsp;Author&nbsp;Aq&nbsp;<a href="mailto:nobody@FreeBSD.ORG">nobody@FreeBSD.ORG</a>



</dt><dd>
An Joe Author Aq <a href="mailto:nobody@FreeBSD.ORG">nobody@FreeBSD.ORG</a>

</dd><dt><b>.An </b>Joe&nbsp;Author&nbsp;)&nbsp;),



</dt><dd>
An Joe Author ) ) ,

</dd></dl>
<p>

</p><p>

Макрос 
`.An может

'

быть вызван и обработан.
Вызов макроса 
`.An без

'

аргумента приведет к ошибке.
<a name="lbAU">&nbsp;</a>
</p><h3>Параметры</h3>

Аргумент макроса 
`.<i>file ...</i>

'

может
быть использован, когда есть ссылка
на аргумент командной строки.
<p>


</p><blockquote><tt>Использование: .</tt><i>аргумент ... </i>

</blockquote>
<dl compact="">
<p>

</p><dt><b>.</b><i>file ...</i>



</dt><dd>
<i>file ...</i>


</dd><dt><b>.</b><i>file1</i>



</dt><dd>
<i>file1</i>

</dd><dt><b>.</b><i>file1</i>



</dt><dd>
<i>file1</i>

 
</dd><dt><b>.</b><i>file1 file2</i>



</dt><dd>
<i>file1 file2</i>

</dd><dt><b>.</b><i>f1 f2 f3:</i>



</dt><dd>
<i>f1 f2 f3</i>

 
</dd><dt><b>.</b><i>file&nbsp;)&nbsp;),</i>



</dt><dd>
<i>file ) )</i>

 
</dd></dl>
<p>

</p><p>

Если производится вызов
`.<i>file ...</i>

'

без
аргумента, то читаемое значение равно
`<i>file ...</i>

'

 
Макрос
`.<i>file ...</i>

'

может
быть вызван и обработан.
<a name="lbAV">&nbsp;</a>
</p><h3>Задание конфигурации (только раздел #4)</h3>

Пример использования макроса
`.<b>можно</b>

'

найти в  
<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=config&amp;category=8">config</a>(8)


Этот макрос использует двойные кавычки.
<p>

</p><dl compact="">
<p>

</p><dt><b>device le0 at scode?</b>


</dt><dd>
пишется в виде строки:
`.<b>device</b>

'

le0 at scode? .
</dd></dl>
<p>

<a name="lbAW">&nbsp;</a>
</p><h3>Модификатор команд</h3>

модификатор команд идентичен команде
`.-

'

(флаг),
за исключением того, что макрос
`.<b>не</b>

'

требует тире перед каждым аргументом.
Обычно флаги отмечаются предшествующим им тире, но некоторые команды не 
используют этот прием. Модификаторы команд можно описать и совместно с 
интерактивными командами, такими, как команды редактирования.
См.
Sx Flags .

<a name="lbAX">&nbsp;</a>
<h3>Определенные переменные</h3>

Переменная, которая задана во вложеном файле, определена 
макросом
`.<b></b>

'

<p>


</p><blockquote><tt>Использование: .</tt><b>определенная_переменная ... </b>

</blockquote>
<dl compact="">
<p>

</p><dt><b>.MAXHOSTNAMELEN</b>



</dt><dd>
<b>MAXHOSTNAMELEN</b>

</dd><dt><b>.TIOCGPGRP )</b>



</dt><dd>
<b>TIOCGPGRP</b>

 
</dd></dl>
<p>

</p><p>

Вызов 
`.<b>без</b>

'

аргумента приведет к ошибке.
`.<b>может</b>

'

быть вызван и обработан.
<a name="lbAY">&nbsp;</a>
</p><h3>Коды ошибок (только раздел #2)</h3>

Макрос кодов ошибок
`.Er определяет

'

коды возвращаемых ошибок
для второго раздела библиотечных функций.
Во втором примере, приведенном ниже, показано,
как
`.Er используется

'

совместно с 
`.Bq макросом

'

общего текстового домена.
<p>


</p><blockquote><tt>Использование: .Er </tt>КОД_ОШИБКИ ... 

</blockquote>
<dl compact="">
<p>

</p><dt><b>.Er </b>ENOENT



</dt><dd>
Er ENOENT

</dd><dt><b>.Er </b>ENOENT&nbsp;);



</dt><dd>
Er ENOENT ) ;

</dd><dt><b>.Bq </b>Er ENOTDIR



</dt><dd>
Bq Er ENOTDIR

</dd></dl>
<p>

</p><p>

Вызов 
`.Er без

'

аргумента приведет к ошибке.
Макрос
`.Er можно

'

вызвать и обработать.
<a name="lbAZ">&nbsp;</a>
</p><h3>Переменные окружения</h3>

Макрос
`.<b>задает</b>

'

переменные окружения.
<p>


</p><blockquote><tt>Использование: .</tt><b>аргумент ... </b>

</blockquote>
<dl compact="">
<p>

</p><dt><b>.DISPLAY</b>



</dt><dd>
<b>DISPLAY</b>

</dd><dt><b>.PATH</b>



</dt><dd>
<b>PATH</b>

 
</dd><dt><b>.PRINTER&nbsp;)&nbsp;),</b>



</dt><dd>
<b>PRINTER ) )</b>

 
</dd></dl>
<p>

</p><p>

Вызов 
`.<b>без</b>

'

аргумента вызовет ошибку.
Макрос
`.<b>может</b>

'

быть вызван и обработан.
<a name="lbBA">&nbsp;</a>
</p><h3>Параметры функции</h3>

Макрос
`.Fa используется

'

для ссылки на аргумент функции (параметр) вне раздела
Sx СИНТАКСИС

или если список параметров внутри раздела 
Sx СИНТАКСИС

слишком длинный для обработки его макросом 
`.Fn и

'

вложенными в него макросами 
`.Fo и

'

`.Fc 

'

`.Fa может

'

также использоваться для ссылок на члены структуры.
<p>


</p><blockquote><tt>Использование: .Fa </tt>аргумент_функции ... 

</blockquote>
<dl compact="">
<p>

</p><dt><b>.Fa </b>d_namlen&nbsp;)&nbsp;),



</dt><dd>
Fa d_namlen ) ) ,

</dd><dt><b>.Fa </b>iov_len



</dt><dd>
Fa iov_len

</dd></dl>
<p>

</p><p>

Вызов макроса
`.Fa без

'

аргумента приведет к ошибке.
`.Fa может

'

быть вызван и обработан.
<a name="lbBB">&nbsp;</a>
</p><h3>Определение функции</h3>

Макрос
`.Fd используется

'

в разделе
Sx СИНТАКСИС

с функциями из второго и третьего разделов.
Макрос
`.Fd не

'

может вызвать другой макрос и не может быть вызван другим макросом.
<p>


</p><blockquote><tt>Использование: .Fd </tt>файл (или определенная функция)

</blockquote>
<p>

В разделе 
Sx СИНТАКСИС

запрос
`.Fd вызывает

'

разбиение строки в том случае, если соответствующая функция задана, 
а разбиения строки все еще не произошло.
После этого остаются удобные для работы вертикальные пробелы
между предыдущим и последующим вызовом функций.
<a name="lbBC">&nbsp;</a>
</p><h3>Флаги</h3>

Макрос
`.-

'

поддерживает
разбиение командной строки и требует указания тире до флага
`-'

<p>


</p><blockquote><tt>Использование: .-</tt><b>аргумент ... </b>

</blockquote>
<dl compact="">
<p>

</p><dt><b>.-

</b>


</dt><dd>
-


</dd><dt><b>.-cfv</b>



</dt><dd>
-<b>cfv</b>

</dd><dt><b>.-cfv</b>



</dt><dd>
-<b>cfv</b>

 
</dd><dt><b>.-s v t</b>



</dt><dd>
-<b>s v t</b>

</dd><dt><b>.--,</b>



</dt><dd>
-<b>-</b>

 
</dd><dt><b>.-xyz&nbsp;),</b>



</dt><dd>
-<b>xyz )</b>

 
</dd></dl>
<p>

</p><p>

Макрос
`.-

'

без
аргументов возвратит тире, то есть, стандартный stdin/stdout.
Если поставить тире, то
`.-

'

вернет
два тире. Макрос
`.-

'

может
быть вызван и обработан.
<a name="lbBD">&nbsp;</a>
</p><h3>Функции (в том числе и библиотечные)</h3>

Макрос .Fn создан по правилам ANSI C.

<pre>Использование: .Fn [тип] функция [[тип] параметры ... ]
</pre>

<dl compact="">
<p>

</p><dt><b>.Fn </b>getchar



</dt><dd>
getchar ();<br>

</dd><dt><b>.Fn </b>strlen ) ,



</dt><dd>
strlen () ,);<br>

</dd><dt><b>.Fn </b>\*qint align\*q \*qconst * char *sptrs\*q



</dt><dd>
 
int (align const * char *sptrs ,);<br>

</dd></dl>
<p>

</p><p>

Вызов макроса 
`.Fn без

'

параметров приведет к ошибке.
Макрос
`.Fn может

'

быть вызван и обработан,
но любой вызов другого макроса приведет к завершению работы 
`.Fn 

'

</p><p>

Для функций, которые имеют более восьми параметров (это
бывает редко), используются макросы:
`.Fo (для

'

открытия функции),
`.Fc (для

'

закрытия функции) 
и
`.Fa (для

'

указания на аргументы функции).
Например:

</p><blockquote>
<pre>.Fo "int res_mkquery"
.Fa "int op"
.Fa "char *dname"
.Fa "int class"
.Fa "int type"
.Fa "char *data"
.Fa "int datalen"
.Fa "struct rrec *newrr"
.Fa "char *buf"
.Fa "int buflen"
.Fc
</pre>
</blockquote>

<p>

В результате получается:

</p><blockquote>

Fo int res_mkquery

Fa int op

Fa char *dname

Fa int class

Fa int type

Fa char *data

Fa int datalen

Fa struct rrec *newrr

Fa char *buf

Fa int buflen

Fc </blockquote>



<p>

Макросы
`.Fo и

'

`.Fc могут

'

быть вызваны и обработаны. В разделе 
Sx СИНТАКСИС

функции описываются с начала строки.
Если в разделе 
Sx СИНТАКСИС

представлено более одной функция и не задан тип функции,
то произойдет разбиение строки и останется место между
названием текущей функции и названием предыдущей.
В настоящее время макрос
`.Fn не

'

проверяет границы слов по длине форматирования строки
troff и поэтому может некорректно разбить строку.
В ближайшем будущем такой случай будет доработан.
<a name="lbBE">&nbsp;</a>
</p><h3>Типы функций</h3>

Этот макрос предназначен для раздела
Sx СИНТАКСИС .

он может быть использован где угодно, но
его основной целью является представление типа функции
в стандартной форме для 
Sx СИНТАКСИСА

второго и третьего разделов
(он предусматривает разбиение строки, при котором, 
название функции пишется с начала следующей строки).
<p>


</p><blockquote><tt>Использование: .Ft </tt>тип ... 

</blockquote>
<dl compact="">
<p>

</p><dt><b>.Ft </b>struct stat



</dt><dd>
<b>struct stat</b>
</dd></dl>
<p>

</p><p>

Макрос
`.Ft можно

'

вызвать при помощи других макросов.
<a name="lbBF">&nbsp;</a>
</p><h3>Интерактивные команды</h3>

Макрос
`.<b>обозначает</b>

'

интерактивные или внутренние команды.
<p>


</p><blockquote><tt>Использование: .</tt><b>аргумент ... </b>

</blockquote>
<dl compact="">
<p>

</p><dt><b>.:wq</b>



</dt><dd>
<b>:wq</b>

</dd><dt><b>.do while {...}</b>



</dt><dd>
<b>do while {...}</b>

</dd><dt><b>.setenv&nbsp;, unsetenv</b>



</dt><dd>
<b>setenv , unsetenv</b>

</dd></dl>
<p>

</p><p>

Вызов макроса
`.<b>без</b>

'

аргумента вызовет ошибку.
Макрос
`.<b>может</b>

'

быть вызван и обработан.
<a name="lbBG">&nbsp;</a>
</p><h3>Названия</h3>

Макрос
`.<b></b>

'

используется
для заголовков или подзаголовков.
Его особенностью является запоминание
первого аргумента, с которым он был вызван, что 
обычно бывает названием страницы.
При вызове макроса
`.<b></b>

'

без
аргумента он возвращается с этим первоначальным значением, что
облегчает работу автора.
Замечание:
во втором и третьем разделах страниц руководства имя функции в секции
Sx NAME

пишется с использованием макроса
`.<b></b>

'

 
а в остальных секциях и других разделах страниц руководства используется макрос
`.Fn 

'

Для интерактивных команд, таких, как
`while'

в
<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=csh&amp;category=1">csh</a>(1),


используется макрос
`.<b></b>

'

Макросы
`.<b>и</b>

'

<p>
`.<b></b>

'

почти
идентичны, их различает только 
описанная выше возможность 
`.<b></b>

'

запоминать
первый аргумент.
</p><p>


</p><blockquote><tt>Использование: .</tt><b>аргумент ... </b>

</blockquote>
<dl compact="">
<p>

</p><dt><b>.mdoc.sample</b>



</dt><dd>
<b>mdoc.sample</b>

</dd><dt><b>.\-mdoc</b>



</dt><dd>
<b>-mdoc</b>

 
</dd><dt><b>.foo&nbsp;)&nbsp;),</b>



</dt><dd>
<b>foo ) )</b>

 
</dd><dt><b>.</b>



</dt><dd>
<b></b>


</dd></dl>
<p>

</p><p>

Макрос
`.<b></b>

'

может
быть вызван и обработан.
<a name="lbBH">&nbsp;</a>
</p><h3>Опции</h3>

Макрос
`.[ставит]

'

квадратные скобки, указывающие на дополнительное значение 
их содержимого (опции), и ставит пунктуационные знаки после скобок. Макросы
`.]
'

и
`.[могут
'

использоваться несколько раз в одной строке.
<p>


</p><blockquote><tt>Использование: .</tt>[опции ... ]

</blockquote>
<dl compact="">
<p>

</p><dt><b>.</b>[[</dt><dt><b>.</b>[-<b>k</b>

]



</dt><dd>
]

]



</dd><dd>
[-<b>k</b>

]

</dd><dt><b>.</b>[-<b>k ) .</b>

]



</dt><dd>
[-<b>k</b>

 ]

 
</dd><dt><b>.</b>[-<b>k </b><i>kookfile</i>



]



</dt><dd>
[-<b>k </b><i>kookfile</i>



]

</dd><dt><b>.</b>[-<b>k </b><i>kookfile ,</i>



]



</dt><dd>
[-<b>k </b><i>kookfile</i>



]

 
</dd><dt><b>.</b>[<i>objfil </i>[<i>corfil</i>

]



]



</dt><dd>
[<i>objfil </i>[<i>corfil</i>

]



]

</dd><dt><b>.</b>[-<b>c </b><i>objfil </i>[<i>corfil ,</i>

]



]



</dt><dd>
[-<b>c </b><i>objfil </i>[<i>corfil</i>

]



]

 
</dd><dt><b>.</b>[word1 word2]



</dt><dd>
[word1 word2]

</dd></dl>
<p>

</p><p>

Макросы
`.]
'

и
`.[:
'


</p><blockquote>
<pre>.Oo
.Op Fl k Ar kilobytes
.Op Fl i Ar interval
.Op Fl c Ar count
.Oc
</pre>
</blockquote>

<p>

,- выдают результат:
[[-<b>k </b><i>kilobytes</i>



]


[-<b>i </b><i>interval</i>



]

[-<b>c </b><i>count</i>



]

]
</p><p>

Макросы
`.[,]

'

`.]
'

и
`.[могут
'

быть вызваны и обработаны.
<a name="lbBI">&nbsp;</a>
</p><h3>Пути</h3>

Макрос
`.форматирует

'

пути или имена файлов.
<p>


</p><blockquote><tt>Использование: .путь 

</tt></blockquote>
<dl compact="">
<p>

</p><dt><b>./usr/share

</b>


</dt><dd>
/usr/share

</dd><dt><b>./tmp/fooXXXXX&nbsp;)

</b>


</dt><dd>
/tmp/fooXXXXX )

 
</dd></dl>
<p>

</p><p>

Макрос
`.может

'

быть вызван и обработан.
<a name="lbBJ">&nbsp;</a>
</p><h3>Переменные</h3>

Характерная ссылка на переменную выглядит так:
<p>


</p><blockquote><tt>Использование: .</tt><i>переменная ... </i>

</blockquote>
<dl compact="">
<p>

</p><dt><b>.</b><i>count</i>



</dt><dd>
<i>count</i>

</dd><dt><b>.</b><i>settimer</i>



</dt><dd>
 
<i>settimer</i>

 
</dd><dt><b>.</b><i>int&nbsp;*prt&nbsp;):</i>



</dt><dd>
<i>int&nbsp;*prt )</i>

 
</dd><dt><b>.</b><i>char&nbsp;s&nbsp;]&nbsp;)&nbsp;),</i>



</dt><dd>
<i>char&nbsp;s ] ) )</i>

 
</dd></dl>
<p>

</p><p>

При вызове
`.<i>без</i>

'

аргумента произойдет ошибка.
Макрос
`.<i>может</i>

'

быть вызван и обработан.
<a name="lbBK">&nbsp;</a>
</p><h3>Ссылки</h3>

Макрос
`.определяет,

'

что первый аргумент - это название
страницы руководства, второй (если он есть) -номер раздела страниц или
знак пунктуации. Все остальные аргументы будут
рассматриваться как пунктуационные знаки.
<p>


</p><blockquote><tt>Использование: .man_страничка[1,...,8]

</tt></blockquote>
<dl compact="">
<p>

</p><dt><b>.mdoc

</b>


</dt><dd>
mdoc


</dd><dt><b>.mdoc

</b>


</dt><dd>
 
mdoc,


</dd><dt><b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=.mdoc&amp;category=7">.mdoc</a>(7)

</b>


</dt><dd>
<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=mdoc&amp;category=7">mdoc</a>(7)


</dd><dt><b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=.mdoc&amp;category=7">.mdoc</a>(7)))

</b>


</dt><dd>
 
<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=mdoc&amp;category=7">mdoc</a>(7))),


</dd></dl>
<p>

</p><p>

Макрос
`.может

'

быть вызван и обработан.
Вызов макроса
`.без

'

аргумента приведет к ошибке.
<a name="lbBL">&nbsp;</a>
</p><h2>ОБЩИЙ ТЕКСТОВЫЙ ДОМЕН</h2>

<a name="lbBM">&nbsp;</a>
<h3>Макрос AT&amp;T </h3>


<blockquote>
<pre>Использование: .At [v6 | v7 | 32v | V.1 | V.4] ... 
</pre>
</blockquote>

<dl compact="">
<p>

</p><dt><b>.At</b>


</dt><dd>
AT&amp;T System

</dd><dt><b>.AT&amp;T System
v6 .</b>


</dt><dd>
AT&amp;T System
v6 .
</dd></dl>
<p>

</p><p>

Макрос
`.AT&amp;T System
'

<i>не</i>

вызывается и
<i>не</i>

обрабатывается. 
Обычно он использует сразу два аргумента.
<a name="lbBN">&nbsp;</a>
</p><h3>Макрос BSD</h3>


<blockquote><tt>Использование: .BSD [версия/релиз] ... 
</tt></blockquote>
<dl compact="">
<p>

</p><dt><b>.Bx</b>


</dt><dd>
BSD </dd><dt><b>.BSD 4.3 .
</b>


</dt><dd>

BSD 4.3
 
</dd></dl>
<p>

</p><p>

Макрос
`.BSD может
'

быть вызван и обработан.
<a name="lbBO">&nbsp;</a>
</p><h3>Макрос FreeBSD </h3>


<blockquote>
<pre>Использование: .Fx версия.релиз ... 
</pre>
</blockquote>

<dl compact="">
<p>

</p><dt><b>.Fx </b>2.2 .



</dt><dd>
Fx 2.2 .

</dd></dl>
<p>

</p><p>

Макрос
`.Fx <i>не</i>



'

вызывается и
<i>не</i>

обрабатывается. 
Обычно он использует два аргумента.
<a name="lbBP">&nbsp;</a>
</p><h3>Макрос UNIX </h3>


<blockquote><tt>Использование: .UNIX
</tt></blockquote>
<dl compact="">
<p>

</p><dt><b>.Ux</b>


</dt><dd>
UNIX
</dd></dl>
<p>

</p><p>

Макрос
`.UNIX
'

может
быть вызван и обработан.
<a name="lbBQ">&nbsp;</a>
</p><h3>Макросы выделения</h3>

Принцип выделения идентичен принципу цитирования.
Объект, подлежащий выделению, помещается между двумя символами,
такими, как кавычки. В этом документе для цитирования и
выделения используются почти одна и та же пунктуация.
Для указания на обособление используются макросы, оканчивающиеся буквой
`q'

А так как они могут использоваться на протяжении текста, то
в эту область может попасть и объект цитирования (или наоборот, 
в объект цитирования попадет объект, подлежащий выделению), поэтому внутри
можно использовать макрос цитирования, прописанный в одной строке.
Поэтому для каждого объекта обособления можно еще использовать 
два макроса: открывающий и закрывающий -
они оканчиваются строчными буквами
`o'

и
`c'

соответственно.
<p>



</p><blockquote>

<dl compact="">
<p>

<i>Обособ.<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>Закрыв.<tt>&nbsp;</tt>Открыв.<tt>&nbsp;</tt>действие<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>Результат</i>

.Aq<tt>&nbsp;</tt>.Ac<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>.Ao<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>Обособление угловыми скобками&lt;string&gt;<br>
.Bq<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>.Bc<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>.Bo<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>Обособление квадратными скобками<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>[string]<br>
.Dq<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>.Dc<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>.Do<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>Обособление двумя единичными кавычками<tt>&nbsp;&nbsp;</tt>``string''<br>
<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>.Ec<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>.Eo<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>Обособление значками XX<tt>&nbsp;</tt><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>XXstringXX<br>
.Pq<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>.Pc<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>.Po<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>Обособление круглыми скобками<tt>&nbsp;&nbsp;&nbsp;</tt>(string)<br>
.Ql<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>Литературное цитирование <tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>`st' or string<br>
.Qq<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>.Qc<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>.Qo<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>Обособление двойными кавычками<tt>&nbsp;&nbsp;</tt>"string"<br>
.Sq<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>.Sc<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>.So<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>Обособление кавычками<tt>&nbsp;&nbsp;&nbsp;</tt><tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>`string'<br>
</p></dl>
<p>

</p></blockquote>

<p>

Все макросы обособления, кроме приведенных ниже, могут
быть вызваны и обработаны.
Все поддерживают пунктуацию, если она представлена одним знаком
и разделена пробелами. Макросы обособления проверяют
открывающуюся и закрывающуюся пунктуацию на расположение ее 
в области обособления. Это делает возможным проведение компоновки.
</p><dl compact="">
<p>

</p><dt><b>.Ec </b>, .Eo Эти макросы определяют первый аргумент как открывающий,



</dt><dd>
а второй как закрывающий.
</dd><dt><b>.`Макрос'

</b>


</dt><dd>
литературного цитирования по-разному работает в 
troff


и
nroff.


Если он форматируется 
nroff,


то он всегда обособлен. Если форматируется в troff, то он обособляется
только в том случае, если состоит менее чем из трех символов. Это выполняется
для того, чтобы сделать короткие строки более заметными. Макрос приставки
</dd><dt><b>.не может быть вызван, но может быть обработан. Если выполнить команду строки

</b>


</dt><dd>
<dl compact="">
<p>

</p><dt><b>.( Fa </b>name2



</dt><dd>
 
то результат будет следующим:
( Fa name2



</dd></dl>
<p>

</p><p>

Макрос
`.<b>(нет</b>

'

пробела) производит аналогичное действие.
</p></dd></dl>
<p>

</p><p>


Примеры обособления:
</p><dl compact="">
<p>

</p><dt><b>.Aq </b>Aq </dt><dt><b>.Aq </b><i>ctype.h&nbsp;),</i>



</dt><dd>



</dd><dd>
Aq Ar ctype.h ) ,

</dd><dt><b>.Bq </b>Bq </dt><dt><b>.Bq </b><i>Greek , French .</i>



</dt><dd>



</dd><dd>
Bq Em Greek , French .

</dd><dt><b>.````</b></dt><dt><b>.``string abc .''

</b>


</dt><dd>
''

''



</dd><dd>
``string abc''

 
</dd><dt><b>.``'^[A-Z]'''

</b>


</dt><dd>
``'^[A-Z]'''

</dd><dt><b>.`man'

</b>


</dt><dd>
mdoc
`man'

mdoc
</dd><dt><b>.Qq </b>Qq </dt><dt><b>.Qq </b>string ) ,



</dt><dd>



</dd><dd>
Qq string ) ,

</dd><dt><b>.Qq </b>string <b>),</b>



</dt><dd>
Qq string Ns ),

</dd><dt><b>.``</b></dt><dt><b>.`string'

</b>


</dt><dd>
'

'



</dd><dd>
`string'

</dd></dl>
<p>

</p><p>

Примером вложенного макроса может служить макрос опций
`.[]

'

Он был создан на основе вышеперечисленных макросов.
Макросы расширенного списка аргументов
`.
'

и
`.
'

были
также созданы на основе этих функций и могут служить хорошим примером
использования пакета макросов
<b>-mdoc</b>

<a name="lbBR">&nbsp;</a>
</p><h3>No-[или макроса обычного текста.]

</h3>

Макрос
`.<b>используется</b>

'

в случае, когда командная строка 
<i>не</i>

должна быть форматирована и подчиняется синтаксису содержания макроса.
<a name="lbBS">&nbsp;</a>
<h3>Макрос отключения пробелов</h3>

Макрос
`.<b>убирает</b>

'

ненужные пробелы между его запросами. Он обычно используется
в старых списках аргументов, где между флагом и аргументом нет пробела:
<dl compact="">
<p>

</p><dt><b>.</b>[-<b>I </b><i>каталог</i>



]



</dt><dd>
в результате получается:
[-<b>I </b><i>каталог</i>



]

</dd></dl>
<p>

</p><p>

Замечание: макрос
`.<b>всегда</b>

'

вызывает макрос
`.<b>после</b>

'

удаления пробелов, если за ним не следует другой макрос.
Макрос
`.<b>может</b>

'

быть вызван и обработан.
<a name="lbBT">&nbsp;</a>
</p><h3>Ссылки на раздел</h3>

Макрос
`.Sx определяет

'

ссылку на заголовок раздела в этом документе.
Макрос может быть вызван и обработан.
<p>

</p><dl compact="">
<p>

</p><dt><b>.Sx </b>ФАЙЛЫ



</dt><dd>
Sx ФАЙЛЫ

</dd></dl>
<p>

<a name="lbBU">&nbsp;</a>
</p><h3>Ссылки и цитаты</h3>

Этот макрос ограниченно поддерживает ссылки.
В лучшем случае, он помогает составлять их
вручную по определенному шаблону.
<p>

</p><dl compact="">
<p>

</p><dt><b>.Rs</b>


</dt><dd>
Начало ссылок.
Вызывает разбиение строки, начинает список ссылок
и продолжает его до конца макроса.
</dd><dt><b>.Re</b>


</dt><dd>
Конец ссылок.
Ссылка печатается.
</dd><dt><b>.%A</b>


</dt><dd>
Имя автора, одно на каждый вызов.
</dd><dt><b>.%B</b>


</dt><dd>
Название книги.
</dd><dt><b>.%C</b>


</dt><dd>
Город/издательство.
</dd><dt><b>.%D</b>


</dt><dd>
Дата.
</dd><dt><b>.%J</b>


</dt><dd>
Название журнала.
</dd><dt><b>.%N</b>


</dt><dd>
Номер журнала.
</dd><dt><b>.%O</b>


</dt><dd>
Дополнительная информация.
</dd><dt><b>.%P</b>


</dt><dd>
Номер страницы.
</dd><dt><b>.%R</b>


</dt><dd>
Название отчета.
</dd><dt><b>.%T</b>


</dt><dd>
Заголовок статьи.
</dd><dt><b>.%V</b>


</dt><dd>
Том(-а).
</dd></dl>
<p>

</p><p>

Макросы, начинающиеся с 
`%'

,
не вызываются и обрабатываются только макросом торговой марки
для того, чтобы торговые марки правильно и красиво печатались 
при выводе их с
troffNs/NsXrditroff.


<a name="lbBV">&nbsp;</a>
</p><h3>Возвращаемые значения</h3>

Макрос
`.Rv форматирует

'

текст для раздела
Sx ВОЗВРАЩАЕМЫЕ ЗНАЧЕНИЯ .

<p>


</p><blockquote><tt>Применение: .Rv </tt>[-std функция]

</blockquote>
<p>

`.Rv -std

'

atexit
создаст текст:
</p><p>



Rv -std atexit



</p><p>

Опция
-<b>std</b>

применима только для второго и третьего разделов страниц руководства.
<a name="lbBW">&nbsp;</a>
</p><h3>Торговые марки (акронимы и названия их видов)</h3>

Макрос "торговые марки" - это макрос для всех слов 
верхнего регистра длиннее двух символов.
<p>


</p><blockquote><tt>Использование: .</tt><b>символ ... </b>

</blockquote>
<dl compact="">
<p>

</p><dt><b>.DEC</b>



</dt><dd>
<b>DEC</b>

</dd><dt><b>.ASCII</b>



</dt><dd>
<b>ASCII</b>

</dd></dl>
<p>

</p><p>

Макрос
`.<b>может</b>

'

быть обработан и вызван другими макросами.
<a name="lbBX">&nbsp;</a>
</p><h3>Расширенные параметры</h3>

Макросы
`.
'

и
`.
'

позволяют
расширить список аргументов в пределах макроса.
Списки аргументов не могут быть быть расширены в макросах, допускающих
расположения всех аргументов только в одной строке, например:
`.[]

'

<p>

Далее приведен пример использования
`.
'

совместно
с макросом отключения пробела:

</p><blockquote>
<pre>.Sm off
.It Xo Sy I Ar операция
.No \en Ar счетчик No \en
.Xc
.Sm on
</pre>
</blockquote>

<p>

Получается:

</p><blockquote>

<dl compact="">
<p>


</p><dt><b>
I </b><i>операция</i>



<b>\n </b><i>счетчик </i><b>\n</b>



</dt><dd>


</dd></dl>
<p>

</p></blockquote>

<p>

И еще один пример:

</p><blockquote>
<pre>.Sm off
.It Cm S No / Ar старый_шаблон Xo
.No / Ar новый_шаблон
.No / Op Cm g
.Xc
.Sm on
</pre>
</blockquote>

<p>

Результат:

</p><blockquote>

<dl compact="">
<p>


</p><dt><b>S / </b><i>старый_шаблон 
</i>



<b>/ </b><i>новый_шаблон</i>



<b>/ </b>[<b>g</b>

]



</dt><dd>


</dd></dl>
<p>

</p></blockquote>

<p>

Еще одна область применения макроса
`.
'

совместно
с макросом обособления - проверка значения переменной.

</p><blockquote>
<pre>.It Xo
.Ic .ifndef
.Oo \&amp;! Oc Ns Ar переменная
.Op Ar оператор переменная ...
.Xc
</pre>
</blockquote>

<p>

Результат

</p><blockquote>

<dl compact="">
<p>

</p><dt><b>
</b>

<b>.ifndef</b>

[! <b></b><i>переменная</i>



]

[<i>оператор переменная ...</i>

]

</dt><dd>

</dd></dl>
<p>

</p></blockquote>

<p>

Все вышеперечисленные примеры использовали макрос
`.
'

в
макросе списка аргументов
`.
'

 
В первых двух примерах пробелы были убраны;
в третьем случае пробелы надо было убрать только в определенной части.
Для того, чтобы сделать это, удостоверьтесь, что макросы
`.
'

и
`.</p><dd>
'

поставлены
именно так, как это описано в третьем примере. Если макрос
`.
'

не
единственный в списке аргументов
`.
'

 
то трудно будет определить, как и откуда будут удалены пробелы.
В этом случае макрос
`.<b>(макрос</b>

'

отключения пробелов) не должен оказаться первым или последним
макросом в строке. Из 900 страниц руководства
(а реально около 1500 страниц), представленных в
BSD , только пятнадцать используют макрос
`.
'

 
<a name="lbBY">&nbsp;</a>
<h2>ДОМЕН СТРУКТУРЫ СТРАНИЦ</h2>

<a name="lbBZ">&nbsp;</a>
<h3>Заголовки разделов</h3>

Первые три макроса заголовков разделов
`.<a name="lbCA">&nbsp;</a>
<h2>,</h2>

'

приведенных ниже, описываются на каждой странице руководства.
Остальные заголовки разделов описываются по усмотрению автора. Макрос
`.<a name="lbCB">&nbsp;</a>
<h2>может</h2>

'

иметь до девяти аргументов.
Макрос может быть обработан, но его нельзя вызвать.
<dl compact="">
<p>

</p><dt><b>.</b></dt></dl><b>

</b><a name="lbCC">&nbsp;</a>
<h2>НАЗВАНИЕ</h2>



Макрос
`.<a name="lbCD">&nbsp;</a>
<h2>НАЗВАНИЕ</h2>

'

является обязательным. Если не указать заголовки, нижние колонтитулы
и страничный формат, то макросы не будут использованы и все будет
выглядеть неаккуратно. Раздел
Sx НАЗВАНИЕ

состоит минимум из трех частей.
Первая - это макрос названий
`.<b></b>

'

 
который называет сам предмет, описанный на странице руководства.
Далее следует макрос описания имени
`. - ,

'

который отделяет название предмета от его описания.
Описание, по возможности, должно быть как можно более кратким и ясным,
так как на странице недостаточно места для него.

.Sh СИНТАКСИС
Раздел
Sx СИНТАКСИС

описывает типичное применение рассматриваемого предмета.
Макросы, которые в этом участвуют:
`.Nm'

,
`.Cd'

,
`.Fn'

,
(и, возможно, макросы
`.Fo'

,
`.Fc'

,
`.Fd'

,
`.Ft'

).
Макрос названия функции 
`.Fn'

должен присутствовать во втором и третьем разделах, макрос 
`.<b></b>

'

требуется
в разделах под номерами: 1, 5, 6, 7 и 8.
Четвертый раздел требует использования макросов
`.Nm'

, 
`.Fd'

или
`.Cd'

Для описания синтаксиса, как показано в примере ниже,
могут понадобиться другие макросы:
<p>


</p><blockquote>

<b>cat</b>

[-<b>benstuv</b>

]

[-

]

<i>file ...</i>


</blockquote>

<p>

Были использованы следующие макросы:
</p><p>


</p><blockquote><tt>.</tt><b>cat</b>

</blockquote>

<blockquote><tt>.</tt>[-<b>benstuv</b>

]

</blockquote>

<blockquote><tt>.</tt>[-

]

</blockquote>

<blockquote><tt>.</tt><i>file ...</i>

</blockquote>
<p>

<b>Замечание</b>

 
Макросы
`.[,]

'

`.-

'

 
и
`.<i>file ...</i>

'

распознают
символ вертикальной черты
`'

 
поэтому строка типа:
</p><p>


</p><blockquote><tt>".</tt>[-<b>a | -b</b>



]

</blockquote>
<p>

,-
будет обработана.
Troff


обычно интерпретирует   как специальный символ. Прочтите
Sx PREDEFINED STRINGS

для того, чтобы использовать символ  в других ситуациях.

.Sh ОПИСАНИЕ
В большинстве случаев первое, что пишется в разделе
Sx ОПИСАНИЕ

,- это краткое описание команды, функции или файла с последующим списком опций
и пояснений к ним. Для того, чтобы создать такой список, используются макросы
`.</p><dl compact="">
<p>

'

(начало
списка),
`.</p><dt><b>(элемент</b>

'

списка) и
`.</dt></dl>
<p>

'

(конец
списка), см. ниже
Sx списки и колонки.

</p><p>

</p><p>

Следующие 
`.<a name="lbCE">&nbsp;</a>
</p><h2>-названия</h2>

'

разделов являются частью страничного формата и должны
использоваться в соответствии с контекстом. Они приведены в том порядке,
в котором должны находиться в тексте.
<dl compact="">
<p>

</p><dt><b>.</b></dt></dl><b>

</b><a name="lbCF">&nbsp;</a>
<h2>ПЕРЕМЕННЫЕ ОКРУЖЕНИЯ</h2>



Раздел
Sx ПЕРЕМЕННЫЕ ОКРУЖЕНИЯ

описывает все используемые переменные окружения,
их поведение и/или использование.

.Sh ПРИМЕРЫ
Есть несколько способов создавать примеры. Прочтите раздел
Sx ПРИМЕРЫ ,

приведенный ниже.

.Sh ФАЙЛЫ
Файлы, используемые или созданные предметом описания, 
должны быть показаны при помощи макроса
`.в

'

разделе 
Sx ФАЙЛЫ .


.Sh СМ. ТАКЖЕ
Ссылки на другие материалы по теме страницы руководства и ссылки
на другие страницы должны находиться в разделе
Sx СМ. ТАКЖЕ .

Перекрестные ссылки указываются
при помощи макроса
`..

'

Перекрестные ссылки в разделе 
Sx СМ. ТАКЖЕ

должны быть отсортированы по номерам разделов,
затем в алфавитном порядке и разделены запятыми. Например:
<p>

<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=ls&amp;category=1">ls</a>(1),


<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=ps&amp;category=1">ps</a>(1),


<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=group&amp;category=5">group</a>(5),


<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=passwd&amp;category=5">passwd</a>(5).


</p><p>

В этом случае ссылки
<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=refer&amp;category=1">refer</a>(1)


не используются.

.Sh СООТВЕТСТВИЕ
Если команда, библиотечная функция или файл 
придерживается определенного стандарта, такого, как
St -p1003.2

или
St -ansiC ,

то в данном разделе это должно быть указано.
Если команда не соответствует ни одному из стандартов, то
ее история должна быть описана в разделе 
Sx ПРЕДЫСТОРИЯ .


.Sh ПРЕДЫСТОРИЯ
Любая команда, не соответствующая никаким стандартам,
должна быть описана в этом разделе согласно целям ее создания.

.Sh АВТОРЫ
В этом разделе должны быть указаны все авторы страницы и их помощники.

.Sh ДИАГНОСТИКА
В данном разделе описана диагностика команды.

.Sh СООБЩЕНИЯ ОБ ОШИБКАХ
В этом разделе рассматриваются сообщения об ошибках. Макрос
`.Er используется

'

для написания переменной errno.

.Sh ОШИБКИ
В этом разделе описываются все выявленные ошибки.


<a name="lbCG">&nbsp;</a>
</p><h3>Параграфы и расстояние между строками.</h3>

<dl compact="">
<p>

</p><dt><b>.</b><p><b>

</b>

Команда
`.</p><p>

'

может
быть использована для выделения необходимого пространства.
Этот макрос необязателен после макросов
`.</p></dt></dl>

<a name="lbCH">&nbsp;</a>
<h2>или</h2>

'

`.<a name="lbCI">&nbsp;</a>
<h3>и</h3>

'

до макроса
`.<dl compact="">
<p>

'

 
(Макрос
`.</p><dl compact="">
<p>

'

задает
вертикальное расстояние, если указан флаг -compact).
</p></dl>
<p>

</p></dl>

<a name="lbCJ">&nbsp;</a>
<h3>Сохранение исходного формата</h3>

В данный момент сохраняется только формат слов. Для этого служат макросы
`.(начало

'

сохранения) и
`.(конец

'

сохранения). Единственная опция, которая используется
`.,-

'

это
-<b>words</b>

 
Она применяется для того, чтобы избежать неправильных переносов.
При задании команды make (см.
Sx Что в имени тебе моем... ) ,

сохранение предотвратило
nroff


от размещения флага и аргумента в различные строки.
<a name="lbCK">&nbsp;</a>
<h3>Блоки вывода</h3>

Существует пять типов вывода: вывод строки с отступом
`.D1'

,
вывод строки, начинающейся с заглавной буквы
`.
<blockquote><tt>,</tt></blockquote>
'

вывод неотформатированного блока (literal), вывод блока, 
отформатированного по двум границам (filled), а также вывод
блока, отформатированного по левой границе (ragged) и использующего макросы
`.

'

(начало
вывода) и
`.
'

(конец
вывода).
<p>

</p><dl compact="">
<p>

</p><dt><b>.D1</b>



Выводит одну строку с отступом. Этот макрос обрабатывается, но не вызывается.
-<b>ldghfstru</b>

<p>

Описанное выше было сделано с помощью строки
<b>.
</b></p><blockquote><tt>-</tt><b>ldghfstru</b>

</blockquote>


 
</dt><dt><b>.
</b><blockquote><b></b><tt>выводит строку с отступом</tt></blockquote>



<i>дословного</i>

текста. Макрос
`.
<blockquote><tt>также</tt></blockquote>
'

используется в этом тексте. Он позволяет делать отступ. По умолчанию
установленная ширина шрифта является постоянной. Этот макрос обрабатывается
и распознается другими макросами, но не может быть вызван ими.
<p>


</p><blockquote><tt>% ls -ldg /usr/local/bin</tt></blockquote>
<p>

Вышеприведенный пример был сделан с помощью строки:
<b>.
</b></p><blockquote><tt>% ls -ldg /usr/local/bin</tt></blockquote>


 
</dt><dt><b>.

</b>



Начало вывода. Макрос вывода
`.

'

должен
использоваться в паре с макросом
`.
'

 
Этот вывод может распологаться внутри других выводов.
`.

'

имеет
следующий синтаксис:
<p>


</p><blockquote><tt>".

</tt></blockquote>
<p>

Вид вывода должен быть одним из четырех следующих и
должен иметь указатель величины отступа:
`.

'

 
</p><p>

</p><dl compact="">
<p>

</p><dt><b>-ragged</b>



Дословно воспроизводит текст, форматируя его по левой границе.
</dt><dt><b>-filled</b>



Дословно воспроизводит текст форматируя его по обеим границам.
</dt><dt><b>-literal</b>



Дословно воспроизводит текст, не форматируя его.
Используется для исходных версий или простых текстов.
</dt><dt><b>-file </b><i>имя_файла</i>



Имя файла, следующее за флагом
-<b>file</b>

 
считывается и отправляется на вывод. Неформатируемый режим (literal)
подразумевает, что установленная ширина tab равна восьми символам.
Любая команда
troff/NsNm-mdoc


будет работать с этим файлом.
</dt><dt><b>-offset </b><i>строка</i>



Если
-<b>offset</b>

указан для одной из строк, то по ней будут равняться и следующие строки блока:
<p>

</p><dl compact="">
<p>

</p><dt><b></b><i>left</i>



Производится выравнивание по существующей левой границе текста.
</dt><dt><b></b><i>center</i>



Выравнивает блок по центру. В данный момент, к сожалению, блок просто
выравнивается по левой границе, ориентируясь на воображаемый центр экрана.
</dt><dt><b></b><i>indent</i>



Делает отступ на заданную величину или на tab знаков.
Значение этого отступа по умолчанию равно отступу вывода
`.D1'

Установленная величина текущего отступа равна 6-и символам
или двум третям дюйма.
</dt><dt><b></b><i>indent-two</i>



Делает отступ, в два раза больший установленного.
</dt><dt><b></b><i>right</i>



Этот макрос выравнивает блок по границе,
<i>левее</i>

правой границы страницы на два дюйма.
Макрос нуждается в доработке и, возможно, в
troff


его работа никогда не будет корректной.
</dt></dl>
<p>

</p></dt></dl>
<p>

</p></dt><dt><b>".Ed"</b>

Конец экрана.
</dt></dl>
<p>

<a name="lbCL">&nbsp;</a>
</p><h3>Режимы шрифтов</h3>

Существует пять макросов для изменения внешнего
вида текста на странице руководства:
<dl compact="">
<p>

</p><dt><b>.</b><i>Макрос </i>



`.<i>выделяет</i>

'

текст. Обычно для этого используют шрифт italic.
<p>


</p><blockquote><tt>Использование: .</tt><i>аргумент ... </i>

</blockquote>
<dl compact="">
<p>

</p><dt><b>.</b><i>does not</i>



<i>does not</i>

</dt><dt><b>.</b><i>exceed 1024 .</i>



<i>exceed 1024</i>

 
</dt><dt><b>.</b><i>vide infra ) ) ,</i>



<i>vide infra ) )</i>

 
</dt></dl>
<p>

</p><p>

Макрос
`.<i>можно</i>

'

вызвать и обработать. При вызове 
`.<i>без</i>

'

аргумента происходит ошибка.
</p></dt><dt><b>.Макрос</b>



`.<b>(literal)</b>

'

может быть использован для специальных символов,
переменных, констант или того, что должно быть отображено так, как это набрано.
<p>


</p><blockquote><tt>Применение: .</tt><b>аргумент ... </b>

</blockquote>
<dl compact="">
<p>

</p><dt><b>.\en</b>



<b>\n</b>

</dt><dt><b>.M1 M2 M3;</b>



<b>M1 M2 M3</b>

 
</dt><dt><b>.cntrl-D&nbsp;),</b>



<b>cntrl-D )</b>

 
</dt><dt><b>.1024&nbsp;...</b>



<b>1024 ...</b>

</dt></dl>
<p>

</p><p>

Макрос
`.<b>может</b>

'

быть вызван и обработан.
</p></dt><dt><b>.Этот символьный макрос служит, в основном, для написания текста жирным шрифтом.</b>



<p>


</p><blockquote><tt>Использование: .</tt><b>символ ... </b>

</blockquote>
<dl compact="">
<p>

</p><dt><b>.Important Notice</b>



<b>Important Notice</b>

</dt></dl>
<p>

</p><p>

Макрос
`.<b>можно</b>

'

вызвать и обработать.
</p></dt><dt><b>.Bf </b>Начало режима шрифта. Начало режима шрифта



`.Bf должно

'

заканчиваться макросом конца режима шрифта
`.Ef 

'

Режимы шрифтов могут быть размещены внутри других макросов режимов шрифтов.
`.Bf имеет

'

следующий синтакс:
<p>


</p><blockquote><tt>".Bf </tt>режим-шрифта

</blockquote>
<p>

Режим-шрифта должен быть одним из трех следующих:
`.Bf 

'

</p><p>

</p><dl compact="">
<p>

</p><dt><b></b><i>| -</i><b>emphasis</b>



Это выглядит, как будто макрос 
`.<i>применили</i>

'

ко всему блоку текста.
</dt><dt><b>| -literal</b>



Это выглядит, как будто макрос
`.<b>применили</b>

'

ко всему блоку текста.
</dt><dt><b>| -symbolic</b>



Это выглядит, как будто макрос
`.<b>применили</b>

'

ко всему блоку текста.
</dt></dl>
<p>

</p></dt><dt><b>".Ef"</b>

Конец режима шрифтов.
</dt></dl>
<p>

<a name="lbCM">&nbsp;</a>
</p><h3>Списки и колонки</h3>

Существует несколько типов списков, которые должны начинаться с макроса
`.Bl'

(начало-списка). Пункты внутри списка указываются при помощи макроса
`.It'

,
и каждый список должен заканчиваться макросом
`.El'

Списки могут быть размещены внутри таких же списков и выводов.
Внутри списков могут быть использованы колонки, но списки внутри колонок
ведут себя не всегда адекватно.
<p>

Можно добавить, что применяются некоторые атрибуты списков,
такие, как: ширина тэга, отступ и компактность
(определяется, вставляются ли пустые строки между пунктами списка).
Большая часть этого документа была отформатирована при помощи тэгов
(-<b>tag</b>

)

 
Тип-списка, использованный для показа типов-списков, - это список
`ohang'

Этот тип списка очень популярен среди пользователей
<b>TeX</b>

 
Следующие типы списков обрабатываются макросом
`.Bl'

:
</p><p>

</p><dl compact="">
<p>

</p><dt><b>-bullet</b>



</dt><dt><b>-item</b>



</dt><dt><b>-enum</b>



Эти три типа являются самыми простыми. После того, как макрос
`.Bl'

запущен, все пункты списка обозначаются строкой, состоящей из макроса
`.It'

Например, исходный текст для простого списка
перечисления будет выглядеть следующим образом:

<blockquote>
<pre>.Bl -enum -compact
.It
 Пункт 1.
.It
 Пункт 2.
.It
 Пункт 3.
.El
</pre>
</blockquote>

<p>

Результат:
</p><p>

</p><ol><p>

</p><li>

Пункт 1.
</li><li>

Пункт 2.
</li><li>

Пункт 3.
</li></ol><p>

</p><p>

Простой список с пунктами, выделенными точками:

</p><blockquote>
<pre>.Bl -bullet -compact
.It
Точка 1.
.It
Точка 2.
.El
</pre>
</blockquote>

<p>

Результат:
</p><ul><p>

</p><li>

Точка 1.
</li><li>

Точка 2.
</li></ul><p>

</p><p>

</p></dt><dt><b>-tag</b>



</dt><dt><b>-diag</b>



</dt><dt><b>-hang</b>



</dt><dt><b>-ohang</b>



</dt><dt><b>-inset</b>



Эти типы списков содержат аргументы, указанные при помощи макроса
`.</dt><dt><b>,</b>

'

и создают выделенный блок, который может быть
<i>вставлен</i>

(inset) в последующий текст,
<i>располагаться до</i>

(hanged) последующего текста,
<i>располагаться над</i>

(overhanged) последующим текстом.
Этот список был построен при помощи типа-списка
`-<b>ohang</b>

'

Макрос
`.</dt><dt><b>обрабатывается</b>

'

только типами списков: inset, hang и tag и не может быть вызван.
Далее следует пример блока, выделенного при помощи типа-списка inset:
<dl compact="">
<p>

</p><dt><b></b><i>Tag </i>



Список, построенный при помощи тэгов, - это наиболее распространенный
тип-списка, описанный в руководстве, разработанном в Berkeley.
</dt><dt><b></b><i>Diag</i>



Этот тип-списка создает раздел диагностики и идентичен
типу inset, кроме того, что он игнорирует вызываемые макросы.
</dt><dt><b></b><i>Hang</i>



Выделенные блоки, расположенные перед текстом, используются по желанию автора.
</dt><dt><b></b><i>Ohang</i>



Выделенные блоки, расположенные над текстом, 
очень удобны, если свободного места в целом немного.
</dt><dt><b></b><i>Inset</i>



Выделенные блоки, вставленные в текст, удобны для конвертирования страниц
<b>-mdoc</b>

в другие форматы.
</dt></dl>
<p>

</p><p>

Далее следует исходный текст описанного выше:

</p><blockquote>
<pre>.Bl -inset -offset indent
.It Em Tag
Список, построенный при помощи тэгов,- это наиболее распространенный
тип-списка, используемый в разработанном Berkeley руководстве.
.It Em Diag
Этот тип-списка создает раздел диагностики
и идентичен типу inset, кроме того, что он игнорирует
вызываемые макросы.
.It Em Hang
Выделенные блоки, расположенные перед текстом, используются
по желанию автора.
.It Em Ohang
Выделенные блоки, расположенные над текстом, 
очень удобны при недостатке места для текста.
.It Em Inset
Выделенные блоки, вставленные в текст, удобны
для конвертирования страниц
.Nm -mdoc
в другие форматы.
.El
</pre>
</blockquote>

<p>

Ниже приведен текст с двумя выделенными блоками, расположенными до текста:
</p><dl compact="">
<p>

</p><dt><b></b><i>Блоки</i>



выделенные при помощи hang, похожи на списки tag в случае,
если блок меньше выделенного для него места.
</dt><dt><b></b><i>Более длинные блоки hang</i>



"врезаются" в абзац, чего не происходит со списками tag.
</dt></dl>
<p>

</p><p>

Ниже приведен исходный вариант этого текста:

</p><blockquote>
<pre>.Bl -hang -offset indent
.It Em Блоки ,
выделенные при помощи hang, похожи на списки
tag, в случае если блок меньше выделенного
для него места.
.It Em Более длинные блоки hang
"врезаются" в абзац, чего не происходит со списками tag.
.El
</pre>
</blockquote>

<p>

Нижеследующий список tag использует дополнительный
указатель для управления шириной тэга.
</p><p>

</p><dl compact="">
<p>

</p><dt><b>SL -</b>

время ожидающего режима процесса.
</dt><dt><b>PAGEIN</b>

- количество обращений к подкачке.
</dt><dt><b>UID</b>

- числовой идентификатор пользователя. 
</dt><dt><b>PPID</b>

- числовой идентификатор родительского процесса.
</dt></dl>
<p>

</p><p>

Исходный текст:

</p><blockquote>
<pre>.Bl -tag -width "PAGEIN" -compact -offset indent
.It SL
время ожидающего режима процесса.
.It PAGEIN -
количество обращений к подкачке.
.It UID -
числовой идентификатор пользователя. 
.It PPID -
числовой идентификатор родительского процесса.
.El
</pre>
</blockquote>

<p>

Допустимые указатели ширины:
</p><dl compact="">
<p>

</p><dt><b>-width </b><i>Fl</i>



устанавливает ширину, равную ширине флага, указанной по умолчанию.
Все вызываемые макросы имеют ширину, указанную по умолчанию.
В данном случае установленная ширина
`.-

'

 
равнялась десяти символам или приблизительно пяти шестым дюйма.
</dt><dt><b>-width </b><i>24n</i>



устанавливает ширину, равную 24-м символам или
приблизительно двум дюймам. Буква 
`n'

обязательно должна сохраняться.
</dt><dt><b>-width </b><i>ENAMETOOLONG</i>



устанавливает ширину, равную ширине данной строки.
</dt><dt><b>-width  </b><i>\*qint mkfifo\*q</i>



тоже устанавливает ширину, равную ширине данной строки.
</dt></dl>
<p>

</p><p>

Если ширина не указана списку tag, то вызывается первый макрос
`.</p></dt><dt><b>и</b>

'

делается попытка определения данной ширины. Если первый аргумент
`.It'

- это вызываемый макрос, то будет использована ширина этого макроса.
В любом случае, если другой предмет списка содержит
другой вызываемый макрос, то создается новый вложенный список.
</dt></dl>

<a name="lbCN">&nbsp;</a>
<h2>ПРЕДОПРЕДЕЛЕННЫЕ СТРОКИ</h2>

Следующие символы являются предопределенными и могут использоваться
строками troff при помощи последовательности
`\*(xx'

,
где
<i>xx</i>

- это имя предопределенной строки; или последовательности
`\*x'

,
где
<i>x</i>

- имя строки.
Эти последовательности могут быть использованы в любом месте текста.
<p>

</p><dl compact="">
<p>

</p><dt><b>Строка<tt>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt>Nroff<tt>&nbsp;&nbsp;&nbsp;</tt>Troff</b>



</dt><dt><b>&lt;= Ta </b>&lt;= Ta 



</dt><dt><b>&gt;= Ta </b>&gt;= Ta 



</dt><dt><b>Rq Ta </b>'' Ta 



</dt><dt><b>Lq Ta </b>`` Ta 



</dt><dt><b>ua Ta </b>^ Ta 



</dt><dt><b>aa Ta </b>' Ta 



</dt><dt><b>ga Ta </b>` Ta 



</dt><dt><b>q Ta </b> Ta 



</dt><dt><b>Pi Ta </b>pi Ta 



</dt><dt><b>Ne Ta </b>!= Ta 



</dt><dt><b>Le Ta </b>&lt;= Ta 



</dt><dt><b>Ge Ta </b>&gt;= Ta 



</dt><dt><b>Lt Ta </b>&lt; Ta 



</dt><dt><b>Gt Ta </b>&gt; Ta 



</dt><dt><b>Pm Ta </b>+- Ta 



</dt><dt><b>If Ta </b>infinity Ta 



</dt><dt><b>Na Ta </b><i>NaN</i> Ta 



</dt><dt><b>Ba Ta </b>| Ta 



</dt></dl>
<p>

</p><p>

<b>Замечание</b>

 <br>
Строка под названием
`q'

должна быть указана как
`\*q'

,
так как в ее названии только один символ.
<a name="lbCO">&nbsp;</a>
</p><h2>ДИАГНОСТИКА</h2>

Возможности отладки
<b>-mdoc</b>

ограничены, но могут использоваться при нахождении довольно
незаметных ошибок, таких, как: конфликт названия аргумента, названия 
внутреннего регистра и названия макроса.
Регистр - это метод хранения информации для
troff


с именем, состоящим из одного или двух символов. Все регистры в 
<b>-mdoc</b>

являющиеся внутренними для
troff


и
ditroff


и имеют названия из двух символов в форме
&lt;верхний_регистр&gt;&lt;нижний_регистр&gt; так же, как
`<i>file ...</i>

'

 
&lt;нижний_регистр&gt;&lt;верхний_регистр&gt;, как 
`aR'

;
или &lt;большая или маленькая буква&gt;&lt;цифра&gt;, как
`C1'

И, вдобавок ко всему,
troff


имеет свои собственные внутренние регистры,
названия котрых состоят из двух маленьких символов или из точки и буквы.
В одном из примеров в начале файла было показано,
как предотвратить определение названия макроса при помощи
`\&amp;'

Это актуально и для названий внутренних регистров.
<p>

Если не пользоваться этим приемом, то последствия будут непредсказуемыми.
Иногда некоторые части текста выводятся не там, где ожидалось;
это происходит в связи с нераспознаванием типа аргумента в списке аргументов.
Узнать, правильно ли указан тип аргумента, можно при помощи макроса отладки
`.Db (debug),

'

который выводит интерпретацию списка аргументов
для большинства макросов. Такие макросы, как 
`.</p><p>

'

(paragraph),
не содержат информации для отладки.
Для всех вызываемых макросов рекомендуется использование макроса
`.Db 

'

</p><p>


</p><blockquote><tt>Использование: .Db </tt>[on | off]

</blockquote>
<p>

Далее следует пример, состоящий из части текста с макросом отладки,
расположенным выше и ниже специально созданной ошибки
(флаг аргумента указан как
`aC'

,
а не
`\&amp;aC'

,
что необходимо для корректной работы):

</p><blockquote>
<pre>.Db on
.Op Fl aC Ar файл )
.Db off
</pre>
</blockquote>

<p>

Результат вывода:

</p><blockquote>
<pre><dd>DEBUGGING ON
DEBUG(argv) MACRO: `.Op'  Line #: 2
        Argc: 1  Argv: `Fl'  Length: 2
        Space: `'  Class: Executable
        Argc: 2  Argv: `aC'  Length: 2
        Space: `'  Class: Executable
        Argc: 3  Argv: `Ar'  Length: 2
        Space: `'  Class: Executable
        Argc: 4  Argv: `file'  Length: 4
        Space: ` '  Class: String
        Argc: 5  Argv: `)'  Length: 1
        Space: ` '  Class: Closing Punctuation or suffix
        MACRO REQUEST: .Op Fl aC Ar file )
DEBUGGING OFF
</dd></pre>
</blockquote>

<p>

В первой строке указывается название вызывающего макроса (в данном случае это
`.[)]

'

</p><p>
и номер строки, в которой оно находится. Если используется один или более
файлов (в особенности, если используется текст из другого файла), то номер
строки может быть указан неправильно.
Если используется один файл, то строка должна быть указана точно.
Во второй строке указывается счетчик аргумента, аргумент
(`-

'

)

и
его длина. Если длина аргумента равна двум символам, то проверяется,
выполняется ли он (к сожалению, любой регистр, имеющий ненулевое значение,
тоже выполним). В третьей строке выводится пространство, зарезервированное
для класса, и тип класса.
Ошибка в том, что аргумент aC и не должен быть выполнимым.
В четвертой строке указываются классы строки
выполняемого аргумента, открывающие и закрывающие пунктуационные знаки.
В последней строке указывается полный список аргументов, каким он
был считан. В следующем примере
`aC'

будет указано правильно:

</p><blockquote>
<pre>.Db on
.Em An escaped \&amp;aC
.Db off
</pre>
</blockquote>


<blockquote>
<pre>DEBUGGING ON
DEBUG(fargv) MACRO: `.Em'  Line #: 2
        Argc: 1  Argv: `An'  Length: 2
        Space: ` '  Class: String
        Argc: 2  Argv: `escaped'  Length: 7
        Space: ` '  Class: String
        Argc: 3  Argv: `aC'  Length: 2
        Space: ` '  Class: String
        MACRO REQUEST: .Em An escaped &amp;aC
DEBUGGING OFF
</pre>
</blockquote>

<p>

Аргумент
`\&amp;aC'

имеет ту же длину, равную 2-м, так как
`\&amp;'

не занимает места, но регистр с названием
`\&amp;aC'

не был найден и тип был классифицирован как строка.
</p><p>

Другие способы диагностики включают в себя 
использование определений, и мы не будем на них останавливаться.
<a name="lbCP">&nbsp;</a>
</p><h2>GROFF, TROFF И NROFF</h2>

Пакет
<b>-mdoc</b>

не нуждается в отдельном режиме совместимости с 
groff.


<p>

Пакет убирает разделение страниц, верхние
и нижние колонтитулы, формируемые
nroff,


для удобства чтения руководства в режиме on-line. В
groff,


использующем
-<b>T </b><i>ascii</i>



есть функция вывода количества страниц в конце файла. Свойство 
nroff


удалять страницы делает неудобным распечатку документов,
отформатированных им. Можно установить значение регистра
`cR'

,
находящегося в файле
/usr/src/share/tmac/doc-nroff,

равным нулю для того, чтобы сохранялся предыдущий формат документа.
<a name="lbCQ">&nbsp;</a>
</p><h2>ФАЙЛЫ</h2>

<dl compact="">
<p>

</p><dt><b>/usr/share/tmac/tmac.doc

</b>

- инструкции к пакету макросов.
</dt><dt><b>/usr/share/misc/mdoc.template

</b>

- шаблон для написания страницы руководства.
</dt><dt><b>/usr/share/examples/mdoc/*

</b>

- несколько примеров страниц руководства.
</dt></dl>
<p>

<a name="lbCR">&nbsp;</a>
</p><h2>СМ. ТАКЖЕ</h2>

<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=man&amp;category=1">man</a>(1),


<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=troff&amp;category=1">troff</a>(1),


<a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=mdoc&amp;category=7">mdoc</a>(7)


<a name="lbCS">&nbsp;</a>
<h2>НАЙДЕННЫЕ ОШИБКИ</h2>

Пока не доработан автоматический перенос на дефисе флага аргумента,
вызывающий непредвиденные ситуации, что описывается в разделе
Sx ОПИСАНИЕ

(перенос строки на дефисе).
<p>

Предопределенные строки не описываются в документации.
</p><p>

Раздел 3f не добавлен к заголовку.
</p><p>

Шрифт 
`.<b></b>

'

должен
быть изменен в разделе
Sx НАЗВАНИЕ .

</p><p>

`.Fn должен

'

быть проверен на выполнение разбиения очень короткой строки.
Иногда он переносит последнюю скобку.
</p><p>

Макросы списков и вывода не всегда делают сохранения.

</p><hr>
<a name="index">&nbsp;</a><h2>Index</h2>
<dl>
<dt><a href="#lbAB">НАЗВАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAC">СИНТАКСИС</a></dt><dd>
</dd><dt><a href="#lbAD">ОПИСАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAE">ПРИСТУПАЯ К РАБОТЕ</a></dt><dd>
</dd><dt><a href="#lbAF">ОГРАНИЧЕНИЯ TROFF</a></dt><dd>
<dl>
<dt><a href="#lbAG">Использование макросов</a></dt><dd>
</dd><dt><a href="#lbAH">Передача пробелов в виде параметров</a></dt><dd>
</dd><dt><a href="#lbAI">Завершающие строку пробелы (предупреждение)</a></dt><dd>
</dd><dt><a href="#lbAJ">Escape-последовательности для вывода специальных символов</a></dt><dd>
</dd></dl>
</dd><dt><a href="#lbAK">СТРУКТУРА СТРАНИЦЫ РУКОВОДСТВА</a></dt><dd>
<dl>
<dt><a href="#lbAL">Шаблон страницы руководства </a></dt><dd>
</dd></dl>
</dd><dt><a href="#lbAM">,</a></dt><dd>
</dd><dt><a href="#lbAN">МАКРОСЫ ЗАГОЛОВКА</a></dt><dd>
</dd><dt><a href="#lbAO">ВВЕДЕНИЕ В СПРАВОЧНЫЙ И ОБЩИЙ ТЕКСТОВЫЙ ДОМЕНЫ</a></dt><dd>
<dl>
<dt><a href="#lbAP">Что в имени тебе моем...</a></dt><dd>
</dd><dt><a href="#lbAQ">Общий синтаксис</a></dt><dd>
</dd></dl>
</dd><dt><a href="#lbAR">ДОМЕН СТРУКТУРЫ СТРАНИЦ</a></dt><dd>
<dl>
<dt><a href="#lbAS">Адреса</a></dt><dd>
</dd><dt><a href="#lbAT">Автор</a></dt><dd>
</dd><dt><a href="#lbAU">Параметры</a></dt><dd>
</dd><dt><a href="#lbAV">Задание конфигурации (только раздел #4)</a></dt><dd>
</dd><dt><a href="#lbAW">Модификатор команд</a></dt><dd>
</dd><dt><a href="#lbAX">Определенные переменные</a></dt><dd>
</dd><dt><a href="#lbAY">Коды ошибок (только раздел #2)</a></dt><dd>
</dd><dt><a href="#lbAZ">Переменные окружения</a></dt><dd>
</dd><dt><a href="#lbBA">Параметры функции</a></dt><dd>
</dd><dt><a href="#lbBB">Определение функции</a></dt><dd>
</dd><dt><a href="#lbBC">Флаги</a></dt><dd>
</dd><dt><a href="#lbBD">Функции (в том числе и библиотечные)</a></dt><dd>
</dd><dt><a href="#lbBE">Типы функций</a></dt><dd>
</dd><dt><a href="#lbBF">Интерактивные команды</a></dt><dd>
</dd><dt><a href="#lbBG">Названия</a></dt><dd>
</dd><dt><a href="#lbBH">Опции</a></dt><dd>
</dd><dt><a href="#lbBI">Пути</a></dt><dd>
</dd><dt><a href="#lbBJ">Переменные</a></dt><dd>
</dd><dt><a href="#lbBK">Ссылки</a></dt><dd>
</dd></dl>
</dd><dt><a href="#lbBL">ОБЩИЙ ТЕКСТОВЫЙ ДОМЕН</a></dt><dd>
<dl>
<dt><a href="#lbBM">Макрос AT&amp;T </a></dt><dd>
</dd><dt><a href="#lbBN">Макрос BSD</a></dt><dd>
</dd><dt><a href="#lbBO">Макрос FreeBSD </a></dt><dd>
</dd><dt><a href="#lbBP">Макрос UNIX </a></dt><dd>
</dd><dt><a href="#lbBQ">Макросы выделения</a></dt><dd>
</dd><dt><a href="#lbBR">No-Op или макроса обычного текста.</a></dt><dd>
</dd><dt><a href="#lbBS">Макрос отключения пробелов</a></dt><dd>
</dd><dt><a href="#lbBT">Ссылки на раздел</a></dt><dd>
</dd><dt><a href="#lbBU">Ссылки и цитаты</a></dt><dd>
</dd><dt><a href="#lbBV">Возвращаемые значения</a></dt><dd>
</dd><dt><a href="#lbBW">Торговые марки (акронимы и названия их видов)</a></dt><dd>
</dd><dt><a href="#lbBX">Расширенные параметры</a></dt><dd>
</dd></dl>
</dd><dt><a href="#lbBY">ДОМЕН СТРУКТУРЫ СТРАНИЦ</a></dt><dd>
<dl>
<dt><a href="#lbBZ">Заголовки разделов</a></dt><dd>
</dd></dl>
</dd><dt><a href="#lbCA">,</a></dt><dd>
</dd><dt><a href="#lbCB">может</a></dt><dd>
</dd><dt><a href="#lbCC">НАЗВАНИЕ</a></dt><dd>
</dd><dt><a href="#lbCD">НАЗВАНИЕ</a></dt><dd>
</dd><dt><a href="#lbCE">-названия</a></dt><dd>
</dd><dt><a href="#lbCF">ПЕРЕМЕННЫЕ ОКРУЖЕНИЯ</a></dt><dd>
<dl>
<dt><a href="#lbCG">Параграфы и расстояние между строками.</a></dt><dd>
</dd></dl>
</dd><dt><a href="#lbCH">или</a></dt><dd>
<dl>
<dt><a href="#lbCI">и</a></dt><dd>
</dd><dt><a href="#lbCJ">Сохранение исходного формата</a></dt><dd>
</dd><dt><a href="#lbCK">Блоки вывода</a></dt><dd>
</dd><dt><a href="#lbCL">Режимы шрифтов</a></dt><dd>
</dd><dt><a href="#lbCM">Списки и колонки</a></dt><dd>
</dd></dl>
</dd><dt><a href="#lbCN">ПРЕДОПРЕДЕЛЕННЫЕ СТРОКИ</a></dt><dd>
</dd><dt><a href="#lbCO">ДИАГНОСТИКА</a></dt><dd>
</dd><dt><a href="#lbCP">GROFF, TROFF И NROFF</a></dt><dd>
</dd><dt><a href="#lbCQ">ФАЙЛЫ</a></dt><dd>
</dd><dt><a href="#lbCR">СМ. ТАКЖЕ</a></dt><dd>
</dd><dt><a href="#lbCS">НАЙДЕННЫЕ ОШИБКИ</a></dt><dd>
</dd></dl>
<hr>
<br>
<form method="get" action="/search.shtml">
<font size="-1">
<font color="#555555">Поиск по тексту MAN-ов:&nbsp;</font><input size="30" name="words" value="mdoc.samples" type="text">
<input name="restrict" value="/man" type="hidden">
<input value="Найти" type="submit">
</font>
<input name="method" value="and" type="hidden">
<input name="format" value="builtin-long" type="hidden">
<input name="sort" value="score" type="hidden">
</form>
<br>
<!--htdig_noindex-->
<noindex>
<br>


</noindex>
<!--/htdig_noindex-->


<!-- footer -->
<!--htdig_noindex-->
<br><br>
<div style="background-color: #E9EAD6; width:100%; height: 61px;">
<div style="margin-right: 20px; float:left; line-height: 61px; vertical-align: middle; margin-left: 10px; font-size: 120%;">
Спонсоры:
</div>
<div style="float:left; height: 60px;  line-height: 60px; margin-left: 20px;">
<a style="align: middle;" target="_blank" href="https://inferno.name/"><img src="/img/inferno2.png" alt="Inferno Solutions" height="57" width="200"></a>
</div>
<div style="float:right; height: 60px;  line-height: 60px;  margin-left: 15px;">
<a style="align: middle;" target="_blank" href="http://hoster.ru/?utm_source=site&amp;utm_medium=banner&amp;utm_campaign=opennet"><img src="/img/dh143x60t.png" alt="Hosting by Hoster.ru" height="60" width="143"></a>
</div>
<div style="float:right;  height: 60px;  line-height: 60px; vertical-align: middle;font-size: 120%;">
Хостинг:
</div>

</div>

<div style="clear: both;"></div>


<br>
<table class="ttxt" style="border-top: 3px solid #C9CaB6;">
<tbody><tr><td width="35%">
<a href="/cgi-bin/opennet/bookmark.cgi">Закладки на сайте</a><br>
<a href="/cgi-bin/opennet/bookmark.cgi?submit=add" target="blank_">Проследить за страницей</a>
</td>
<td align="RIGHT" width="65%">
Created&nbsp;1996-2021&nbsp;by <b><a href="/contact.shtml" title="email maxim.chirkov@gmail.com">Maxim&nbsp;Chirkov</a></b><br>
<a href="https://www.opennet.ru/add.shtml">Добавить</a>, <a href="https://www.opennet.ru/donate.shtml" style="color: #C00000;">Поддержать</a>, <a href="https://www.opennet.ru/banners2.shtml">Вебмастеру</a>
</td>
</tr>
</tbody></table>
<br><br>


<!--/htdig_noindex-->
<!-- end of footer -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-123449-1', 'auto');
    ga('send', 'pageview');
</script>




</dd></body>
<!---------------------------------------------  0  ---------------------------------------------->
