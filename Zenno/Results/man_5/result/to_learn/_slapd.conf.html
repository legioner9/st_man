
<!--+++++++++++++++++++++++++++++++++++++++++++  0  +++++++++++++++++++++++++++++++++++++++++++--->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Проект OpenNet: MAN slapd.conf (5) Форматы файлов (FreeBSD и Linux)</title><meta name="KeyWords" content="man, manual, MAN, системное руководство, linux, FreeBSD, OpenBSD, Solaris, ядро, программы, системный вызов, slapd.conf"><meta name="viewport" content="width=device-width, initial-scale=1"></head>


<body link="#0000FF" vlink="#000080" text="#000000" bgcolor="#E3E4D0" alink="#FF00FF">
<link rel="stylesheet" href="/opennet4.css" type="text/css">
<!--htdig_noindex-->
<form method="get" action="https://www.opennet.ru/search.shtml">
<aside>
<div style="width: 100%; text-align: right; font-size: 70%; background: #E9EAD6; margin-bottom:-10px;">
Профиль: <b><a href="/~" rel="nofollow" title="/~ - сводная страница участника"><u>Аноним</u></a></b> (<a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=login">вход</a> | <a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=user_register">регистрация</a>)</div>

<table cellspacing="0" cellpadding="0" width="100%" border="0">
<tbody><tr>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" valign="BOTTOM" bgcolor="#E9EAD6" width="300">
<a href="https://www.opennet.ru/"><img src="/opennet2.gif" alt="The OpenNET Project" height="60" width="249" border="0"></a><br>
</td>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" bgcolor="#E9EAD6" align="CENTER" width="100">

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:10px;" bgcolor="#E9EAD6" align="CENTER" width="50%">
<table width="100%" border="0">
<tbody><tr>
<td width="22%">
 <a href="https://www.opennet.ru/opennews/" class="h"><b>НОВОСТИ</b></a> (<a href="https://www.opennet.ru/news/opennet.shtml" class="h">+</a>)
</td><td width="18%%">
  <a href="https://www.opennet.ru/mp/" class="h"><b>КОНТЕНТ</b></a>
</td><td width="14%">
  <a href="http://wiki.opennet.ru" class="h"><b>WIKI</b></a>
</td><td width="14%">
   <a href="https://www.opennet.ru/man.shtml" class="h"><b>MAN'ы</b></a>
</td><td width="16%">
   <a href="https://www.opennet.ru/forum/" class="h"><b>ФОРУМ</b></a>
</td><td width="16%">
<a href="https://www.opennet.ru/search.shtml" class="h" onmouseover="document.getElementById('form12').style.display='block';">Поиск</a>&nbsp;(<a href="https://www.opennet.ru/keywords/" class="h">теги</a>)
<input id="form12" style="display: none;" size="10" name="words" value="" title="для поиска в google наберите &quot;g фраза&quot;" type="text">
</td></tr>
</tbody></table>

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:5px;" bgcolor="#E9EAD6" align="right" width="20%">

<a href="https://www.opennet.ru/opennews/opennews_all_utf.rss"><img src="/img/rss.png" alt="RSS" title="RSS" height="16" width="16" border="0"></a>&nbsp;<a href="https://twitter.com/opennetru"><img src="/twitter.png" alt="twitter" title="Twitter" height="16" width="16" border="0"></a>&nbsp;<a href="https://vk.com/opennet"><img src="/img/vkontakte.gif" title="ВКонтакте" height="16" width="16" border="0"></a>&nbsp;<a href="https://zen.yandex.ru/opennet"><img src="/img/zen.gif" title="Yandex Zen" height="16" width="16" border="0"></a>&nbsp;<a href="https://www.facebook.com/OpenNet.News/"><img src="/img/facebook.gif" title="Facebook" height="16" width="16" border="0"></a>&nbsp;<a href="https://telegram.space/opennet_ru"><img src="/img/telegram2.png" title="Telegram" height="16" width="16" border="0"></a>
</td></tr></tbody></table>
</aside>

<style>
    .hdr_mobile {
	text-align: center; 
	display: none;
	margin: 0px;
	padding: 0px;
    }
</style>
<div class="hdr_mobile">
<div style="margin-left: auto; margin-right: auto; width: 100%; height: 70px; border:1px solid #b0b190; min-width: 360px; max-width: 600px; background: #E9EAD6 url('/back.gif') repeat-x bottom left;">
<div style="float:left; width: 249px; height: 60px; margin-top: 10px;">
<a href="https://www.opennet.ru"><img src="/opennet2_lite.gif" style="height: 60px; width: 249px; border: 1px;" alt="The OpenNET Project / Index page"></a>
</div>
<div style="float: left; text-align: center; height: 70px; width: 331px; padding: 5px; margin-left: 10px;">
<br><small>[ <a href="/opennews/">новости</a>&nbsp;/<a href="/opennews/?full_lines=15&amp;lines=15&amp;mid_lines=00">+++</a> | <a href="/forum/">форум</a> | <a href="http://wiki.opennet.ru">wiki</a> | <a href="/keywords/">теги</a>
| <a href="tg://resolve?domain=opennet_ru"><img src="/img/telegram2.png" title="Telegram" style="margin-bottom: -4px;" height="16" width="16" border="0"></a>
]</small>
</div>
</div>
</div>
<div style="clear: both;"></div>


<div style="float: left; width: 279; text-align: left;padding-right: 60px;" id="adv">
</div>
<div style="padding-top: 0px;position:absolute;left:50%;margin-left:-235px;width:470px;" id="adv2">
</div>
<div style="width: 279;float: right;" id="adv3">
</div>
<div style="clear: both;"></div>
<br>
</form>
<!--/htdig_noindex-->

<center><h3><font color="#000088">Интерактивная система просмотра системных руководств (man-ов)</font></h3></center>
<form method="GET" action="/man.shtml"> 
<table cellspacing="0" cellpadding="1" bgcolor="#B0B190" align="center" width="600" border="0">
<tbody><tr>
<td valign="TOP">

<table cellspacing="0" cellpadding="0" bgcolor="#E9EAD6" align="center" width="100%" border="0">
<tbody><tr><td>&nbsp;<font color="#555555">Тема</font></td><td><font color="#555555">Набор</font></td><td><font color="#555555">Категория</font></td><td>&nbsp;</td></tr>
<tr><td>

&nbsp;<input size="20" name="topic" value="slapd.conf" type="text"></td><td><select name="russian">
<option value="4">Solaris man
</option><option value="1">FreeBSD man
</option><option value="3">Разные man
</option><option value="0" selected="">Русские man
</option><option value="2">Linux man
</option><option value="5">POSIX man
</option></select></td>
<td><select size="1" name="category">
	  <option value="" selected="">All
	  </option><option value="1">1
	  </option><option value="2">2
	  </option><option value="3">3
	  </option><option value="4">4
	  </option><option value="5">5
	  </option><option value="6">6
	  </option><option value="7">7
	  </option><option value="8">8
	  </option><option value="9">9
</option></select></td>

<td><input name="submit" value="Показать man" type="submit"></td></tr>
<script async="" src="https://www.google-analytics.com/analytics.js"></script><script language="JavaScript" src="/print.js"></script>
<tr><td colspan="4" align="left">&nbsp;[<a href="/man.shtml">Cписок руководств</a> | <a href="#" onclick="pr('none');">Печать</a>]</td></tr>
</tbody></table>
</td></tr></tbody></table>
</form>
<h3></h3><font size="+2">slapd.conf (5)</font><hr><li>&gt;&gt; <a href="/man.shtml?topic=slapd.conf&amp;category=5&amp;russian=0"><u>slapd.conf</u></a> (5) <font color="#555555"> ( Русские man: Форматы файлов )</font></li><li> <a href="/man.shtml?topic=slapd.conf&amp;category=5&amp;russian=2"><u>slapd.conf</u></a> (5) <font color="#555555"> ( Linux man: Форматы файлов )</font></li>


<a name="lbAB">&nbsp;</a>
<h2>НАЗВАНИЕ</h2>

slapd.conf - конфигурационный файл для slapd, автономного демона LDAP.
<a name="lbAC">&nbsp;</a>
<h2>СИНТАКСИС</h2>

/usr/local/etc/openldap/slapd.conf
<a name="lbAD">&nbsp;</a>
<h2>ОПИСАНИЕ</h2>

Файл
<b>/usr/local/etc/openldap/slapd.conf</b>

содержит информацию по настройке демона
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd&amp;category=8">slapd</a></b>(8).

Этот конфигурационный файл также используется инструментами SLAPD:
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapacl&amp;category=8">slapacl</a></b>(8),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapadd&amp;category=8">slapadd</a></b>(8),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapauth&amp;category=8">slapauth</a></b>(8),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapcat&amp;category=8">slapcat</a></b>(8),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapdn&amp;category=8">slapdn</a></b>(8),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapindex&amp;category=8">slapindex</a></b>(8)

и
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slaptest&amp;category=8">slaptest</a></b>(8).

<p>

</p><p>
Файл
<b>slapd.conf</b>

состоит из набора параметров глобальной конфигурации, применяемых к
<b>slapd</b>

в целом (в том числе ко всем базам данных всех механизмов манипуляции данными),
за которым следует ноль или более определений баз данных механизмов манипуляции данными,
содержащих информацию, специфичную для конкретного механизма манипуляции данными.
Имена параметров конфигурации нечувствительны к регистру символов;
их значения, в зависимости от ситуации, могут быть чувствительными к регистру.
</p><p>

Общий формат
<b>slapd.conf</b>:

</p><p>

</p><pre>    # комментарий - эти параметры применяются ко всем базам данных
    &lt;параметры глобальной конфигурации&gt;
    # определение и параметры конфигурации первой базы данных
    database &lt;тип первого механизма манипуляции данными&gt;
    &lt;параметры конфигурации, специфичные для первого механизма&gt;
    # определение и параметры конфигурации следующей базы данных
    ...
</pre>

<p>

Может быть включено сколько угодно разделов баз данных какого-либо механизма манипуляции данными.
Глобальные параметры могут быть переопределены в разделах баз данных механизмов манипуляции данными
(для параметров, которые определяются более одного раза, используется значение из их последнего определения в файле
<b>slapd.conf</b>).

</p><p>

Если строка начинается с пробельного символа, она считается продолжением предыдущей строки.
Одна физическая строка не должна быть длиной более 2000 байт.
</p><p>

Пустые строки и строки, начинающиеся с символа `#', игнорируются. Примечание: перед выполнением
обработки комментария строки с продолжением преобразуются в одну строку.
</p><p>

Аргументы строк конфигурации разделяются пробельными символами. Если сам аргумент
содержит пробельный символ, этот аргумент должен быть заключён в двойные кавычки.
Если аргумент содержит символы двойной кавычки (`"') или обратного слэша (`\'),
перед этими символами должен быть указан символ обратного слэша.
</p><p>

Доступные параметры конфигурации обсуждаются ниже в разделах "Параметры глобальной конфигурации",
"Общие параметры механизмов манипуляции данными" и "Общие параметры баз данных".
Параметры, специфичные для механизмов манипуляции данными, обсуждаются в man-страницах
<b>slapd-&lt;backend&gt;</b>(5).

Более подробную информацию о конфигурационном файле slapd можно найти в "Руководстве администратора OpenLDAP".
<a name="lbAE">&nbsp;</a>
</p><h2>ПАРАМЕТРЫ ГЛОБАЛЬНОЙ КОНФИГУРАЦИИ</h2>

Описанные в данном разделе параметры применяются ко всем механизмам манипуляции данными,
если они не были переопределены в настройках механизма манипуляции данными.
Аргументы, которые нужно заменить актуальным текстом, показаны в угловых скобках &lt;&gt;.
<dl compact="">
<dt><b>access to &lt;what&gt; [ by &lt;who&gt; &lt;access&gt; &lt;control&gt; ]+</b>

</dt><dd>
Предоставляется доступ (указанный в аргументе &lt;access&gt;) к набору записей и/или атрибутов
(указанных в аргументе &lt;what&gt;) одному или более выполняющим запрос (указанным в аргументе &lt;who&gt;).
Если никаких списков контроля доступа не определено, политика по умолчанию позволяет кому угодно (всем)
читать что угодно, но право вносить изменения в каталог предоставляется только rootdn
(то есть, "access to * by * read"). rootdn всегда может читать и записывать ВСЁ!
Более подробное описание можно найти в
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd.access&amp;category=5">slapd.access</a></b>(5)

и в "Руководстве администратора OpenLDAP".
</dd><dt><b>allow &lt;features&gt;</b>

</dt><dd>
Указывает набор возможностей, которые будут разрешены (разделяются пробельными символами).
По умолчанию никакие из перечисленных возможностей не разрешены.
<b>bind_v2</b>

разрешает принимать запросы подсоединения bind LDAPv2. Имейте ввиду, что в
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd&amp;category=8">slapd</a></b>(8)

по-настоящему не реализована поддержка протокола LDAPv2 (RFC 1777),
который теперь является историческим (RFC 3494).
<b>bind_anon_cred</b>

разрешает анонимное подсоединение, когда удостоверяющие данные не пусты
(например, если DN является пустым).
<b>bind_anon_dn</b>

разрешает подсоединение без проверки подлинности (анонимное), когда DN не является пустым.
<b>update_anon</b>

разрешает обработку операций обновления без проверки подлинности (анонимных)
(по результатам контроля доступа и применения других административных ограничений).
<b>proxy_authz_anon</b>

разрешает обработку прокси-авторизационного контроля без проверки подлинности (анонимного)
(по результатам контроля доступа, проверки полномочий и применения других административных ограничений).
</dd><dt><b>argsfile &lt;filename&gt;</b>

</dt><dd>
Имя файла (с указанием абсолютного пути к нему), который будет содержать параметры командной строки сервера
<b>slapd</b>

(имя программы и параметры).
</dd><dt><b>attributeoptions [option-name]...</b>

</dt><dd>
Определяет опции пометки атрибута или префиксы опций пометки/диапазона.
Определения опций не должны оканчиваться на `-', а определения префиксов должны оканчиваться на `-'.
Префикс `lang-' является предопределённым. Если вы используете директиву
<b>attributeoptions</b>,

то префикс `lang-' больше не будет предопределённым, и если вы хотите, чтобы он был определён,
его нужно указывать явно.
<p>
Описание атрибута с опцией пометки является подтипом описания этого атрибута без опций.
За исключением этого, определяемые данным способом опции не имеют специальных семантик.
Префиксы, определяемые данным способом, работают также, как опции `lang-':
они определяют префиксы для опций пометки, начинающихся с этого префикса.
То есть, если вы определили префикс `x-foo-', вы можете использовать опцию `x-foo-bar'.
Кроме того, в операциях поиска и сравнения, префикс или имя диапазона (оканчивающееся на `-')
совпадает со всеми опциями, начинающимися с этого имени, а также с опцией,
имя которой совпадает с именем диапазона без `-' в конце.
То есть, `x-foo-bar-' совпадает с `x-foo-bar' и с `x-foo-bar-baz'.
</p><p>
Согласно RFC 4520 опции, начинающиеся с `x-', зарезервированы для частных экспериментов.
Другие опции должны быть зарегистрированы в IANA (смотрите раздел 3.5 RFC 4520).
В OpenLDAP также есть встроенная опция `binary', но это опция передачи, а не пометки.
</p></dd><dt>

<b>attributetype (&nbsp;&lt;oid&gt;<br>&nbsp;[NAME&nbsp;&lt;name&gt;]&nbsp;[DESC&nbsp;&lt;description&gt;]&nbsp;[OBSOLETE]&nbsp;[SUP&nbsp;&lt;oid&gt;]&nbsp;[EQUALITY&nbsp;&lt;oid&gt;]&nbsp;[ORDERING&nbsp;&lt;oid&gt;]&nbsp;[SUBSTR&nbsp;&lt;oid&gt;]&nbsp;[SYNTAX&nbsp;&lt;oidlen&gt;]&nbsp;[SINGLE-VALUE]&nbsp;[COLLECTIVE]&nbsp;[NO-USER-MODIFICATION]&nbsp;[USAGE&nbsp;&lt;attributeUsage&gt;]&nbsp;)</b>

<dl compact=""><dt></dt><dd>
Задаёт тип атрибута с использованием определённого в RFC 4512 синтаксиса LDAPv3.
Разборщик slapd расширяет спецификацию RFC 4512, позволяя использовать строковые формы
наряду с цифровыми OID для OID атрибута и OID синтаксиса атрибута (смотрите описание параметра
<b>objectidentifier</b>).

</dd></dl>

</dt><dt><b>authid-rewrite&lt;cmd&gt; &lt;args&gt;</b>

</dt><dd>
Используется системой аутентификации для преобразования простых имён пользователей в LDAP DN,
используемые в целях авторизации. Задачи этого параметра аналогичны задачам параметра
<b>authz-regexp</b>

(смотрите ниже). За префиксом <i>authid-</i> должен следовать набор правил для перезаписи данных,
аналогичных тем, что описаны в man-странице
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapo-rwm&amp;category=5">slapo-rwm</a></b>(5)

(замените префикс <i>rwm-</i> на <i>authid-</i>). Не следует смешивать правила
<b>authid-rewrite&lt;cmd&gt;</b>

и
<b>authz-regexp</b>.

</dd><dt><b>authz-policy &lt;policy&gt;</b>

</dt><dd>
Используется для указания того, какие правила следует применять для прокси-авторизации.
Прокси-авторизация позволяет клиентам аутентифицироваться на сервере с одними
удостоверяющими данными пользователя, и при этом определить другую идентификационную сущность,
которая будет использоваться в целях авторизации и контроля доступа. По существу, это позволяет
пользователю A войти в систему как пользователь B с использованием пароля пользователя A. Флаг
<b>none</b>

отключает прокси-авторизацию. Это установка по умолчанию. При установленном флаге
<b>from</b>

будут использоваться правила из атрибута
<i>authzFrom</i>

авторизационного DN. При установленном флаге
<b>to</b>

будут использоваться правила из атрибута
<i>authzTo</i>

аутентификационного DN. При установленном флаге
<b>any</b>

(псевдоним устаревшего значения
<b>both</b>)

будет разрешено использовать правила из любого из перечисленных выше атрибутов
до первого успешного применения (проверяются в порядке
<b>to</b>,

<b>from</b>).

При установленном флаге
<b>all</b>

требуется, чтобы правила авторизации из обоих перечисленных выше атрибутов были успешно применены.
</dd></dl>
<p>

</p><dl compact=""><dt></dt><dd>
Правила представляют собой механизмы для указания того, каким идентификационным сущностям
разрешено выполнять прокси-авторизацию. Атрибут
<i>authzFrom</i>

в какой-либо записи определяет, каким иным пользователям разрешено выполнять
прокси-логин в эту запись. Атрибут
<i>authzTo</i>

в какой-либо записи определяет, в качестве каких иных пользователей может авторизовываться
данный пользователь. Пользователи могут без труда злоупотреблять использованием правил
<i>authzTo</i>,

если им разрешено записывать произвольные данные в этот атрибут. В общем случае атрибут
<i>authzTo</i>

должен быть защищён ACL так, чтобы его могли модифицировать только привилегированные пользователи.
Значения атрибутов
<i>authzFrom</i>

и
<i>authzTo</i>

описывают
<b>идентификационную сущность</b>

или набор идентификационных сущностей; эти значения могут быть в пяти формах:
<dl compact=""><dt></dt><dd>
<dl compact="">
<dt><b><a href="ldap:///">ldap:///</a>&lt;base&gt;??[&lt;scope&gt;]?&lt;filter&gt;</b>

</dt><dd>
</dd></dl>
</dd></dl>

<dl compact=""><dt></dt><dd>
<b>dn[.&lt;dnstyle&gt;]:&lt;pattern&gt;</b>

</dd></dl>

<dl compact=""><dt></dt><dd>
<b>u[.&lt;mech&gt;[/&lt;realm&gt;]]:&lt;pattern&gt;</b>

</dd></dl>

<dl compact=""><dt></dt><dd>
<b>group[/objectClass[/attributeType]]:&lt;pattern&gt;</b>

</dd></dl>

<dl compact=""><dt></dt><dd>
<b>&lt;pattern&gt;</b>

</dd></dl>

<dl compact=""><dt></dt><dd>
<p>
<b>&lt;dnstyle&gt;:={exact|onelevel|children|subtree|regex}</b>

</p><p>
</p></dd></dl>

Первая форма - это корректно сформированный LDAP
<b>URI</b>,

в котором должны отсутствовать части
<i>&lt;host&gt;:&lt;port&gt;</i>,

<i>&lt;attrs&gt;</i>

и
<i>&lt;extensions&gt;</i>,

таким образом, как в
<i>authzFrom</i>,

так и в
<i>authzTo</i>

поиск происходит локально.
Вторая форма - это
<b>DN</b>,

с опциональным модификатором стиля. Модификатор может иметь значения
<i>exact</i>,

<i>onelevel</i>,

<i>children</i>

и
<i>subtree</i>

для диапазонов совпадений exact, onelevel, children и subtree (в этих случаях
<i>&lt;pattern&gt;</i>

должен быть нормализован в соответствии с правилами нормализации DN), или значение специального стиля
<i>regex</i>,

в этом случае
<i>&lt;pattern&gt;</i>

должен интерпретироваться как шаблон POSIX (''расширенного'') регулярного выражения, как описано в
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=regex&amp;category=7">regex</a></b>(7)

и/или
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=re_format&amp;category=7">re_format</a></b>(7).

Шаблон
<i>*</i>

означает любое неанонимное DN.
Третья форма - это
<b>идентификатор</b>

</dd><dd>SASL с опциональными полями
<i>&lt;mech&gt;</i>

и
<i>&lt;realm&gt;</i>,

позволяющими указать
<b>механизм</b>

SASL, а также SASL-<b>realm</b>
для тех механизмов, которые его поддерживают. До сих пор обсуждается, нужно ли позволять указывать
SASL-механизм, и потому пользователям настоятельно не рекомендуется полагаться на эту возможность.
Четвёртая форма - это спецификация группы, состоящая из ключевого слова
<b>group</b>,

за которым, опционально, следуют спецификации объектного класса
<b>objectClass</b>

группы и типа атрибута
<b>attributeType</b>

членства в группе.
Поиск группы с DN, указанным в аргументе
<b>&lt;pattern&gt;</b>,

осуществляется с диапазоном base, и, в случае нахождения совпадения,
DN пользователя ищется среди значений атрибута членства в группе
<b>attributeType</b>.

Для обеспечения обратной совместимости, если тип идентификационной сущности не был предоставлен,
то есть присутствует только
<b>&lt;pattern&gt;</b>,

подразумевается
<i>непосредственно&nbsp;этот&nbsp;DN</i>;

как следствие,
<b>&lt;pattern&gt;</b>

подвергается нормализации DN. Поскольку интерпретация значений
<i>authzFrom</i>

и
<i>authzTo</i>

может влиять на безопасность, пользователям настоятельно рекомендуется явно устанавливать
тип спецификации идентификационной сущности, который будет использоваться.
Подмножество этих правил может быть использовано в качестве третьего аргумента в операторе
<b>authz-regexp</b>

(смотрите ниже); в частности, формы
<i>URI</i>

(результатом разрешения которого является ровно одна запись) и
<i>dn.exact:&lt;dn&gt;</i>.

</dd></dl>

<dl compact="">
<dt><b>authz-regexp &lt;match&gt; &lt;replace&gt;</b>

</dt><dd>
Используется системой аутентификации для преобразования простых имён пользователей, предоставляемых,
например, подсистемой SASL, либо получаемых из сертификатов при использовании основанного на сертификатах
механизма SASL EXTERNAL, либо предоставляемых в элементе управления "proxied authorization" (RFC 4370),
в LDAP DN, используемые в целях авторизации. Имейте ввиду,
что для того чтобы считаться корректным, DN не обязательно должно указывать на существующую запись.
При получении запроса авторизации от подсистемы SASL, берутся (если они доступны) SASL-значения
<b>USERNAME</b>,

<b>REALM</b>

и
<b>MECHANISM</b>

и объединяются в имя в форме:
<dl compact=""><dt></dt><dd>
<dl compact=""><dt></dt><dd>
<dl compact="">
<dt><b>UID=&lt;username&gt;[[,CN=&lt;realm&gt;],CN=&lt;mechanism&gt;],CN=auth</b>

</dt><dd>
<p>
</p></dd></dl>
</dd></dl>

Это имя сравнивается на соответствие POSIX (''расширенному'') регулярному выражению
<b>match</b>,

и, если совпадение успешно найдено, имя заменяется на строку
<b>replace</b>.

Если в регулярном выражении
<b>match</b>

имеется подстрока шаблона, заключённая в круглые скобки, например:
<dl compact=""><dt></dt><dd>
<dl compact="">
<dt><b>UID=([^,]*),CN=.*</b>

</dt><dd>
<p>
</p></dd></dl>
</dd></dl>

то часть имени, соответствующая данному шаблону, будет помещена в нумерованную переменную подстановки $1.
Если имеются другие подстроки шаблона в круглых скобках, соответствующие им подсовпадения будут помещены
в переменные $2, $3 и т.д., до $9. Эти переменные подстановки могут быть в дальнейшем использованы в строке
<b>replace</b>,

например:
<dl compact=""><dt></dt><dd>
<dl compact="">
<dt><b>UID=$1,OU=Accounts,DC=example,DC=com</b>

</dt><dd>
<p>
</p></dd></dl>
</dd></dl>

Получаемое в результате подстановки имя может быть либо DN, то есть строка с префиксом "dn:", либо LDAP URI.
В последнем случае сервер будет использовать данный URI для выполнения поиска в своей базе (базах) данных, и,
если в результате этого поиска будет найдена ровно одна запись, в качестве имени будет использоваться DN этой записи.
В LDAP URI не должно быть компонентов hostport, attrs или extensions, но компонент filter является обязательным, например:
<dl compact=""><dt></dt><dd>
<dl compact="">
<dt><b><a href="ldap:///OU=Accounts,DC=example,DC=com??one?(UID=$1)">ldap:///OU=Accounts,DC=example,DC=com??one?(UID=$1)</a></b>

</dt><dd>
<p>
</p></dd></dl>
</dd></dl>

Часть protocol этого URI обязательно должна быть
<b>ldap</b>.

Обратите внимание, что на данный поиск накладываются ограничения контроля доступа.
В частности, у аутентификационной сущности должно быть право на доступ "auth".
<p>
В конфигурационном файле может быть задано несколько параметров
<b>authz-regexp</b>

для того, чтобы разрешить обработку нескольких шаблонов нахождения соответствия и замены.
Шаблоны соответствия проверяются в том порядке, в котором они указаны в файле,
обработка прерывается при нахождении первого успешного совпадения.
</p><p>



</p></dd></dl>

</dd><dt><b>concurrency &lt;integer&gt;</b>

</dt><dd>
Указывает желаемый уровень параллелизма. Передаётся в базовую систему потоков в качестве подсказки.
По умолчанию какая-либо подсказка не предоставляется.
</dd><dt><b>conn_max_pending &lt;integer&gt;</b>

</dt><dd>
Указывает максимальное число запросов в режиме ожидания (стоящих в очереди) для анонимной сессии.
Если заявки поступают быстрее, чем сервер может их обработать, они будут помещаться в очередь,
размер которой ограничен значением этого параметра. Если данный лимит превышен, сессия будет закрыта.
Значение по умолчанию - 100.
</dd><dt><b>conn_max_pending_auth &lt;integer&gt;</b>

</dt><dd>
Указывает максимальное число запросов в режиме ожидания (стоящих в очереди) для сессии,
при установке которой пользователь прошёл аутентификацию. Значение по умолчанию - 1000.
</dd><dt><b>defaultsearchbase &lt;dn&gt;</b>

</dt><dd>
Определяет базу поиска по умолчанию, которая будет использоваться, когда клиент предоставил
поисковый запрос с отличным от base диапазоном и пустым базовым DN.
На запросы с диапазоном base и пустым базовым DN этот параметр не влияет.
</dd><dt><b>disallow &lt;features&gt;</b>

</dt><dd>
Указывает  набор  возможностей, которые будут запрещены (разделяются пробельными символами).
По умолчанию никакие из перечисленных возможностей не запрещены.
<b>bind_anon</b>

запрещает принимать анонимные запросы на подсоединение. Имейте ввиду, что данная установка
не препятствует анонимному доступу к каталогу (смотрите "require authc").
<b>bind_simple</b>

запрещает проводить аутентификацию методом простого подсоединения.
<b>tls_2_anon</b>

запрещает принудительный перевод сессии в анонимный статус при получении запроса операции StartTLS (смотрите также
<b>tls_authc</b>).

<b>tls_authc</b>

запрещает выполнение операции StartTLS в сессии с проверкой подлинности (смотрите также
<b>tls_2_anon</b>).

<b>proxy_authz_non_critical</b>

запрещает принимать элемент управления proxied authorization (RFC4370),
если его флаг criticality установлен в FALSE.
<b>dontusecopy_non_critical</b>

запрещает принимать элемент управления dontUseCopy (работы по стандартизации ведутся),
если его флаг criticality установлен в FALSE.
</dd><dt>

<b>ditcontentrule (&nbsp;&lt;oid&gt;<br>&nbsp;[NAME&nbsp;&lt;name&gt;]&nbsp;[DESC&nbsp;&lt;description&gt;]&nbsp;[OBSOLETE]&nbsp;[AUX&nbsp;&lt;oids&gt;]&nbsp;[MUST&nbsp;&lt;oids&gt;]&nbsp;[MAY&nbsp;&lt;oids&gt;]&nbsp;[NOT&nbsp;&lt;oids&gt;]&nbsp;)</b>

<dl compact=""><dt></dt><dd>
Задаёт правило содержимого DIT с использованием определённого в RFC 4512 синтаксиса LDAPv3.
Разборщик slapd расширяет спецификацию RFC 4512, позволяя использовать строковые формы
наряду с цифровыми OID для OID атрибута и OID синтаксиса атрибута (смотрите описание параметра
<b>objectidentifier</b>).

</dd></dl>

</dt><dt><b>gentlehup { on | off }</b>

</dt><dd>
При получении сигнала SIGHUP вместо немедленного отключения будет предпринята попытка 'корректного' отключения:
<b>slapd</b>

прекратит принимать новые соединения, но установленные текущими клиентами соединения закрывать не будет.
Все дальнейшие операции записи, тем не менее, будут возвращать unwilling-to-perform.
</dd><dd>slapd завершит работу, когда все клиенты закроют свои соединения (если они вообще когда-либо это сделают),
или, как и раньше, при получении сигнала SIGTERM. Такое поведение может оказаться полезным,
если вы хотите остановить сервер и запустить новый экземпляр сервера
<b>slapd&nbsp;с&nbsp;другой&nbsp;базой&nbsp;данных</b>,

при этом корректно обслужив текущих активных клиентов.
Значение по умолчанию - off. Возможно, вы захотите использовать данный параметр совместно с параметром
<b>idletimeout</b>.

</dd><dt><b>idletimeout &lt;integer&gt;</b>

</dt><dd>
Указывает количество секунд ожидания перед принудительным закрытием простаивающего клиентского соединения.
Значение 0 (по умолчанию) параметра idletimeout отключает эту функцию. Возможно, вы захотите также использовать
параметр
<b>writetimeout</b>.

</dd><dt><b>include &lt;filename&gt;</b>

</dt><dd>
Считывает дополнительную конфигурационную информацию из заданного файла
перед тем как продолжить обработку следующей строки текущего файла.
</dd><dt><b>index_intlen &lt;integer&gt;</b>

</dt><dd>
Указывает длину ключа для упорядоченных целочисленных индексов. В качестве ключей индекса будут использованы
наиболее значимые байты двоичного представления целого числа. Длина ключа по умолчанию - 4, что обеспечивает
точную индексацию для значений длиной в 31 бит. Для индексирования очень больших значений используется
представление числа с плавающей точкой.
</dd><dt><b>index_substr_if_minlen &lt;integer&gt;</b>

</dt><dd>
Указывает минимальную длину для индексов subinitial и subfinal.
Чтобы значение атрибута было обработано функциями индексирования,
оно должно состоять как минимум из такого количества символов. Значение по умолчанию - 2.
</dd><dt><b>index_substr_if_maxlen &lt;integer&gt;</b>

</dt><dd>
Указывает максимальную длину для индексов subinitial и subfinal.
Функции индексирования будут обрабатывать только указанное количество символов из значения атрибута;
все символы сверх этого количества будут проигнорированы. Значение по умолчанию - 4.
</dd><dt><b>index_substr_any_len &lt;integer&gt;</b>

</dt><dd>
Указывает длину, используемую для индексов subany.
Чтобы значение атрибута было обработано функциями индексирования,
оно должно состоять как минимум из такого количества символов.
Значения атрибутов длиннее этой величины будут обработаны в виде сегментов, длина которых равна этой величине.
Значение по умолчанию - 4. Индекс subany также будет использоваться при просмотре индексов
subinitial и subfinal, когда строка в поисковом фильтре длиннее чем значение
<i>index_substr_if_maxlen</i>.

</dd><dt><b>index_substr_any_step &lt;integer&gt;</b>

</dt><dd>
Указывает величину шага, используемую при построении проверяемых значений для просмотров индексов subany.
Данная величина задаёт смещение для сегментов строки поискового фильтра при выполнении просмотра индексов subany.
Значение по умолчанию - 2. Например (в случае использования значений по умолчанию), операция поиска
с фильтром "cn=*abcdefgh*" приведёт к генерации просмотров индексов для значений "abcd", "cdef" и "efgh".
<p>
</p></dd></dl>
<p>

Примечание: Поддержка индексирования зависит от конкретного используемого механизма манипуляции данными.
Также имейте ввиду, что при изменении этих установок обычно требуется удалить любые индексы,
зависящие от этих параметров, и пересоздать их с помощью
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapindex&amp;category=8">slapindex</a></b>(8).

</p><p>
</p><dl compact="">
<dt>

<b>ldapsyntax (&nbsp;&lt;oid&gt;<br>&nbsp;[DESC&nbsp;&lt;description&gt;]&nbsp;[X-SUBST&nbsp;&lt;substitute-syntax&gt;]&nbsp;)</b>

<dl compact=""><dt></dt><dd>
Задаёт LDAP-синтаксис с использованием определённого в RFC 4512 синтаксиса LDAPv3.
Разборщик slapd расширяет спецификацию RFC 4512, позволяя использовать строковые формы
наряду с цифровыми OID для OID синтаксиса (смотрите описание параметра
<b>objectidentifier</b>).

Разборщик slapd также соблюдает специфичное для OpenLDAP расширение
<b>X-SUBST</b>,

позволяющее использовать выражение
<b>ldapsyntax</b>

для определения нереализованных синтаксисов наряду с другими синтаксисами.
Значение расширения
<i>substitute-syntax</i>

используется в качестве синтаксиса для временной замены нереализованного. Синтаксис
<i>substitute-syntax</i>

должен быть определён.
Это позволяет определять типы атрибутов, использующие нереализованные синтаксисы,
с применением корректного OID синтаксиса. Если
<b>X-SUBST</b>

не используется, данное выражение конфигурации вызовет ошибку, поскольку с полученной
структурой синтаксиса не будет связано ни одного обработчика.
</dd></dl>

</dt><dt></dt><dd>
<b>listener-threads &lt;integer&gt;</b>

Указывает количество потоков, которые будут использоваться для менеджера соединений.
Значение по умолчанию - 1, и этого обычно достаточно для процессоров вплоть до 16 ядер.
В качестве значения должна быть установлена степень числа 2.
</dd><dt><b>localSSF &lt;SSF&gt;</b>

</dt><dd>
Указывает фактор силы безопасности (Security Strength Factor, SSF), который будет задан для локальных сессий LDAP,
например таких, которые устанавливаются на интерфейс <a href="ldapi://.">ldapi://.</a> Разъяснение значений SSF смотрите в описании опции
<b>minssf</b>

параметра
<b>sasl-secprops</b>.

Значение по умолчанию - 71.
</dd><dt><b>logfile &lt;filename&gt;</b>

</dt><dd>
Указывает файл, куда будут записываться сообщения журнала отладки. По умолчанию эти сообщения выдаются только в поток
</dd><dd>stderr и больше никуда не записываются. При указании параметра logfile сообщения посылаются и на stderr, и в заданный файл.
</dd><dt><b>loglevel &lt;integer&gt; [...]</b>

</dt><dd>
Указывает уровень, согласно которому отладочные сообщения и статистика операций будут журналироваться системой syslog
(в настоящий момент сообщения направляются в канал LOG_LOCAL4
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=syslogd&amp;category=8">syslogd</a></b>(8)).

Эти уровни должны рассматриваться как определения подсистем, а не как последовательное увеличение подробности журналируемой информации.
Некоторые высокоприоритетные сообщения журналируются независимо от того, какой уровень журналирования настроен
(если настроен хотя бы какой-нибудь). Уровни журналирования являются аддитивными. Доступны следующие уровни:
<dl compact=""><dt></dt><dd>
<dl compact=""><dt></dt><dd>

<dl compact="">
<dt><b>1</b>

</dt><dd>
<b>(0x1 trace)</b>

отслеживание вызовов функций
</dd><dt><b>2</b>

</dt><dd>
<b>(0x2 packets)</b>

отладка обработки пакетов
</dd><dt><b>4</b>

</dt><dd>
<b>(0x4 args)</b>

усиленная отладка (аргументы функций)
</dd><dt><b>8</b>

</dt><dd>
<b>(0x8 conns)</b>

управление соединениями
</dd><dt><b>16</b>

</dt><dd>
<b>(0x10 BER)</b>

вывод посылки и приёма пакетов
</dd><dt><b>32</b>

</dt><dd>
<b>(0x20 filter)</b>

обработка поисковых фильтров
</dd><dt><b>64</b>

</dt><dd>
<b>(0x40 config)</b>

обработка конфигурационного файла
</dd><dt><b>128</b>

</dt><dd>
<b>(0x80 ACL)</b>

обработка списков контроля доступа
</dd><dt><b>256</b>

</dt><dd>
<b>(0x100 stats)</b>

статистика соединений, LDAP-операций, результатов (рекомендуемый уровень)
</dd><dt><b>512</b>

</dt><dd>
<b>(0x200 stats2)</b>

статистика посылки записей журнала
</dd><dt><b>1024</b>

</dt><dd>
<b>(0x400 shell)</b>

вывод взаимодействия с механизмами манипуляции данными shell
</dd><dt><b>2048</b>

</dt><dd>
<b>(0x800 parse)</b>

вывод отладочной информации разбора записей
</dd><dt><b>16384</b>

</dt><dd>
<b>(0x4000 sync)</b>

вывод отладочной информации репликации LDAPSync
</dd><dt><b>32768</b>

</dt><dd>
<b>(0x8000 none)</b>

только сообщения, выводимые независимо от заданного уровня журналирования

</dd></dl>
</dd></dl>

Требуемый уровень журналирования может быть задан одним целым числом (десятичным или шестнадцатеричным),
которое является комбинацией нужных уровней журналирования (соединяемых через логическое ИЛИ).
Также он может быть задан списком целых чисел (опять же соединяемых через логическое ИЛИ),
либо списком ключевых слов, указанных в скобках в списке выше. Таким образом, директивы
<p>

</p><pre>    loglevel 129
    loglevel 0x81
    loglevel 128 1
    loglevel 0x80 0x1
    loglevel acl trace
</pre>

<p>

эквивалентны. Ключевое слово
<b>any</b>

может быть использовано в качестве сокращения для включения журналирования на всех уровнях (эквивалент для -1). Ключевое слово
<b>none</b>,

или эквивалентное ему целочисленное представление, приводит к тому, что в журнал будут попадать только сообщения,
выводимые независимо от заданного уровня журналирования. Фактически, если loglevel задан в 0, журналирования не происходит,
поэтому для вывода высокоприоритетных сообщений требуется, как минимум, уровень
<b>none</b>.

</p><p>
Значение по умолчанию для loglevel - <b>stats</b>.
Данный уровень обычно также включается при использовании других уровней loglevel для упрощения анализа журналов.
</p></dd></dl>

</dd><dt><b>moduleload &lt;filename&gt;</b>

</dt><dd>
Указывает имя динамически подгружаемого модуля, который требуется загрузить.
Аргумент filename может быть именем файла как с указанием, так и без указания абсолютного пути к нему.
Поиск файлов без указания абсолютного пути будет производиться в директориях, указанных в параметре
<b>modulepath</b>.

Данный параметр, как и параметр
<b>modulepath</b>,

может использоваться, только если при компиляции slapd была указана опция --enable-modules.
</dd><dt><b>modulepath &lt;pathspec&gt;</b>

</dt><dd>
Определяет список директорий, в которых будет производиться поиск подгружаемых модулей.
Обычно пути в списке разделяются двоеточиями, но это зависит от операционной системы.
Значение по умолчанию - /usr/local/libexec/openldap, куда при стандартной установке OpenLDAP помещаются модули.
</dd><dt>

<b>objectclass (&nbsp;&lt;oid&gt;<br>&nbsp;[NAME&nbsp;&lt;name&gt;]&nbsp;[DESC&nbsp;&lt;description&gt;]&nbsp;[OBSOLETE]&nbsp;[SUP&nbsp;&lt;oids&gt;]&nbsp;[{&nbsp;ABSTRACT&nbsp;|&nbsp;STRUCTURAL&nbsp;|&nbsp;AUXILIARY&nbsp;}]&nbsp;[MUST&nbsp;&lt;oids&gt;]&nbsp;[MAY&nbsp;&lt;oids&gt;]&nbsp;)</b>

<dl compact=""><dt></dt><dd>
Задаёт объектный класс с использованием определённого в RFC 4512 синтаксиса LDAPv3.
Разборщик slapd расширяет спецификацию RFC 4512, позволяя использовать строковые формы
наряду с цифровыми OID для OID объектного класса (смотрите описание параметра
<b>objectidentifier</b>).

По умолчанию объектные классы являются структурными ("STRUCTURAL").
</dd></dl>

</dt><dt><b>objectidentifier &lt;name&gt; { &lt;oid&gt; | &lt;name&gt;[:&lt;suffix&gt;] }</b>

</dt><dd>
Определяет строковое имя, которое будет соответствовать заданному OID.
Это строковое имя может использоваться вместо цифрового OID в определениях объектного класса и атрибута.
Кроме того, определяемое имя может использоваться с суффиксом в форме ":xx",
в этом случае будет применяться значение "oid.xx".
</dd><dt><b>password-hash &lt;hash&gt; [&lt;hash&gt;...]</b>

</dt><dd>
В этом параметре задаются один или несколько алгоритмов хэширования, которые будут использоваться
для генерации паролей пользователей, хранящихся в атрибуте userPassword, при выполнении
расширенной операции изменения пароля LDAP (RFC 3062). Аргумент &lt;hash&gt; должен быть одним из вариантов
<b>{SSHA}</b>,

<b>{SHA}</b>,

<b>{SMD5}</b>,

<b>{MD5}</b>,

<b>{CRYPT}</b>

или
<b>{CLEARTEXT}</b>.

Значение по умолчанию -
<b>{SSHA}</b>.

<p>
Варианты
<b>{SHA}</b>

и
<b>{SSHA}</b>

используют алгоритм SHA-1 (FIPS 160-1), последний из них - с "солью".
</p><p>
Варианты
<b>{MD5}</b>

</p></dd><dd>and
<b>{SMD5}</b>

используют алгоритм MD5 (RFC 1321), последний из них - с "солью".
<p>
Вариант
<b>{CRYPT}</b>

использует вызов
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=crypt&amp;category=3">crypt</a></b>(3).

</p><p>
Вариант
<b>{CLEARTEXT}</b>

указывает на то, что новый пароль будет добавлен в атрибут userPassword в виде открытого текста.
</p><p>
Имейте ввиду, что данный параметр не влияет на обработку значений атрибута userPassword при выполнении
пользовательскими приложениями других операций LDAP, таких как Add, Modify или иных.
</p></dd><dt><b>password-crypt-salt-format &lt;format&gt;</b>

</dt><dd>
Указывает формат "соли", передаваемой вызову
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=crypt&amp;category=3">crypt</a></b>(3)

для генерации паролей {CRYPT} (смотрите параметр
<b>password-hash</b>)

при выполнении расширенной операции изменения пароля LDAP (RFC 3062).
<p>
Передаваемая в качестве аргумента строка должна быть в формате
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=sprintf&amp;category=3">sprintf</a></b>(3)

и может включать один (и только один) шаблон подстановки %s.
Этот шаблон будет заменяться строкой случайных символов из диапазона [A-Za-z0-9./].
Например, аргумент "%.2s" обеспечивает "соль" из двух символов,
а аргумент "$1$%.8s" указывает некоторым версиям <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=crypt&amp;category=3">crypt</a>(3) использовать алгоритм MD5
и обеспечивает "соль" из восьми случайных символов.
Значение по умолчанию - "%s", при котором обеспечивается "соль" из 31-го символа.
</p></dd><dt><b>pidfile &lt;filename&gt;</b>

</dt><dd>
Имя файла (с указанием абсолютного пути), в котором будет содержаться идентификатор процесса сервера
<b>slapd</b>

(смотрите вызов
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=getpid&amp;category=2">getpid</a></b>(2)).

</dd><dt><b>referral &lt;url&gt;</b>

</dt><dd>
Указывает отсылку, возвращаемую в случаях, когда
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd&amp;category=8">slapd</a></b>(8)

не может найти среди своих локальных баз данных подходящую для обработки запроса базу.
Если параметр определён несколько раз, клиенту предоставляется каждое из указанных url.
</dd><dt><b>require &lt;conditions&gt;</b>

</dt><dd>
Указывает набор условий (разделённых пробельными символами), которые будет необходимо соблюдать
(по умолчанию - none). Данная директива может быть определена глобально и/или на уровне базы данных;
базы данных наследуют глобальные условия, таким образом условия, определённые на уровне базы данных,
добавляются к глобальным. Условие
<b>bind</b>

требует выполнения операции подсоединения bind перед началом работы с каталогом
(выполнением каких-либо операций). Условие
<b>LDAPv3</b>

требует, чтобы в сессии использовался LDAP версии 3. Условие
<b>authc</b>

требует прохождения аутентификации перед началом работы с каталогом. Условие
<b>SASL</b>

требует прохождения SASL-аутентификации перед началом работы с каталогом. Условие
<b>strong</b>

требует прохождения строгой аутентификации перед началом работы с каталогом. Ключевое слово strong
разрешает выполнение как аутентификации "simple" в защищённом режиме, так и SASL-аутентификации. Условие
<b>none</b>

может быть использовано для обозначения того, что никаких условий соблюдать не требуется
(полезно для сброса глобального набора условий в конкретной базе данных); должно быть первым в списке условий.
</dd><dt><b>reverse-lookup on | off</b>

</dt><dd>
Включение/отключение обратных поисковых запросов имени клиента без подтверждения (по умолчанию -
<b>off</b>).

Доступно только если при компиляции указывалась опция --enable-rlookups.
</dd><dt><b>rootDSE &lt;file&gt;</b>

</dt><dd>
Указывает имя файла <a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=LDIF&amp;category=5">LDIF</a>(5), содержащего определённые пользователем атрибуты для корневой DSE.
Эти атрибуты возвращаются вместе с обычно выдаваемыми slapd атрибутами.
<p>
Корневая DSE - это запись с информацией о сервере и его возможностях, содержащейся в операционных атрибутах.
У этой записи пустое DN, и получить её содержимое можно, например, таким запросом:
<br>
&nbsp;&nbsp;&nbsp;&nbsp;
ldapsearch -x -b "" -s base "+"
<br>

Более подробную информацию можно найти в разделе 5.1 RFC 4512.
</p></dd><dt><b>sasl-auxprops &lt;plugin&gt; [...]</b>

</dt><dd>
Указывает какие плагины инфраструктуры auxprop использовать для выполнения запросов аутентификации.
По умолчанию список плагинов пуст, в этом случае используется только встроенная в slapd поддержка SASL.
Обычно никаких других плагинов auxprop не требуется.
</dd><dt><b>sasl-host &lt;fqdn&gt;</b>

</dt><dd>
Используется для указания полного доменного имени, используемого при обработке SASL.
</dd><dt><b>sasl-realm &lt;realm&gt;</b>

</dt><dd>
Указывает SASL-realm. По умолчанию realm пуст.
</dd><dt><b>sasl-secprops &lt;properties&gt;</b>

</dt><dd>
Используется для указания параметров безопасности Cyrus SASL. Флаг
<b>none</b>

(без указания каких-либо других параметров) приводит к сбросу параметров по умолчанию ("noanonymous,noplain"). Флаг
<b>noplain</b>

отключает механизмы, потенциально неустойчивые к простым пассивным атакам. Флаг
<b>noactive</b>

отключает механизмы, потенциально неустойчивые к активным атакам. Флаг
<b>nodict</b>

отключает механизмы, потенциально неустойчивые к простым атакам по словарю. Флаг
<b>noanonymous</b>

отключает механизмы, поддерживающие анонимные соединения. Флаг
<b>forwardsec</b>

требует обеспечения так называемой прямой секретности (forward secrecy) между сессиями. Флаг
<b>passcred</b>

требует использования механизмов, выполняющих передачу удостоверяющих данных клиента
(и, для осуществления этого, разрешает механизмы, способные передавать удостоверяющие данные). Параметр
<b>minssf=&lt;factor&gt;</b>

указывает минимально приемлемый
<i>фактор силы безопасности (security strength factor)</i>

в виде целого числа, приблизительно отражающего эффективную длину ключа, используемого для  шифрования.
0 (ноль) подразумевает отсутствие защиты, 1 подразумевает только защиту целостности данных,
56 разрешает использование DES или других слабых шифров, 112 разрешает использование Triple DES
и других сильных шифров, 128 разрешает использование RC4, Blowfish и других современных сильных шифров.
Значение по умолчанию - 0. Параметр
<b>maxssf=&lt;factor&gt;</b>

указывает максимально возможный
<i>фактор силы безопасности (security strength factor)</i>

в виде целого числа (смотрите описание опции minssf). Значение по умолчанию - INT_MAX. Параметр
<b>maxbufsize=&lt;size&gt;</b>

определяет максимально разрешённый размер буфера полученных уровней обеспечениябезопасности.<br>
Значение 0 отключает уровни обеспечения безопасности. Значение по умолчанию - 65536.
</dd><dt><b>schemadn &lt;dn&gt;</b>

</dt><dd>
Указывает уникальное имя для подзаписи подсхемы, управляющей записями на данном сервере.
Значение по умолчанию - "cn=Subschema".
</dd><dt><b>security &lt;factors&gt;</b>

</dt><dd>
Определяет набор факторов силы безопасности (разделённых пробельными символами),
которые будет необходимо соблюдать (описание факторов силы безопасности смотрите в опции
<b>minssf</b>

парамерта
<b>sasl-secprops</b>).

Данная директива может быть определена глобально и/или на уровне базы данных.
<b>ssf=&lt;n&gt;</b>

указывает общий фактор силы безопасности.
<b>transport=&lt;n&gt;</b>

указывает транспортный фактор силы безопасности.
<b>tls=&lt;n&gt;</b>

указывает фактор силы безопасности TLS.
<b>sasl=&lt;n&gt;</b>

указывает фактор силы безопасности SASL.
<b>update_ssf=&lt;n&gt;</b>

указывает общий фактор силы безопасности, необходимый для внесения изменений в каталог.
<b>update_transport=&lt;n&gt;</b>

указывает транспортный фактор силы безопасности, необходимый для внесения изменений в каталог.
<b>update_tls=&lt;n&gt;</b>

указывает фактор силы безопасности TLS, необходимый для внесения изменений в каталог.
<b>update_sasl=&lt;n&gt;</b>

указывает фактор силы безопасности SASL, необходимый для внесения изменений в каталог.
<b>simple_bind=&lt;n&gt;</b>

указывает фактор силы безопасности, необходимый для выполнения
<i>simple</i>-аутентификации

по имени пользователя и паролю. Имейте ввиду, что фактор
<b>transport</b>

является показателем безопасности, обеспечиваемой лежащим в основе транспортным уровнем,
например, ldapi:// (и, наконец, IPSEC). Обычно он не используется.
</dd><dt><b>serverID &lt;integer&gt; [&lt;URL&gt;]</b>

</dt><dd>
Указывает целочисленный идентификатор от 0 до 4095 для данного сервера (ограничен тремя
шестнадцатеричными цифрами). Идентификатор может быть указан как десятичным, так и
шестнадцатеричным числом, в последнем случае перед значением ставится префикс "0x". 
Отличные от нуля идентификаторы требуются при репликации с несколькими главными серверами,
причём каждый главный сервер должен иметь уникальный отличный от нуля идентификатор. Имейте ввиду, что это ограничение
применяется также к отдельным главным серверам, базы данных которых входят в набор склеиваемых баз данных.
При указании URL данная директива может быть задана несколько раз для предоставления полного списка
серверов-участников и их идентификаторов.
В предоставляемых URL должны использоваться полные доменные имена каждого сервера.
Определённые в этом параметре идентификаторы используются в поле "replica id" всех CSN,
генерируемых указанным сервером. Значение по умолчанию - ноль, что является верным лишь для репликации с
одним главным сервером. Пример:
</dd></dl>
<p>

</p><pre>        serverID 1
</pre>

<dl compact="">
<dt><b>sizelimit {&lt;integer&gt;|unlimited}</b>

</dt><dd>
</dd><dt><b>sizelimit size[.{soft|hard|unchecked}]=&lt;integer&gt; [...]</b>

</dt><dd>
Указывает максимальное число записей, которые будут возвращены в ответе на поисковый запрос. Ограничение
по размеру по умолчанию - 500. Для того, чтобы задать отсутствие ограничений, используйте ключевое слово
<b>unlimited</b>.

Второй формат позволяет указать ограничения по размеру более точно. В одной и той же строке можно добавлять
дополнительные аргументы. Назначение различных флагов смотрите в определении параметра
<b>limits</b>.

</dd><dt><b>sockbuf_max_incoming &lt;integer&gt;</b>

</dt><dd>
Указывает максимальный размер входящего LDAP PDU для анонимных сессий. Значение по умолчанию - 262143.
</dd><dt><b>sockbuf_max_incoming_auth &lt;integer&gt;</b>

</dt><dd>
Указывает максимальный размер входящего LDAP PDU для сессий с проверкой подлинности. Значение по умолчанию - 4194303.
</dd><dt><b>sortvals &lt;attr&gt; [...]</b>

</dt><dd>
Указывает список многозначных атрибутов, значения которых всегда будут поддерживаться в упорядоченном виде.
Применение этого параметра позволяет повысить эффективность выполнения операций Modify, Compare, а также оценки
поисковых фильтров с этими атрибутами. Результирующий порядок сортировки зависит от синтаксиса и правил соответствия
атрибутов и может не соответствовать лексическому или какому-либо другому известному порядку сортировки.
</dd><dt><b>tcp-buffer [listener=&lt;URL&gt;] [{read|write}=]&lt;size&gt;</b>

</dt><dd>
Определяет размер буфера TCP. Если в параметре указан только аргумент size, то он определяет глобальные значения
TCP-буферов чтения и записи, которые связываются с любым открытым соединением, ожидающим приёма запросов.
При указании аргумента listener, размер буфера назначается конкретному соединению. Квалификаторы read и write
позволяют указать отдельно размеры буферов чтения и записи. Подробнее смотрите в man-странице
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=tcp&amp;category=7">tcp</a></b>(7).

Имейте ввиду, что некоторые операционные системы реализуют автоматическую подстройку TCP-буфера.
</dd><dt><b>threads &lt;integer&gt;</b>

</dt><dd>
Указывает максимальный размер основного пула потоков. Значение по умолчанию - 16, минимальное значение - 2.
</dd><dt><b>timelimit {&lt;integer&gt;|unlimited}</b>

</dt><dd>
</dd><dt><b>timelimit time[.{soft|hard}]=&lt;integer&gt; [...]</b>

</dt><dd>
Указывает максимальное число секунд (реальных), которые будет тратить
<b>slapd</b>,

отвечая на поисковый запрос. Ограничение по времени по умолчанию - 3600.
Для того, чтобы задать отсутствие ограничений, используйте ключевое слово
<b>unlimited</b>.

Второй формат позволяет указать ограничения по времени более точно. В одной и той же строке можно добавлять
дополнительные аргументы. Назначение различных флагов смотрите в определении параметра
<b>limits</b>.

</dd><dt><b>tool-threads &lt;integer&gt;</b>

</dt><dd>
Указывает максимальное число потоков, используемых, когда slapd работает в режиме инструмента.
Это число не должно превышать количества процессоров в системе. Значение по умолчанию - 1.



</dd><dt><b>writetimeout &lt;integer&gt;</b>

</dt><dd>
Указывает количество секунд ожидания перед принудительным закрытием соединения, в котором выполняется
незавершившаяся корректно операция записи. Это позволяет выходить из различных ситуаций, связанных с зависанием
сетевого соединения. Значение 0 (по умолчанию) параметра writetimeout отключает эту функцию.
</dd></dl>
<a name="lbAF">&nbsp;</a>
<h2>ПАРАМЕТРЫ TLS</h2>

Если
<b>slapd</b>

собран с поддержкой Transport Layer Security, можно задать некоторые дополнительные параметры.
<dl compact="">
<dt><b>TLSCipherSuite &lt;cipher-suite-spec&gt;</b>

</dt><dd>
Позволяет настроить то, какие шифры будут приниматься, а также порядок их предпочтения.
Аргумент &lt;cipher-suite-spec&gt; должен представлять собой спецификацию шифров для используемой библиотеки TLS
(OpenSSL, GnuTLS или Mozilla NSS). Примеры:
<dl compact=""><dt></dt><dd>
<dl compact=""><dt></dt><dd>
<dl compact="">
<dt><i>OpenSSL:</i>

</dt><dd>
TLSCipherSuite HIGH:MEDIUM:+SSLv2
</dd><dt><i>GnuTLS:</i>

</dt><dd>
TLSCiphersuite SECURE256:!AES-128-CBC
</dd></dl>
</dd></dl>

<p>
Для проверки того, какие шифры доступны в данной спецификации OpenSSL, используйте команду:
</p><p>
</p><pre>        openssl ciphers -v &lt;cipher-suite-spec&gt;
</pre>

<p>
В GnuTLS доступные спецификации можно найти в man-странице
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=gnutls-cli&amp;category=1">gnutls-cli</a></b>(1)

(смотрите описание опции
<b>--priority</b>).

</p><p>
В старых версиях библиотеки GnuTLS, где утилита gnutls-cli не поддерживала опции
--priority, можно получить --- ограниченный --- список шифров командой:
</p><p>
</p><pre>        gnutls-cli -l
</pre>

<p>
При использовании библиотеки Mozilla NSS применяются спецификации наборов шифров OpenSSL,
которые транслируются в формат, используемый внутри библиотеки Mozilla NSS. Не существует
простого способа получить список наборов шифров из командной строки. Полный список можно
найти в исходном коде Mozilla NSS, файл sslinfo.c, структура
</p><pre>        static const SSLCipherSuiteInfo suiteInfo[]
</pre>

</dd></dl>

</dd><dt><b>TLSCACertificateFile &lt;filename&gt;</b>

</dt><dd>
Указывает файл, содержащий сертификаты всех удостоверяющих центров (Certificate Authorities, CA),
которым доверяет
<b>slapd</b>.

Среди этих сертификатов должен быть сертификат для CA, подписавшего сертификат сервера. Если CA,
подписавший сертификат сервера, не является CA верхнего уровня (корневым), в файле должны присутствовать
сертификаты всей последовательности CA от CA, подписавшего сертификат сервера, до CA верхнего уровня.
Несколько сертификатов просто добавляются в файл один за другим; их порядок не существенен.
</dd><dt><b>TLSCACertificatePath &lt;path&gt;</b>

</dt><dd>
Указывает путь к директории, содержащей сертификаты всех удостоверяющих центров
в отдельных файлах. Обычно задаётся только один из двух параметров: либо этот, либо
TLSCACertificateFile. При использовании библиотеки GnuTLS данный параметр не поддерживается.
<p>
При использовании библиотеки Mozilla NSS аргумент &lt;path&gt; может содержать путь к базе данных
сертификатов/ключей Mozilla NSS. Если аргумент &lt;path&gt; содержит пути и к базе данных
сертификатов/ключей Mozilla NSS, и к файлам сертификатов удостоверяющих центров, OpenLDAP будет
использовать базу данных сертификатов/ключей, а файлы сертификатов удостоверяющих центров
проигнорирует.
</p></dd><dt><b>TLSCertificateFile &lt;filename&gt;</b>

</dt><dd>
Указывает файл, содержащий сертификат сервера
<b>slapd</b>.

<p>
При использовании библиотеки Mozilla NSS и базы данных сертификатов/ключей (указанной в параметре
TLSCACertificatePath), TLSCertificateFile определяет имя сертификата, который нужно использовать:
</p><pre>        TLSCertificateFile Server-Cert
</pre>

Если используется токен, отличный от встроенного внутреннего, сначала указывается имя этого
токена, за которым следует двоеточие:
<pre>        TLSCertificateFile my hardware device:Server-Cert
</pre>

Для получения списка имён сертификатов используйте certutil -L:
<pre>        certutil -d /path/to/certdbdir -L
</pre>

</dd><dt><b>TLSCertificateKeyFile &lt;filename&gt;</b>

</dt><dd>
Указывает файл, содержащий закрытый ключ сервера
<b>slapd</b>,

соответствующий сертификату, хранящемуся в файле, указанном в параметре
<b>TLSCertificateFile</b>.

В настоящее время данный закрытый ключ должен не иметь парольной защиты,
поэтому критически важное значение имеет защита самого файла с ключом.
<p>
При использовании библиотеки Mozilla NSS, TLSCertificateKeyFile указывает имя файла, содержащего
пароль для ключа, соответствующего сертификату, указанному в параметре TLSCertificateFile.
Для отключения парольной защиты базы данных сертификатов/ключей можно использовать команду modutil.
Например, если в параметре TLSCACertificatePath в качестве расположения базы данных сертификатов/ключей
указано /etc/openldap/certdb, то для смены пароля на пустую строку используйте:
</p><pre>        modutil -dbdir /etc/openldap/certdb -changepw 'NSS Certificate DB'
</pre>

Вы должны знать предыдущий пароль, если он был установлен. Предупреждение о запуске браузера следует
проигнорировать. На запрос нового пароля нажмите 'Enter'.
</dd><dt><b>TLSDHParamFile &lt;filename&gt;</b>

</dt><dd>
В данной директиве указывается файл, содержащий параметры для обмена ключами по алгоритму
Диффи-Хеллмана. Эти параметры требуются при использовании на сервере сертификата DSA,
либо сертификата RSA в котором нет варианта использования ключа "шифрование ключа" ("key encipherment").
Имейте ввиду, что при задании этой директивы в некоторых не используемых по умолчанию наборах шифров
может быть активирован анонимный обмен ключами по алгоритму Диффи-Хеллмана.
Как правило, следует избегать анонимных обменов ключами, поскольку они не обеспечивают
настоящую аутентификацию клиента или сервера, а также защиту от атак типа "man-in-the-middle".
Вам следует добавить "!ADH" к списку наборов шифров чтобы гарантировать, что эти шифры не используются.
При использовании Mozilla NSS параметры обмена ключами по алгоритму Диффи-Хеллмана
всегда генерируются случайным образом, поэтому данная директива игнорируется.
</dd><dt><b>TLSProtocolMin &lt;major&gt;[.&lt;minor&gt;]</b>

</dt><dd>
Указывает минимальную версию протокола SSL/TLS, которая будет использоваться для установки
защищённого соединения. Если сервер не поддерживает как минимум данную версию протокола,
переговоры SSL будут завершаться неудачей. Чтобы указать необходимость использования
TLS 1.x или выше, задайте в качестве аргумента этого параметра 3.(x+1), то есть при
<p>
</p><pre>        TLSProtocolMin 3.2
</pre>

<p>
требуется использовать TLS 1.1. Если в качестве минимально допустимой указана та версия
протокола, которая не поддерживается данной реализацией OpenLDAP, то в итоге будет
требоваться та наибольшая версия протокола, которую OpenLDAP поддерживает.
Библиотека GnuTLS игнорирует этот параметр.
</p></dd><dt><b>TLSRandFile &lt;filename&gt;</b>

</dt><dd>
Указывает файл, из которого будут получены случайные данные, если недоступен
/dev/[u]random. Обычно задаёт имя сокета EGD/PRNGD.
Для указания имени файла источника случайных данных также может быть использована
переменная окружения RANDFILE. Библиотеки GnuTLS и Mozilla NSS игнорируют этот параметр.
</dd><dt><b>TLSVerifyClient &lt;level&gt;</b>

</dt><dd>
Определяет, какие проверки требуется (и требуется ли вообще) выполнить с сертификатом клиента
во входящей сессии TLS. В качестве аргумента
<b>&lt;level&gt;</b>

может быть использовано одно из следующих ключевых слов:
<dl compact=""><dt></dt><dd>
<dl compact="">
<dt><b>never</b>

</dt><dd>
Это установка по умолчанию.
<b>slapd</b>

не будет запрашивать сертификат у клиента.
</dd><dt><b>allow</b>

</dt><dd>
Сертификат клиента будет запрошен. Если сертификат не был предоставлен,
сессия будет продолжена нормальным образом. Если же был предоставлен плохой сертификат,
он будет проигнорирован и сессия будет продолжена нормальным образом.
</dd><dt><b>try</b>

</dt><dd>
Сертификат клиента будет запрошен. Если сертификат не был предоставлен,
сессия будет продолжена нормальным образом. Если же был предоставлен плохой сертификат,
сессия будет немедленно завершена.
</dd><dt><b>demand | hard | true</b>

</dt><dd>
Эти ключевые слова эквивалентны, определены для поддержания совместимости.
Сертификат клиента будет запрошен. Если сертификат не был предоставлен,
либо был предоставлен плохой сертификат, сессия будет немедленно завершена.
<p>
Обратите внимание, что при использовании с сессией TLS механизма аутентификации
SASL EXTERNAL требуется, чтобы у клиента был действующий сертификат.
Поэтому для работы аутентификации SASL EXTERNAL установка
<b>TLSVerifyClient</b>

должна отличаться от настройки по умолчанию.
</p></dd></dl>
</dd></dl>

</dd><dt><b>TLSCRLCheck &lt;level&gt;</b>

</dt><dd>
Определяет, следует ли использовать предоставляемые удостоверяющими центрами
списки отзыва сертификатов (Certificate Revocation List, CRL) для проверки того,
не был ли отозван сертификат клиента. Для использования данного параметра
требуется указание параметра
<b>TLSCACertificatePath</b>.

Библиотеки GnuTLS и Mozilla NSS игнорируют этот параметр. В качестве аргумента
<b>&lt;level&gt;</b>

может быть использовано одно из следующих ключевых слов:
<dl compact=""><dt></dt><dd>
<dl compact="">
<dt><b>none</b>

</dt><dd>
Проверка CRL не выполняется.
</dd><dt><b>peer</b>

</dt><dd>
Выполняется проверка только CRL удостоверяющего центра, выдавшего сертификат клиента.
</dd><dt><b>all</b>

</dt><dd>
Выполняется проверка CRL всей цепочки сертификатов.
</dd></dl>
</dd></dl>

</dd><dt><b>TLSCRLFile &lt;filename&gt;</b>

</dt><dd>
Указывает файл, содержащий список отозванных сертификатов, который нужно использовать для проверки
того, не были ли отозваны сертификаты. Эта опция поддерживается только библиотеками GnuTLS и Mozilla NSS.
</dd></dl>
<a name="lbAG">&nbsp;</a>
<h2>ОБЩИЕ ПАРАМЕТРЫ МЕХАНИЗМОВ МАНИПУЛЯЦИИ ДАННЫМИ</h2>

Параметры этого раздела применяются только к секции конфигурационного файла
для определённого механизма манипуляции данными.
Они поддерживаются всеми типами механизмов манипуляции данными.
<dl compact="">
<dt><b>backend &lt;databasetype&gt;</b>

</dt><dd>
Отмечает начало определения механизма манипуляции данными.
Аргумент &lt;databasetype&gt; должен быть одним из типов
<b>bdb</b>,

<b>config</b>,

<b>dnssrv</b>,

<b>hdb</b>,

<b>ldap</b>,

<b>ldif</b>,

<b>mdb</b>,

<b>meta</b>,

<b>monitor</b>,

<b>null</b>,

<b>passwd</b>,

<b>perl</b>,

<b>relay</b>,

<b>shell</b>

или
<b>sql</b>,

в зависимости от того, какой механизм манипуляции данными будет обслуживать базу данных.
<p>
</p></dd></dl>
<a name="lbAH">&nbsp;</a>
<h2>ОБЩИЕ ПАРАМЕТРЫ БАЗ ДАННЫХ</h2>

Параметры этого раздела применяются только к секции конфигурационного файла той базы данных,
в которой они определены. Они поддерживаются всеми типами механизмов манипуляции данными.
Обратите внимание, что параметр
<b>database</b>

и хотя бы один параметр
<b>suffix</b>

являются обязательными для каждой базы данных.
<dl compact="">
<dt><b>database &lt;databasetype&gt;</b>

</dt><dd>
Отмечает начало определения нового экземпляра базы данных.
Аргумент &lt;databasetype&gt;  должен быть одним из типов
<b>bdb</b>,

<b>config</b>,

<b>dnssrv</b>,

<b>hdb</b>,

<b>ldap</b>,

<b>ldif</b>,

<b>mdb</b>,

<b>meta</b>,

<b>monitor</b>,

<b>null</b>,

<b>passwd</b>,

<b>perl</b>,

<b>relay</b>,

<b>shell</b>

или
<b>sql</b>,

в зависимости от того, какой механизм манипуляции данными будет обслуживать базу данных.
<p>
Операции LDAP, в том числе поиск по поддереву, по умолчанию получают доступ только к одной базе данных.
Такое поведение можно изменить путём склеивания баз данных вместе с помощью ключевого слова
<b>subordinate</b>.

Списки контроля доступа и некоторые наложения могут также распространяться на несколько баз данных.
</p></dd><dt><b>add_content_acl on | off</b>

</dt><dd>
Управляет тем, будет ли при операции Add выполняться проверка ACL над содержимым добавляемой записи.
По умолчанию такая проверка отключена (off). Подробнее о требованиях ACL для операций Add смотрите в man-странице 
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd.access&amp;category=5">slapd.access</a></b>(5).

</dd><dt><b>extra_attrs &lt;attrlist&gt;</b>

</dt><dd>
В этом параметре перечисляются атрибуты, которые требуется добавлять к спискам атрибутов в поисковых запросах.
Механизмы манипуляции данными, работающие с локальными хранилищами, возвращают механизму frontend запись целиком.
Механизм frontend заботится о том, чтобы возвращать клиенту только запрошенные атрибуты, разрешённые в ACL. Однако,
для некоторых функций, вроде контроля доступа и ему подобных, могут потребоваться специфичные атрибуты, которые не
возвращаются автоматически механизмами манипуляции данными, работающими с удалёнными хранилищами
(прокси-механизмы и им подобные).  
<b>&lt;attrlist&gt;</b>

- это список атрибутов, которые требуются для внутренних целей и потому всегда должны быть получены,
даже если они не запрашивались явно клиентами.
</dd><dt><b>hidden on | off</b>

</dt><dd>
Параметр управляет тем, будет ли база данных использоваться для ответа на запросы.
Скрытая база данных никогда не будет выбрана для ответа на какие-либо запросы.
Кроме того, любой суффикс, настроенный для этой базы данных, будет игнорироваться
при проведении проверок на конфликты с другими базами данных. Значение по умолчанию - off.
</dd><dt><b>lastmod on | off</b>

</dt><dd>
Параметр управляет тем, будет ли
<b>slapd</b>

автоматически поддерживать в записях атрибуты modifiersName, modifyTimestamp,
creatorsName и createTimestamp. Он также управляет атрибутами entryCSN и entryUUID,
которые требуются для поставщика репликации syncrepl. Значение по умолчанию - on.
</dd><dt><b>limits &lt;selector&gt; &lt;limit&gt; [&lt;limit&gt; [...]]</b>

</dt><dd>
Указывает ограничения по времени и по размеру на основании того,
кто является инициатором операции, или на основании базового DN. Аргумент
<b>&lt;selector&gt;</b>

может быть одним из
<dl compact=""><dt></dt><dd>
<dl compact=""><dt></dt><dd>
<dl compact="">
<dt>anonymous | users | [&lt;dnspec&gt;=]&lt;pattern&gt; | group[/oc[/at]]=&lt;pattern&gt;</dt><dd>
<p>
</p></dd></dl>
</dd></dl>

где
<dl compact=""><dt></dt><dd>
<dl compact="">
<dt>&lt;dnspec&gt; ::= dn[.&lt;type&gt;][.&lt;style&gt;]</dt><dd>
</dd><dt>&lt;type&gt;  ::= self | this</dt><dd>
</dd><dt>&lt;style&gt; ::= exact | base | onelevel | subtree | children | regex | anonymous</dt><dd>
<p>
</p></dd></dl>
</dd></dl>

Тип DN
<b>self</b>

является типом по умолчанию и означает пользователя, от имени которого выполнено подсоединение, а
<b>this</b>

означает базовый DN операции. Выражение
<b>anonymous</b>

соответствует всем клиентам, не прошедшим аутентификацию. Выражение
<b>users</b>

соответствует всем аутентифицированным клиентам. Если указано только DN записи
без каких-либо ключевых слов, подразумевается совпадение DN записи, от которой клиент
произвёл аутентификацию, с этим DN (как при указании ключевого слова dn.exact).
Если перед шаблоном DN указано опциональное ключевое слово
<b>dn</b>,

то оценка шаблона зависит от квалификатора стиля dn. При указании квалификаторов
<b>exact</b>

или
<b>base</b>

(которые являются синонимами), требуется полное совпадение DN клиента с DN шаблона;
при указании квалификатора
<b>onelevel</b>

требуется, чтобы DN клиента совпадало с DN записи строго на один уровень ниже записи,
указанной в шаблоне; при указании квалификатора
<b>subtree</b>

разрешается совпадение DN клиента с DN записи на любой глубине от указанной в шаблоне записи,
в том числе и совпадение с DN самой этой записи; при указании квалификатора
<b>children</b>

разрешается совпадение DN клиента с DN записи на любой глубине от указанной в шаблоне записи,
но не совпадение с DN самой этой записи; при указании квалификатора
<b>regex</b>

(значение по умолчанию) требуется совпадение с шаблоном, основанным на POSIX (''расширенном'')
регулярном выражении. Наконец, квалификатор
<b>anonymous</b>

совпадает с операциями, выполняемыми без подсоединения; в этом случае поле
<b>pattern</b>

игнорируется; аналогично использованию формы
<b>anonymous</b>

условия
<b>&lt;selector&gt;</b>.

Выражение
<b>group</b>

с опциональными полями
<b>oc</b>

(объектный класс) и
<b>at</b>

(тип атрибута), за которым следует шаблон
<b>pattern</b>,

задаёт ограничения для любых DN, перечисленных в значениях атрибута
<b>at</b>

(по умолчанию -
<b>member</b>)

записи с групповым объектным классом
<b>oc</b>

(по умолчанию -
<b>groupOfNames</b>),

DN которой полностью совпадает с шаблоном
<b>pattern</b>.

<p>
В настоящее время поддерживаются ограничения
<b>size</b>

(по размеру) и
<b>time</b>

(по времени).
</p><p>
Синтаксис для ограничений по времени -
<b>time[.{soft|hard}]=&lt;integer&gt;</b>,

где
<i>integer</i>

- это число секунд, которое будет затрачивать slapd при формировании ответа на поисковый запрос.
Если клиент не запросил явно ограничение по времени, будет использовано ограничение
<b>soft</b>;

если запрошенное клиентом ограничение по времени превысило ограничение
<b>hard</b>,



вместо запрошенного будет использовано это ограничение. Если в качестве ограничения
<b>hard</b>

задано ключевое слово
<i>soft</i>,

ограничение soft будет использовано в любом случае; если в качестве ограничения
<b>hard</b>

задано ключевое слово
<i>unlimited</i>,

это означает, что ограничение hard не накладывается.
Явно указанное при запросе ограничение по времени, меньшее или равное ограничению
<b>hard</b>,

будет удовлетворено.
Если при задании ограничения не указывались квалификаторы,
указанное значение присваивается ограничению
<b>soft</b>,

а в качестве ограничения
<b>hard</b>

устанавливается ключевое слово
<i>soft</i>,

таким образом сохраняется оригинальное поведение.
</p><p>
Синтаксис для ограничений по размеру -
<b>size[.{soft|hard|unchecked}]=&lt;integer&gt;</b>,

где
<i>integer</i>

- это максимальное число записей, которые slapd будет возвращать в ответ на поисковый запрос.
Если клиент не запросил явно ограничение по размеру, будет использовано ограничение
<b>soft</b>;

если запрошенное клиентом ограничение по размеру превысило ограничение
<b>hard</b>,



вместо запрошенного будет использовано это ограничение. Если в качестве ограничения
<b>hard</b>

задано ключевое слово
<i>soft</i>,

ограничение soft будет использовано в любом случае; если в качестве ограничения
<b>hard</b>

задано ключевое слово
<i>unlimited</i>,

это означает, что ограничение hard не накладывается.
Явно указанное при запросе ограничение по размеру, меньшее или равное ограничению
<b>hard</b>,

будет удовлетворено.
Квалификатор
<b>unchecked</b>

устанавливает ограничение на число записей-кандидатов, которые будет разрешено проверить
при подготовке ответа на поисковый запрос. Смысл данного ограничения в том,
что обработка поисковых фильтров, затрагивающих атрибуты,
которые не были корректно проиндексированы, может привести к тому, что
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd&amp;category=8">slapd</a></b>(8)

должен будет проверить большое количество записей-кандидатов на предмет их соответствия
этим поисковым фильтрам. Ограничение
<b>unchecked</b>

предоставляет возможность прекращать такие операции ещё до того, как они начали выполняться.
Если количество отобранных записей-кандидатов превысит ограничение
<b>unchecked</b>,

поиск будет прерван и выдано сообщение
<i>Unwilling to perform</i>.

Если в качестве ограничения
<b>unchecked</b>

задано ключевое слово
<i>unlimited,</i>

данное ограничение не применяется (поведение по умолчанию).
Если в качестве ограничения
<b>unchecked</b>

задано ключевое слово
<i>disabled</i>,

поиск вообще не выполняется; это может быть использовано для того, чтобы запретить
определённому набору пользователей выполнять поисковые запросы. Если при задании ограничения
не указывались квалификаторы, указанное значение присваивается ограничению
<b>soft</b>,

а в качестве ограничения
<b>hard</b>

устанавливается ключевое слово
<i>soft</i>,

таким образом, сохраняется оригинальное поведение.
</p><p>
В случае, если совпадение с условиями данной директивы не найдено, применяются
глобальные ограничения. Значения по умолчанию соответствуют значениям директив
<b>sizelimit</b>

и
<b>timelimit</b>;

для
<b>unchecked</b>

ограничения не назначаются.
</p><p>
Если в запросе был указан элемент управления
<b>pagedResults</b>,

по умолчанию используется ограничение по размеру
<b>hard</b>,

поскольку при запросе конкретного размера страницы подразумевается явное указание
количества записей, которые требуется вернуть. Однако, ограничение по размеру применяется
к общему количеству записей, возвращаемых на поисковый запрос, а не к одной странице.
Можно определить дополнительные ограничения по размеру с использованием синтаксиса
<b>size.pr={&lt;integer&gt;|noEstimate|unlimited}</b>,

где
<i>integer</i>

- это максимальный размер страницы, если не было задано явного ограничения. Ключевое слово
<i>noEstimate</i>

запрещает серверу выдавать расчётное общее число записей, которые могут быть возвращены
(примечание: текущая реализация не выдаёт каких-либо расчётных данных). Ключевое слово
<i>unlimited</i>

показывает, что на размер страницы элемента управления pagedResults
ограничений не налагается. Синтаксис
<b>size.prtotal={&lt;integer&gt;|unlimited|disabled}</b>

позволяет задать ограничение на общее число записей, которые вернёт запрос с элементом
управления pagedResults. По умолчанию значение этого ограничения равно значению ограничения
<b>hard</b>.

Если оно задаётся явно, то
<i>integer</i>

- это максимальное число записей, которое может вернуть операция поиска
с элементом управления pagedResults в целом. Использование ключевого слова
<i>unlimited</i>

позволяет снять ограничение на количество возвращаемых записей, то есть позволяет использовать
элемент управления pagedResults как способ обойти ограничения по размеру,
накладываемые на обычный поиск. Ключевое слово
<i>disabled</i>

отключает возможность использования данного элемента управления, то есть невозможно будет вернуть
постраничные результаты. Имейте ввиду, что общее число записей, возвращаемых при использовании
в запросе элемента управления pagedResults, не может превышать количества, установленного
ограничением по размеру
<b>hard</b>,

накладываемым на обычный поиск, если только это количество не будет расширено в ограничении
<b>prtotal</b>.

</p><p>
Параметр <b>limits</b> обычно используется для того, чтобы разрешить возврат неограниченного количества
записей в ответ на поисковый запрос, выполняемый от имени идентификационной сущности, используемой
потребителем репликации, которая производится средствами описанного в RFC 4533 протокола синхронизации
содержимого LDAP (подробнее смотрите в описании параметра <b>syncrepl</b>).
</p></dd></dl>

</dd><dt><b>maxderefdepth &lt;depth&gt;</b>

</dt><dd>
Указывает максимальное число псевдонимов, которые будут разыменованы в ходе поиска записи.
Используется для предотвращения бесконечного зацикливания при разыменовании
ссылающихся друг на друга псевдонимов. Значение по умолчанию - 15.
</dd><dt><b>mirrormode on | off</b>

</dt><dd>
Данный параметр переводит базу данных-реплику в зеркальный ("mirror") режим.
Операции обновления каталога будут приниматься от любого пользователя,
а не только от пользователя, указанного в параметре updatedn. До установки данного параметра
база данных уже должна быть настроена как потребитель репликации syncrepl.
Данный режим также требует, чтобы был настроен параметр
<b>serverID</b>

(смотрите выше). Значение по умолчанию - off.
</dd><dt><b>monitoring on | off</b>

</dt><dd>
Этот параметр включает специфичный для базы данных мониторинг, который будет выводиться в связанную
с текущей базой данных запись в поддереве "cn=Databases,cn=Monitor" базы данных мониторинга,
если она сконфигурирована. В настоящий момент специфичный для баз данных мониторинг предоставляют
только механизмы манипуляции данными BDB и HDB. Значение по умолчанию зависит от типа
механизма манипуляции данными.
</dd><dt><b>overlay &lt;overlay-name&gt;</b>

</dt><dd>
Добавляет указанное наложение к этой базе данных. Наложение - это кусок программного кода,
перехватывающий операции базы данных для того, чтобы расширить или изменить их.
Наложения помещаются в стек над базой данных, поэтому они будут выполняться в порядке,
обратном тому, в каком они были указаны в конфигурационном файле, а сама база данных получит
управление в последнюю очередь. Обзор доступных наложений смотрите в man-странице
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd.overlays&amp;category=5">slapd.overlays</a></b>(5).

Обратите внимание, что все настройки, касающиеся непосредственно базы данных,
должны быть указаны до настроек какого-либо наложения.
</dd><dt><b>readonly on | off</b>

</dt><dd>
Этот параметр переводит базу данных в режим "только чтение" ("read-only"). На любые попытки внести
изменение в базу данных будет возвращена ошибка "Unwilling to perform". Значение по умолчанию - off.
</dd><dt><b>restrict &lt;oplist&gt;</b>

</dt><dd>
Указывает разделённый пробельными символами список операций, которые будут запрещены.
При указании в определении базы данных, ограничения применяются только к этой базе данных,
в ином случае они являются глобальными. В качестве операций могут быть перечислены
<b>add</b>,

<b>bind</b>,

<b>compare</b>,

<b>delete</b>,

<b>extended[=&lt;OID&gt;]</b>,

<b>modify</b>,

<b>rename</b>,

<b>search</b>,

либо специальные псевдо-операции
<b>read</b>

и
<b>write</b>,

которые объединяют все операции чтения и записи соответственно. Использование
<i>restrict write</i>

эквивалентно
<i>readonly on</i>

(смотрите выше). Ключевое слово
<b>extended</b>

позволяет указать OID конкретной операции, которая будет запрещена.
</dd><dt><b>rootdn &lt;dn&gt;</b>

</dt><dd>
Указывает уникальное имя (DN), которое не попадает под действие контроля доступа или
административных ограничений на операции с этой базой данных.
Это DN может быть, а может и не быть ассоциировано с записью каталога.
Пустое значение rootdn (по умолчанию) указывает на то, что административный доступ
не предоставляется. Рекомендуется, чтобы rootdn указывалось, только когда это необходимо
(например, при первоначальном наполнении базы данных). Если rootdn находится в пределах
контекста именования (суффикса) базы данных, в параметре
<b>rootpw</b>

также может быть предоставлен пароль для простого подсоединения. Многие дополнительные
возможности, в том числе репликация syncrepl, требуют, чтобы для базы данных
было определено rootdn.
</dd><dt><b>rootpw &lt;password&gt;</b>

</dt><dd>
Указывает пароль (или хэш пароля) для rootdn. Этот пароль может быть установлен,
только если rootdn находится в пределах контекста именования (суффикса) текущей базы данных.
Данный параметр принимает пароли во всех указанных в RFC 2307 форматах значения атрибута
userPassword, которые известны серверу (смотрите описание параметра
<b>password-hash</b>),

а также пароль в открытом виде. Для генерации хэша пароля может быть использована утилита
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slappasswd&amp;category=8">slappasswd</a></b>(8).

Пароли в открытом виде и в формате <b>{CRYPT}</b> не рекомендуются. При пустом значении
этого параметра (по умолчанию), подразумевается, что аутентификация rootdn производится
иными средствами (например, SASL). Использование SASL рекомендуется.
</dd><dt><b>suffix &lt;dn suffix&gt;</b>

</dt><dd>
Указывает DN суффикса запросов, которые будут передаваться этой базе данных. Можно задавать
несколько параметров suffix, но хотя бы один должен быть задан для каждого определения
базы данных.
<p>
Если суффикс одной базы данных находится "внутри" суффикса другой, определение
базы данных с внутренним суффиксом должно быть раньше в конфигурационном файле.
Для склеивания таких баз данных вместе можно использовать параметр
<b>subordinate</b>.

</p></dd><dt><b>subordinate [advertise]</b>

</dt><dd>
Указывает, что текущая база данных является нижестоящей по отношению к другой базе данных
другого механизма манипуляции данными. У нижестоящей базы данных может быть только один суффикс.
Этот параметр может использоваться для склеивания нескольких баз данных в единый
контекст именования (namingContext). Если суффикс текущей базы данных входит в
контекст именования вышестоящей базы данных, поисковые запросы к вышестоящей базе данных будут
также распространяться и на нижестоящую. У всех баз данных, объединённых в единый
контекст именования, должны быть идентичные значения rootdn. Эта настройка не влияет на поведение
других операций LDAP. В частности, нельзя использовать операцию moddn для перемещения записи
из одной нижестоящей базы данных в другую нижестоящую в пределах одного контекста именования.
<p>
Если был указан опциональный флаг <b>advertise</b>, контекст именования этой базы данных
объявляется в корневой DSE. По умолчанию контекст этой базы является скрытым,
а видимым является только вышестоящий контекст.
</p><p>
Если утилиты
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapcat&amp;category=8">slapcat</a></b>(8),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapadd&amp;category=8">slapadd</a></b>(8)

или
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapindex&amp;category=8">slapindex</a></b>(8)

используются с вышестоящей базой данных, также будут задействованы и все связанные
нижестоящие базы данных, поддерживающие эти утилиты.
</p><p>
Обычно имеет смысл конфигурировать у склеиваемых баз данных одинаковые индексы (если они
поддерживают индексирование), даже для тех атрибутов, которые существуют только в некоторых из
этих баз данных. В общем случае, следует настраивать склеиваемые базы данных настолько идентично,
насколько это возможно, чтобы они могли выступать как единый каталог.
</p><p>
Имейте ввиду, что функциональность <i>subordinate</i> внутренне реализована через наложение <i>glue</i>,
и это наложение будет взаимодействовать с другими используемыми наложениями. По умолчанию
наложение glue автоматически конфигурируется как последнее наложение соответствующей базы данных.
Его позиция в настройках базы данных может быть сконфигурирована явно путём указания
директивы <b>overlay glue</b> в нужном месте. Явное указание требуется, например, при использовании
наложения <i>syncprov</i>, которое должно следовать за <i>glue</i>, чтобы работать со всеми склеиваемыми
базами данных:
</p><dl compact=""><dt></dt><dd>
<pre>        database bdb
        suffix dc=example,dc=com
        ...
        overlay glue
        overlay syncprov
</pre>

</dd></dl>

</dd><dt><b>sync_use_subentry</b>

</dt><dd>
Указывает, что значение syncrepl contextCSN будет храниться не в корневой записи базы данных,
а в дочерней к ней подзаписи. RDN подзаписи будет "cn=ldapsync". По умолчанию contextCSN
хранится в корневой записи базы данных.
</dd><dt>

<b>syncrepl rid=&lt;replica ID&gt;</b>

<b>provider=ldap[s]://&lt;hostname&gt;[:port]</b>

<b>searchbase=&lt;base DN&gt;</b>

<b>[type=refreshOnly|refreshAndPersist]</b>

<b>[interval=dd:hh:mm:ss]</b>

<b>[retry=[&lt;retry interval&gt; &lt;# of retries&gt;]+]</b>

<b>[filter=&lt;filter str&gt;]</b>

<b>[scope=sub|one|base|subord]</b>

<b>[attrs=&lt;attr list&gt;]</b>

<b>[exattrs=&lt;attr list&gt;]</b>

<b>[attrsonly]</b>

<b>[sizelimit=&lt;limit&gt;]</b>

<b>[timelimit=&lt;limit&gt;]</b>

<b>[schemachecking=on|off]</b>

<b>[network-timeout=&lt;seconds&gt;]</b>

<b>[timeout=&lt;seconds&gt;]</b>

<b>[bindmethod=simple|sasl]</b>

<b>[binddn=&lt;dn&gt;]</b>

<b>[saslmech=&lt;mech&gt;]</b>

<b>[authcid=&lt;identity&gt;]</b>

<b>[authzid=&lt;identity&gt;]</b>

<b>[credentials=&lt;passwd&gt;]</b>

<b>[realm=&lt;realm&gt;]</b>

<b>[secprops=&lt;properties&gt;]</b>

<b>[keepalive=&lt;idle&gt;:&lt;probes&gt;:&lt;interval&gt;]</b>

<b>[starttls=yes|critical]</b>

<b>[tls_cert=&lt;file&gt;]</b>

<b>[tls_key=&lt;file&gt;]</b>

<b>[tls_cacert=&lt;file&gt;]</b>

<b>[tls_cacertdir=&lt;path&gt;]</b>

<b>[tls_reqcert=never|allow|try|demand]</b>

<b>[tls_cipher_suite=&lt;ciphers&gt;]</b>

<b>[tls_crlcheck=none|peer|all]</b>

<b>[tls_protocol_min=&lt;major&gt;[.&lt;minor&gt;]]</b>

<b>[suffixmassage=&lt;real DN&gt;]</b>

<b>[logbase=&lt;base DN&gt;]</b>

<b>[logfilter=&lt;filter str&gt;]</b>

<b>[syncdata=default|accesslog|changelog]</b>

<dl compact=""><dt></dt><dd>
Указывает, что текущая база данных выступает в качестве реплики, которая синхронизируется
с содержимым главной базы данных. Настраиваемый сервер
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd&amp;category=8">slapd</a></b>(8)

становится потребителем репликации, на котором будет функционировать механизм репликации
<b>syncrepl</b>.

Содержимое реплики синхронизируется с содержимым главной базы данных с использованием
протокола синхронизации содержимого LDAP (LDAP Content Synchronization protocol).
Детальную информацию о способах настройки
<b>slapd</b>

в качестве реплицируемой службы каталогов с использованием механизма репликации
<b>syncrepl</b>

можно найти в "Руководстве администратора OpenLDAP".
<p>
Значение аргумента
<b>rid</b>

идентифицирует текущую директиву
<b>syncrepl</b>

в настройках сервера-потребителя репликации. Это неотрицательное целое число, не превышающее 999
(ограничено тремя десятичными цифрами).
</p><p>
В значении аргумента
<b>provider</b>

указывается сервер-поставщик репликации, на котором находится главная база данных, в виде LDAP URI.
Если значение &lt;port&gt; не задано, используются стандартные номера портов LDAP (389 или 636).
</p><p>
Содержимое реплики
<b>syncrepl</b>

представляет собой данные, полученные в результате операции поиска Search, и потому определяется
с использованием спецификации этой операции.
<b>slapd</b>-потребитель

будет посылать поисковые запросы
<b>slapd</b>-поставщику

в соответствии с данной спецификацией поиска, включающей в себя,
как и во всех нормальных спецификациях поиска, параметры
<b>searchbase</b>, <b>scope</b>, <b>filter</b>, <b>attrs</b>, <b>attrsonly</b>, <b>sizelimit</b>

и
<b>timelimit</b>.

Значение по умолчанию для <b>scope</b> - <b>sub</b>, для <b>filter</b> - <b>(objectclass=*)</b>,
а для <b>searchbase</b> нет значения по умолчанию. Значение по умолчанию для списка атрибутов
<b>attrs</b> - <b>"*,+"</b>, чтобы были возвращены все пользовательские и операционные атрибуты,
<b>attrsonly</b> по умолчанию не установлен. В параметре
<b>exattrs</b>

(по умолчанию не установлен) можно указать атрибуты, которые должны быть исключены из
возвращаемых записей. Параметры <b>sizelimit</b> и <b>timelimit</b>
в качестве значений принимают только ключевое слово "unlimited" и положительное целое число,
значение по умолчанию для обоих - "unlimited". Эти параметры определяют запрашиваемые
поставщиком ограничения на количество записей, возвращаемых операцией синхронизации содержимого
</p></dd><dd>LDAP, и потому предназначены для реализации частичной репликации на основе размера реплицируемой
базы данных и времени, требуемого для синхронизации. Имейте ввиду, что на стороне поставщика,
как и при любой другой операции поиска, будут применяться все установленные поставщиком ограничения,
касающиеся идентификационной сущности репликации, независимо от того,
какие ограничения запрошены операцией синхронизации содержимого LDAP.
<p>
У протокола синхронизации содержимого LDAP два типа операций. При типе операции
<b>refreshOnly</b>

следующая поисковая операция синхронизации периодически переносится на временной интервал
(задаваемый аргументом
<b>interval</b>,

по умолчанию 1 день) после окончания каждой операции синхронизации. При типе операции
<b>refreshAndPersist</b>

поисковая операция синхронизации остаётся действующей (не завершается) на slapd поставщика.
Дальнейшие обновления в главной базе данных будут генерировать сообщения
<b>searchResultEntry</b>

для slapd потребителя как ответы на выполняющийся запрос поисковой операции синхронизации.
Если первоначальный поиск завершился неудачно из-за ошибки, следующая поисковая операция синхронизации
будет запланирована через некоторый промежуток времени (задаваемый аргументом
<b>interval</b>;

по умолчанию - 1 день). 
</p><p>
Если во время репликации произошла ошибка, потребитель будет пытаться выполнить повторное соединение
в соответствии со значением аргумента
<b>retry</b>,

который представляет собой список из пар &lt;retry interval&gt; и &lt;# of retries&gt;. Например,
retry="60 10 300 3" позволяет потребителю выполнять повторные попытки подключения через каждые 60 секунд
первые 10 раз, а затем через каждые 300 секунд ещё три раза, прежде чем прекратить попытки.
Если в значении &lt;# of retries&gt; вместо числа стоит знак `+', это означает неопределённое количество попыток,
пока повторное подключение не будет успешно установлено. Если аргумент
<b>retry</b>

не задан, по умолчанию syncrepl будет выполнять повторные попытки подключения бесконечно с итервалом в один час.
</p><p>
На потребителе репликации LDAP Sync можно осуществлять проверку схемы данных, для этого аргументу
<b>schemachecking</b>

нужно задать значение on. Значение по умолчанию - <b>off</b>.
Установка параметра проверки схемы данных в <b>on</b> означает, что реплицируемые записи должны иметь
структурный объектный класс, удовлетворять требованиям объектных классов в части, касающейся обязательных/разрешённых
атрибутов, а также иметь атрибуты именования и отличительные значения. В связи с этим, при использовании
частичной репликации параметр проверки схемы данных следует устанавливать в <b>off</b>.
</p><p>
Аргумент
<b>network-timeout</b>

определяет, как долго потребитель будет ожидать установки сетевого соединения с поставщиком. Аргумент
<b>timeout</b>

определяет, как долго потребитель будет ожидать выполнения первоначального запроса Bind после установки
сетевого соединения. Значения по умолчанию для этих аргументов берутся из
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=ldap.conf&amp;category=5">ldap.conf</a></b>(5).

</p><p>
Для
<b>bindmethod simple</b>

требуется задать аргументы
<b>binddn</b>

и
<b>credentials</b>;

использовать его следует только при наличии адекватных сервисов обеспечения безопасности (например, TLS или IPSEC).
<b>ПОМНИТЕ: удостоверяющие данные для простого подсоединения (аргумент credentials) должны указываться в открытом виде!</b>

Для
<b>bindmethod sasl</b>

требуется задать аргумент
<b>saslmech.</b>

В зависимости от используемого механизма можно указать аутентификационную идентификационную сущность
и/или удостоверяющие данные в аргументах
<b>authcid</b>

и
<b>credentials</b>.

В аргументе
<b>authzid</b>

можно указать авторизационную идентификационную сущность. В аргументе
<b>secprops</b>

можно задать специфические параметры безопасности для подсоединения SASL (как в рассматриваемом выше параметре
<b>sasl-secprops</b>).

Отличный от значения по умолчанию SASL-realm можно задать в аргументе
<b>realm</b>.

Идентификационной сущности, используемой потребителем в целях синхронизации, следует разрешить получение
неограниченного количества записей в ответ на поисковый запрос. На поставщике репликации, помимо того, чтобы
разрешить идентификационной сущности syncrepl проходить аутентификацию, также следует предоставить этой
идентификационной сущности соответствующие привилегии доступа к данным, которые будут реплицироваться
(директива <b>access</b>), а также установить подходящие ограничения по времени и по размеру. Это может быть
достигнуто путём установки в конфигурации поставщика либо параметров <b>sizelimit</b> и <b>timelimit</b> в unlimited,
либо подходящих настроек параметра <b>limits</b> (подробнее смотрите в описании директив <b>sizelimit</b> и <b>limits</b>).
</p><p>
В аргументе
<b>keepalive</b>

задаются значения <i>idle</i>, <i>probes</i> и <i>interval</i>, используемые для проверки работоспособности
сокета; значение
<i>idle</i>

- это количество секунд, которое будет простаивать соединение, прежде чем TCP начнёт посылать пробы проверки
работоспособности; значение
<i>probes</i>

- это максимальное число проб, посылаемых TCP перед тем, как закрыть соединение; значение
<i>interval</i>

- это  интервал в секундах между посылками отдельных проб проверки работоспособности. Эти значения разрешено
задавать лишь в некоторых системах; в остальных системах аргумент
<b>keepalive</b>

будет проигнорирован, и будут использованы общесистемные установки.
</p><p>
Аргумент
<b>starttls</b>

указывает, что нужно использовать расширенную операцию StartTLS для установления сессии TLS до выполнения
подсоединения (Bind) к поставщику. Если этот аргумент имеет значение
<b>critical</b>,

в случае неудачного завершения запроса StartTLS сессия будет прервана. Если этот аргумент имеет значение
<b>yes</b>,

в случае неудачного завершения запроса StartTLS сессия syncrepl будет продолжена без TLS. Аргумент tls_reqcert
по умолчанию установлен в "demand", значения по умолчанию остальных параметров TLS sycnrepl
аналогичны основным настройкам TLS slapd.
</p><p>
Аргумент
<b>suffixmassage</b>

позволяет потребителю получать записи из удалённого каталога, контекст именования которого отличается
от контекста именования локального каталога. Составная часть DN записей из удалённого каталога, совпадающая
с DN в аргументе <i>searchbase</i>, будет заменена значением DN из аргумента suffixmassage.
</p><p>
Чтобы не реплицировать записи целиком, потребитель может запросить сведения из журнала модификации данных.
Такой режим работы называется <i>delta syncrepl</i>. Для его активации, кроме перечисленных выше аргументов,
нужно указать параметры журнала, который будет использоваться, в аргументах
<b>logbase</b>

и
<b>logfilter</b>.

В аргументе
<b>syncdata</b>

нужно задать либо "accesslog", если журнал соответствует формату
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapo-accesslog&amp;category=5">slapo-accesslog</a></b>(5),

либо "changelog", если он соответствует устаревшему формату <i>changelog</i>. Если аргумент
<b>syncdata</b>

не был указан, либо был указан со значением "default", то параметры работы с журналом игнорируются.
</p></dd></dl>

</dt><dt><b>updatedn &lt;dn&gt;</b>

</dt><dd>
Данный параметр может применяться только к подчинённой базе данных. В нём указывается DN записи, которой
разрешено вносить изменения (по результатам прохождения контроля доступа) в реплику. Требуется только
в некоторых сценариях репликации, работающих в режиме посылок изменений. В общем случае, это DN
<i>не должно</i>

совпадать с
<b>rootdn</b>

главной базы данных.
</dd><dt><b>updateref &lt;url&gt;</b>

</dt><dd>
Указывает отсылку, которая будет возвращаться клиенту, когда
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd&amp;category=8">slapd</a></b>(8)

получает запрос на модификацию локальной базы данных, которая является репликой.
Если параметр указан несколько раз, клиенту будут предоставлены все url.
<p>
</p></dd></dl>
<a name="lbAI">&nbsp;</a>
<h2>ПАРАМЕТРЫ, СПЕЦИФИЧНЫЕ ДЛЯ КОНКРЕТНОГО ТИПА БАЗ ДАННЫХ</h2>

В базах данных различных механизмов манипуляции данными могут быть настроены специфические параметры
конфигурации; они описаны отдельно в man-страницах механизмов манипуляции данными.
Обзор доступных механизмов манипуляции данными смотрите в man-странице
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd.backends&amp;category=5">slapd.backends</a></b>(5).

<a name="lbAJ">&nbsp;</a>
<h2>ПРИМЕРЫ</h2>

<p>

Короткий пример конфигурационного файла:
</p><p>

</p><dl compact=""><dt></dt><dd>
<pre>include   /usr/local/etc/openldap/schema/core.schema
pidfile   /usr/local/var/run/slapd.pid

# Подтипы от типа атрибута "name" (например, "cn" и "ou")
# с опцией ";x-hidden" могут быть использованы в поиске/сравнении,
# но не должны быть показаны при запросе. Смотрите <b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd.access&amp;category=5">slapd.access</a></b>(5).
attributeoptions x-hidden lang-
access to attrs=name;x-hidden by * =cs

# Защита паролей. Смотрите <b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd.access&amp;category=5">slapd.access</a></b>(5).
access    to attrs=userPassword  by * auth
# Доступ на чтение к остальным атрибутам и записям.
access    to *  by * read

database  bdb
suffix    "dc=our-domain,dc=com"
# Директория для файлов базы данных ДОЛЖНА существовать до запуска slapd.
# Доступ к ней должны иметь только slapd и его инструменты.
# Рекомендуемый режим доступа - 0700.
directory /usr/local/var/openldap-data
# Обслуживаемые индексы
index     objectClass  eq
index     cn,sn,mail   pres,eq,approx,sub

# Мы принимаем запросы от клиентов, не поддерживающих полную функциональность
# и не обрабатывающих отсылки, поэтому выполняем удалённый поиск в их интересах
database  ldap
suffix    ""
uri       <a href="ldap://ldap.some-server.com/">ldap://ldap.some-server.com/</a>
lastmod   off
</pre>

</dd></dl>

<p>

Более полный пример конфигурационного файла с аннотациями приведён в "Руководстве администратора
OpenLDAP". Ещё один пример - оригинальный файл /usr/local/etc/openldap/slapd.conf.
<a name="lbAK">&nbsp;</a>
</p><h2>Файлы</h2>

<dl compact="">
<dt>/usr/local/etc/openldap/slapd.conf</dt><dd>
конфигурационный файл slapd по умолчанию
</dd></dl>
<a name="lbAL">&nbsp;</a>
<h2>СМОТРИТЕ ТАКЖЕ</h2>

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=ldap&amp;category=3">ldap</a></b>(3),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=gnutls-cli&amp;category=1">gnutls-cli</a></b>(1),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd-config&amp;category=5">slapd-config</a></b>(5),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd.access&amp;category=5">slapd.access</a></b>(5),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd.backends&amp;category=5">slapd.backends</a></b>(5),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd.overlays&amp;category=5">slapd.overlays</a></b>(5),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd.plugin&amp;category=5">slapd.plugin</a></b>(5),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd&amp;category=8">slapd</a></b>(8),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapacl&amp;category=8">slapacl</a></b>(8),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapadd&amp;category=8">slapadd</a></b>(8),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapauth&amp;category=8">slapauth</a></b>(8),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapcat&amp;category=8">slapcat</a></b>(8),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapdn&amp;category=8">slapdn</a></b>(8),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapindex&amp;category=8">slapindex</a></b>(8),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slappasswd&amp;category=8">slappasswd</a></b>(8),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slaptest&amp;category=8">slaptest</a></b>(8).

<p>

"Руководство администратора OpenLDAP" (<a href="http://www.OpenLDAP.org/doc/admin/,">http://www.OpenLDAP.org/doc/admin/,</a> <a href="http://pro-ldap.ru/tr/admin24/).">http://pro-ldap.ru/tr/admin24/).</a>
<a name="lbAM">&nbsp;</a>
</p><h2>ПРИЗНАНИЕ ЗАСЛУГ</h2>



<b>Программное обеспечение OpenLDAP</b>

разработано и поддерживается проектом OpenLDAP &lt;<a href="http://www.openldap.org/">http://www.openldap.org/</a>&gt;.
<b>Программное обеспечение OpenLDAP</b>

является производным от релиза 3.3 LDAP Мичиганского Университета.

<p>

</p><hr>
<a name="index">&nbsp;</a><h2>Index</h2>
<dl>
<dt><a href="#lbAB">НАЗВАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAC">СИНТАКСИС</a></dt><dd>
</dd><dt><a href="#lbAD">ОПИСАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAE">ПАРАМЕТРЫ ГЛОБАЛЬНОЙ КОНФИГУРАЦИИ</a></dt><dd>
</dd><dt><a href="#lbAF">ПАРАМЕТРЫ TLS</a></dt><dd>
</dd><dt><a href="#lbAG">ОБЩИЕ ПАРАМЕТРЫ МЕХАНИЗМОВ МАНИПУЛЯЦИИ ДАННЫМИ</a></dt><dd>
</dd><dt><a href="#lbAH">ОБЩИЕ ПАРАМЕТРЫ БАЗ ДАННЫХ</a></dt><dd>
</dd><dt><a href="#lbAI">ПАРАМЕТРЫ, СПЕЦИФИЧНЫЕ ДЛЯ КОНКРЕТНОГО ТИПА БАЗ ДАННЫХ</a></dt><dd>
</dd><dt><a href="#lbAJ">ПРИМЕРЫ</a></dt><dd>
</dd><dt><a href="#lbAK">Файлы</a></dt><dd>
</dd><dt><a href="#lbAL">СМОТРИТЕ ТАКЖЕ</a></dt><dd>
</dd><dt><a href="#lbAM">ПРИЗНАНИЕ ЗАСЛУГ</a></dt><dd>
</dd></dl>
<hr>
<br>
<form method="get" action="/search.shtml">
<font size="-1">
<font color="#555555">Поиск по тексту MAN-ов:&nbsp;</font><input size="30" name="words" value="slapd.conf" type="text">
<input name="restrict" value="/man" type="hidden">
<input value="Найти" type="submit">
</font>
<input name="method" value="and" type="hidden">
<input name="format" value="builtin-long" type="hidden">
<input name="sort" value="score" type="hidden">
</form>
<br>
<!--htdig_noindex-->
<noindex>
<br>


</noindex>
<!--/htdig_noindex-->


<!-- footer -->
<!--htdig_noindex-->
<br><br>
<div style="background-color: #E9EAD6; width:100%; height: 61px;">
<div style="margin-right: 20px; float:left; line-height: 61px; vertical-align: middle; margin-left: 10px; font-size: 120%;">
Спонсоры:
</div>
<div style="float:left; height: 60px;  line-height: 60px; margin-left: 20px;">
<a style="align: middle;" target="_blank" href="https://inferno.name/"><img src="/img/inferno2.png" alt="Inferno Solutions" height="57" width="200"></a>
</div>
<div style="float:right; height: 60px;  line-height: 60px;  margin-left: 15px;">
<a style="align: middle;" target="_blank" href="http://hoster.ru/?utm_source=site&amp;utm_medium=banner&amp;utm_campaign=opennet"><img src="/img/dh143x60t.png" alt="Hosting by Hoster.ru" height="60" width="143"></a>
</div>
<div style="float:right;  height: 60px;  line-height: 60px; vertical-align: middle;font-size: 120%;">
Хостинг:
</div>

</div>

<div style="clear: both;"></div>


<br>
<table class="ttxt" style="border-top: 3px solid #C9CaB6;">
<tbody><tr><td width="35%">
<a href="/cgi-bin/opennet/bookmark.cgi">Закладки на сайте</a><br>
<a href="/cgi-bin/opennet/bookmark.cgi?submit=add" target="blank_">Проследить за страницей</a>
</td>
<td align="RIGHT" width="65%">
Created&nbsp;1996-2021&nbsp;by <b><a href="/contact.shtml" title="email maxim.chirkov@gmail.com">Maxim&nbsp;Chirkov</a></b><br>
<a href="https://www.opennet.ru/add.shtml">Добавить</a>, <a href="https://www.opennet.ru/donate.shtml" style="color: #C00000;">Поддержать</a>, <a href="https://www.opennet.ru/banners2.shtml">Вебмастеру</a>
</td>
</tr>
</tbody></table>
<br><br>


<!--/htdig_noindex-->
<!-- end of footer -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-123449-1', 'auto');
    ga('send', 'pageview');
</script>




</body>
<!---------------------------------------------  0  ---------------------------------------------->
