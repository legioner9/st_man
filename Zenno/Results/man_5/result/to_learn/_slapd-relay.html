
<!--+++++++++++++++++++++++++++++++++++++++++++  0  +++++++++++++++++++++++++++++++++++++++++++--->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Проект OpenNet: MAN slapd-relay (5) Форматы файлов (FreeBSD и Linux)</title><meta name="KeyWords" content="man, manual, MAN, системное руководство, linux, FreeBSD, OpenBSD, Solaris, ядро, программы, системный вызов, slapd-relay"><meta name="viewport" content="width=device-width, initial-scale=1"></head>


<body link="#0000FF" vlink="#000080" text="#000000" bgcolor="#E3E4D0" alink="#FF00FF">
<link rel="stylesheet" href="/opennet4.css" type="text/css">
<!--htdig_noindex-->
<form method="get" action="https://www.opennet.ru/search.shtml">
<aside>
<div style="width: 100%; text-align: right; font-size: 70%; background: #E9EAD6; margin-bottom:-10px;">
Профиль: <b><a href="/~" rel="nofollow" title="/~ - сводная страница участника"><u>Аноним</u></a></b> (<a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=login">вход</a> | <a href="https://www.opennet.ru/cgi-bin/openforum/vsluhboard.cgi?az=user_register">регистрация</a>)</div>

<table cellspacing="0" cellpadding="0" width="100%" border="0">
<tbody><tr>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" valign="BOTTOM" bgcolor="#E9EAD6" width="300">
<a href="https://www.opennet.ru/"><img src="/opennet2.gif" alt="The OpenNET Project" height="60" width="249" border="0"></a><br>
</td>
<td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left" bgcolor="#E9EAD6" align="CENTER" width="100">

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:10px;" bgcolor="#E9EAD6" align="CENTER" width="50%">
<table width="100%" border="0">
<tbody><tr>
<td width="22%">
 <a href="https://www.opennet.ru/opennews/" class="h"><b>НОВОСТИ</b></a> (<a href="https://www.opennet.ru/news/opennet.shtml" class="h">+</a>)
</td><td width="18%%">
  <a href="https://www.opennet.ru/mp/" class="h"><b>КОНТЕНТ</b></a>
</td><td width="14%">
  <a href="http://wiki.opennet.ru" class="h"><b>WIKI</b></a>
</td><td width="14%">
   <a href="https://www.opennet.ru/man.shtml" class="h"><b>MAN'ы</b></a>
</td><td width="16%">
   <a href="https://www.opennet.ru/forum/" class="h"><b>ФОРУМ</b></a>
</td><td width="16%">
<a href="https://www.opennet.ru/search.shtml" class="h" onmouseover="document.getElementById('form12').style.display='block';">Поиск</a>&nbsp;(<a href="https://www.opennet.ru/keywords/" class="h">теги</a>)
<input id="form12" style="display: none;" size="10" name="words" value="" title="для поиска в google наберите &quot;g фраза&quot;" type="text">
</td></tr>
</tbody></table>

</td><td style="background: #E9EAD6 url('/back.gif') repeat-x bottom left;padding-bottom:5px;" bgcolor="#E9EAD6" align="right" width="20%">

<a href="https://www.opennet.ru/opennews/opennews_all_utf.rss"><img src="/img/rss.png" alt="RSS" title="RSS" height="16" width="16" border="0"></a>&nbsp;<a href="https://twitter.com/opennetru"><img src="/twitter.png" alt="twitter" title="Twitter" height="16" width="16" border="0"></a>&nbsp;<a href="https://vk.com/opennet"><img src="/img/vkontakte.gif" title="ВКонтакте" height="16" width="16" border="0"></a>&nbsp;<a href="https://zen.yandex.ru/opennet"><img src="/img/zen.gif" title="Yandex Zen" height="16" width="16" border="0"></a>&nbsp;<a href="https://www.facebook.com/OpenNet.News/"><img src="/img/facebook.gif" title="Facebook" height="16" width="16" border="0"></a>&nbsp;<a href="https://telegram.space/opennet_ru"><img src="/img/telegram2.png" title="Telegram" height="16" width="16" border="0"></a>
</td></tr></tbody></table>
</aside>

<style>
    .hdr_mobile {
	text-align: center; 
	display: none;
	margin: 0px;
	padding: 0px;
    }
</style>
<div class="hdr_mobile">
<div style="margin-left: auto; margin-right: auto; width: 100%; height: 70px; border:1px solid #b0b190; min-width: 360px; max-width: 600px; background: #E9EAD6 url('/back.gif') repeat-x bottom left;">
<div style="float:left; width: 249px; height: 60px; margin-top: 10px;">
<a href="https://www.opennet.ru"><img src="/opennet2_lite.gif" style="height: 60px; width: 249px; border: 1px;" alt="The OpenNET Project / Index page"></a>
</div>
<div style="float: left; text-align: center; height: 70px; width: 331px; padding: 5px; margin-left: 10px;">
<br><small>[ <a href="/opennews/">новости</a>&nbsp;/<a href="/opennews/?full_lines=15&amp;lines=15&amp;mid_lines=00">+++</a> | <a href="/forum/">форум</a> | <a href="http://wiki.opennet.ru">wiki</a> | <a href="/keywords/">теги</a>
| <a href="tg://resolve?domain=opennet_ru"><img src="/img/telegram2.png" title="Telegram" style="margin-bottom: -4px;" height="16" width="16" border="0"></a>
]</small>
</div>
</div>
</div>
<div style="clear: both;"></div>


<div style="float: left; width: 279; text-align: left;padding-right: 60px;" id="adv">
</div>
<div style="padding-top: 0px;position:absolute;left:50%;margin-left:-235px;width:470px;" id="adv2">
</div>
<div style="width: 279;float: right;" id="adv3">
</div>
<div style="clear: both;"></div>
<br>
</form>
<!--/htdig_noindex-->

<center><h3><font color="#000088">Интерактивная система просмотра системных руководств (man-ов)</font></h3></center>
<form method="GET" action="/man.shtml"> 
<table cellspacing="0" cellpadding="1" bgcolor="#B0B190" align="center" width="600" border="0">
<tbody><tr>
<td valign="TOP">

<table cellspacing="0" cellpadding="0" bgcolor="#E9EAD6" align="center" width="100%" border="0">
<tbody><tr><td>&nbsp;<font color="#555555">Тема</font></td><td><font color="#555555">Набор</font></td><td><font color="#555555">Категория</font></td><td>&nbsp;</td></tr>
<tr><td>

&nbsp;<input size="20" name="topic" value="slapd-relay" type="text"></td><td><select name="russian">
<option value="4">Solaris man
</option><option value="1">FreeBSD man
</option><option value="3">Разные man
</option><option value="0" selected="">Русские man
</option><option value="2">Linux man
</option><option value="5">POSIX man
</option></select></td>
<td><select size="1" name="category">
	  <option value="" selected="">All
	  </option><option value="1">1
	  </option><option value="2">2
	  </option><option value="3">3
	  </option><option value="4">4
	  </option><option value="5">5
	  </option><option value="6">6
	  </option><option value="7">7
	  </option><option value="8">8
	  </option><option value="9">9
</option></select></td>

<td><input name="submit" value="Показать man" type="submit"></td></tr>
<script async="" src="https://www.google-analytics.com/analytics.js"></script><script language="JavaScript" src="/print.js"></script>
<tr><td colspan="4" align="left">&nbsp;[<a href="/man.shtml">Cписок руководств</a> | <a href="#" onclick="pr('none');">Печать</a>]</td></tr>
</tbody></table>
</td></tr></tbody></table>
</form>
<h3></h3><font size="+2">slapd-relay (5)</font><hr><li>&gt;&gt; <a href="/man.shtml?topic=slapd-relay&amp;category=5&amp;russian=0"><u>slapd-relay</u></a> (5) <font color="#555555"> ( Русские man: Форматы файлов )</font></li>


<a name="lbAB">&nbsp;</a>
<h2>НАЗВАНИЕ</h2>

slapd-relay - механизм манипуляции данными трансляции для slapd
<a name="lbAC">&nbsp;</a>
<h2>ОБЗОР</h2>

/usr/local/etc/openldap/slapd.conf
<a name="lbAD">&nbsp;</a>
<h2>ОПИСАНИЕ</h2>

Основное назначение этого механизма манипуляции данными для
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd&amp;category=8">slapd</a></b>(8)&nbsp;-

отображение контекста именования, определённого в работающей на том же экземпляре
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd&amp;category=8">slapd</a></b>(8)

базе данных, в виртуальный контекст именования и, при необходимости, выполнение манипуляций с типами
атрибутов и объектными классами. Для него требуется наложение
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapo-rwm&amp;category=5">slapo-rwm</a></b>(5).

<p>

Этот механизм манипуляции данными, а также упомянутое наложение, являются экспериментальными.
<a name="lbAE">&nbsp;</a>
</p><h2>КОНФИГУРАЦИЯ</h2>

Приведённые ниже директивы
<b>slapd.conf</b>

применяются к базам данных механизма манипуляции данными трансляции. То есть, они должны следовать
за строкой "database relay" и находиться до последующих строк "backend" или "database".
Другие относящиеся к базам данных директивы описаны в man-странице
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd.conf&amp;category=5">slapd.conf</a></b>(5).

Из директив общего назначения для механизма манипуляции данными
<i>relay</i>

разрешена только директива
<b>suffix</b>.

<dl compact="">
<dt><b>relay &lt;реальный контекст именования&gt;</b>

</dt><dd>
Контекст именования базы данных, представленной в рамках виртуального контекста именования. Наличие
этой директивы подразумевает, что одна конкретная база данных, обслуживающая
<b>реальный контекст именования</b>,

будет представлена в рамках виртуального контекста именования.
<p>
</p></dd></dl>
<a name="lbAF">&nbsp;</a>
<h2>ПРЕОБРАЗОВАНИЕ СУФФИКСА</h2>

База данных
<b>relay</b>

не перезаписывает автоматически контекст именования запросов и ответов. Для этой цели должно быть явно
указано и соответствующим образом настроено наложение
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapo-rwm&amp;category=5">slapo-rwm</a></b>(5).

Обычно, если требуется только перезапись контекста именования, достаточно директивы
<b>rwm-suffixmassage</b>.

<p>
<a name="lbAG">&nbsp;</a>
</p><h2>ПРАВИЛА ДОСТУПА</h2>

Одним из важных аспектов является то, что правила доступа основываются на работе с идентификационной
сущностью, от имени которой выполняется операция. После преобразования из виртуального в реальный
контекст именования, для механизма frontend эта операция будет представлена как выполняемая от имени
идентификационной сущности в реальном контексте именования. Более того, поскольку механизм
<b>back-relay</b>

минует операции механизма frontend реальной базы данных путём выполнения операций напрямую через
внутренний API оригинального механизма манипуляции данными, правила доступа оригинальной базы данных
не применяются, кроме отдельных случаев, например, когда механизм манипуляции данными оригинальной
базы данных выполняет контроль доступа сам по себе.
Как следствие, в экземплярах базы данных relay должны быть определены собственные правила доступа,
совместимые с правилами оригинальной базы данных, и, возможно, с добавлением дополнительных
ограничений. Таким образом, в правилах доступа базы данных
<b>relay</b>

должны указываться идентификационные сущности в реальном контексте именования.
Примеры приведены в разделе "ПРИМЕРЫ".
<p>
<a name="lbAH">&nbsp;</a>
</p><h2>СЦЕНАРИИ</h2>

<p>

Если не задана директива
<b>relay</b>,

база данных
<i>relay</i>

не ссылается на какую-либо конкретную базу данных, но после перезаписи DN запроса обрабатываемой
операции осуществляется выбор наиболее подходящей из баз данных.
</p><p>

Это позволяет с помощью тщательно составленных правил перезаписи направлять некоторые запросы к одной
базе данных, а некоторые - к другой. Например, аутентификация может отображаться на одну базу данных,
а поиск осуществляться в другой, либо можно выбирать различные целевые базы данных в зависимости от
DN запроса, и т.д.
</p><p>

Ещё один вариант - отображать одни и те же операции на разные базы данных в зависимости от деталей
виртуального контекста именования, например, записи групп получать из одной базы данных, а записи
людей - из другой.
</p><p>

<a name="lbAI">&nbsp;</a>
</p><h2>ПРИМЕРЫ</h2>

Для реализации простого отображения виртуального контекста именования, ссылающегося на единственную
базу данных, используйте:
<p>

</p><pre>  database                relay
  suffix                  "dc=virtual,dc=naming,dc=context"
  relay                   "dc=real,dc=naming,dc=context"
  overlay                 rwm
  rwm-suffixmassage       "dc=real,dc=naming,dc=context"
</pre>

<p>

Для реализации простого отображения виртуального контекста именования, при котором определение
реального контекста именования осуществляется для каждой операции, используйте:
</p><p>

</p><pre>  database                relay
  suffix                  "dc=virtual,dc=naming,dc=context"
  overlay                 rwm
  rwm-suffixmassage       "dc=real,dc=naming,dc=context"
</pre>

<p>

Такой вариант может быть полезным, например, для ретрансляции разных баз данных, разделяющих между
собой конечную часть контекста именования (ту, которая подвергается перезаписи).
</p><p>

Для реализации старомодных суффикс-псевдонимов (suffixalias), например, отображения виртуального
контекста в реальный при запросах, но сохранения реального контекста именования в ответах (без обратного
отображения в виртуальный), используйте:
</p><p>

</p><pre>  database                relay
  suffix                  "dc=virtual,dc=naming,dc=context"
  relay                   "dc=real,dc=naming,dc=context"
  overlay                 rwm
  rwm-rewriteEngine       on
  rwm-rewriteContext      default
  rwm-rewriteRule         "dc=virtual,dc=naming,dc=context"
                          "dc=real,dc=naming,dc=context" ":@"
  rwm-rewriteContext      searchFilter
  rwm-rewriteContext      searchEntryDN
  rwm-rewriteContext      searchAttrDN
  rwm-rewriteContext      matchedDN
</pre>

<p>

Обратите внимание, что выполняет инициализация наложения
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapo-rwm&amp;category=5">slapo-rwm</a></b>(5),

но вместо автоматической перезаписи с помощью директивы
<b>rwm-suffixmassage</b>

правила перезаписи устанавливаются в явном виде так, чтобы выполнялось отображение всего потока данных
из виртуального контекста именования в реальный, но никакого отображения из реального контекста
именования в виртуальный не происходило.
</p><p>

Правила доступа:
</p><p>

</p><pre>  database                bdb
  suffix                  "dc=example,dc=com"

  # другие настройки базы данных ...

  access to dn.subtree="dc=example,dc=com"
          by dn.exact="cn=Supervisor,dc=example,dc=com" write
          by * read

  database                relay
  suffix                  "o=Example,c=US"
  relay                   "dc=example,dc=com"
  overlay                 rwm
  rwm-suffixmassage       "dc=example,dc=com"

  #  другие настройки базы данных ...

  access to dn.subtree="o=Example,c=US"
          by dn.exact="cn=Supervisor,dc=example,dc=com" write
          by dn.exact="cn=Relay Supervisor,dc=example,dc=com" write
          by * read
</pre>

<p>

Обратите внимание, что в обоих базах данных идентификационные сущности (в условии
<b>&lt;who&gt;</b>)

указаны в
<b>реальном контексте именования `dc=example,dc=com'</b>,

а цели (в условии
<b>&lt;what&gt;</b>)

- в
<b>реальном</b>

и
<b>виртуальном контексте именования</b>,

соответственно.
<a name="lbAJ">&nbsp;</a>
</p><h2>КОНТРОЛЬ ДОСТУПА</h2>

Механизм манипуляции данными
<b>relay</b>

не соблюдает каких-либо семантик ACL, описанных в man-странице
<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd.access&amp;category=5">slapd.access</a></b>(5);

контроль доступа полностью делегируется транслируемой базе (базам) данных.
Выполняется только проверка доступа на чтение
<b>read (=r)</b>

для псевдо-атрибута
<b>entry</b>

и других значений атрибутов записей, возвращаемых операцией
<b>Search</b>,

поскольку она выполняется механизмом frontend.
<a name="lbAK">&nbsp;</a>
<h2>ФАЙЛЫ</h2>

<dl compact="">
<dt>/usr/local/etc/openldap/slapd.conf</dt><dd>
конфигурационный файл slapd по умолчанию.
</dd></dl>
<a name="lbAL">&nbsp;</a>
<h2>СМОТРИТЕ ТАКЖЕ</h2>

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd.conf&amp;category=5">slapd.conf</a></b>(5),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd-config&amp;category=5">slapd-config</a></b>(5),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapo-rwm&amp;category=5">slapo-rwm</a></b>(5),

<b><a href="https://www.opennet.ru/cgi-bin/opennet/man.cgi?topic=slapd&amp;category=8">slapd</a></b>(8).

<p>

</p><hr>
<a name="index">&nbsp;</a><h2>Index</h2>
<dl>
<dt><a href="#lbAB">НАЗВАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAC">ОБЗОР</a></dt><dd>
</dd><dt><a href="#lbAD">ОПИСАНИЕ</a></dt><dd>
</dd><dt><a href="#lbAE">КОНФИГУРАЦИЯ</a></dt><dd>
</dd><dt><a href="#lbAF">ПРЕОБРАЗОВАНИЕ СУФФИКСА</a></dt><dd>
</dd><dt><a href="#lbAG">ПРАВИЛА ДОСТУПА</a></dt><dd>
</dd><dt><a href="#lbAH">СЦЕНАРИИ</a></dt><dd>
</dd><dt><a href="#lbAI">ПРИМЕРЫ</a></dt><dd>
</dd><dt><a href="#lbAJ">КОНТРОЛЬ ДОСТУПА</a></dt><dd>
</dd><dt><a href="#lbAK">ФАЙЛЫ</a></dt><dd>
</dd><dt><a href="#lbAL">СМОТРИТЕ ТАКЖЕ</a></dt><dd>
</dd></dl>
<hr>
<br>
<form method="get" action="/search.shtml">
<font size="-1">
<font color="#555555">Поиск по тексту MAN-ов:&nbsp;</font><input size="30" name="words" value="slapd-relay" type="text">
<input name="restrict" value="/man" type="hidden">
<input value="Найти" type="submit">
</font>
<input name="method" value="and" type="hidden">
<input name="format" value="builtin-long" type="hidden">
<input name="sort" value="score" type="hidden">
</form>
<br>
<!--htdig_noindex-->
<noindex>
<br>


</noindex>
<!--/htdig_noindex-->


<!-- footer -->
<!--htdig_noindex-->
<br><br>
<div style="background-color: #E9EAD6; width:100%; height: 61px;">
<div style="margin-right: 20px; float:left; line-height: 61px; vertical-align: middle; margin-left: 10px; font-size: 120%;">
Спонсоры:
</div>
<div style="float:left; height: 60px;  line-height: 60px; margin-left: 20px;">
<a style="align: middle;" target="_blank" href="https://inferno.name/"><img src="/img/inferno2.png" alt="Inferno Solutions" height="57" width="200"></a>
</div>
<div style="float:right; height: 60px;  line-height: 60px;  margin-left: 15px;">
<a style="align: middle;" target="_blank" href="http://hoster.ru/?utm_source=site&amp;utm_medium=banner&amp;utm_campaign=opennet"><img src="/img/dh143x60t.png" alt="Hosting by Hoster.ru" height="60" width="143"></a>
</div>
<div style="float:right;  height: 60px;  line-height: 60px; vertical-align: middle;font-size: 120%;">
Хостинг:
</div>

</div>

<div style="clear: both;"></div>


<br>
<table class="ttxt" style="border-top: 3px solid #C9CaB6;">
<tbody><tr><td width="35%">
<a href="/cgi-bin/opennet/bookmark.cgi">Закладки на сайте</a><br>
<a href="/cgi-bin/opennet/bookmark.cgi?submit=add" target="blank_">Проследить за страницей</a>
</td>
<td align="RIGHT" width="65%">
Created&nbsp;1996-2021&nbsp;by <b><a href="/contact.shtml" title="email maxim.chirkov@gmail.com">Maxim&nbsp;Chirkov</a></b><br>
<a href="https://www.opennet.ru/add.shtml">Добавить</a>, <a href="https://www.opennet.ru/donate.shtml" style="color: #C00000;">Поддержать</a>, <a href="https://www.opennet.ru/banners2.shtml">Вебмастеру</a>
</td>
</tr>
</tbody></table>
<br><br>


<!--/htdig_noindex-->
<!-- end of footer -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-123449-1', 'auto');
    ga('send', 'pageview');
</script>




</body>
<!---------------------------------------------  0  ---------------------------------------------->
